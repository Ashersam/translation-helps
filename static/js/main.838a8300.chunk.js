(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{494:function(e){e.exports=[{id:"gen",testament:"old",verseCount:1533,chapters:[31,25,24,26,32,22,24,22,29,32,32,20,18,24,21,16,27,33,38,18,34,24,20,67,34,35,46,22,35,43,55,32,20,31,29,43,36,30,23,23,57,38,34,34,28,34,31,22,33,26]},{id:"exo",testament:"old",verseCount:1213,chapters:[22,25,22,31,23,30,25,32,35,29,10,51,22,31,27,36,16,27,25,26,36,31,33,18,40,37,21,43,46,38,18,35,23,35,35,38,29,31,43,38]},{id:"lev",testament:"old",verseCount:859,chapters:[17,16,17,35,19,30,38,36,24,20,47,8,59,57,33,34,16,30,37,27,24,33,44,23,55,46,34]},{id:"num",testament:"old",verseCount:1288,chapters:[54,34,51,49,31,27,89,26,23,36,35,16,33,45,41,50,13,32,22,29,35,41,30,25,18,65,23,31,40,16,54,42,56,29,34,13]},{id:"deu",testament:"old",verseCount:959,chapters:[46,37,29,49,33,25,26,20,29,22,32,32,18,29,23,22,20,22,21,20,23,30,25,22,19,19,26,68,29,20,30,52,29,12]},{id:"jos",testament:"old",verseCount:658,chapters:[18,24,17,24,15,27,26,35,27,43,23,24,33,15,63,10,18,28,51,9,45,34,16,33]},{id:"jdg",testament:"old",verseCount:618,chapters:[36,23,31,24,31,40,25,35,57,18,40,15,25,20,20,31,13,31,30,48,25]},{id:"rut",testament:"old",verseCount:85,chapters:[22,23,18,22]},{id:"1sa",testament:"old",verseCount:810,chapters:[28,36,21,22,12,21,17,22,27,27,15,25,23,52,35,23,58,30,24,42,15,23,29,22,44,25,12,25,11,31,13]},{id:"2sa",testament:"old",verseCount:695,chapters:[27,32,39,12,25,23,29,18,13,19,27,31,39,33,37,23,29,33,43,26,22,51,39,25]},{id:"1ki",testament:"old",verseCount:816,chapters:[53,46,28,34,18,38,51,66,28,29,43,33,34,31,34,34,24,46,21,43,29,53]},{id:"2ki",testament:"old",verseCount:719,chapters:[18,25,27,44,27,33,20,29,37,36,21,21,25,29,38,20,41,37,37,21,26,20,37,20,30]},{id:"1ch",testament:"old",verseCount:942,chapters:[54,55,24,43,26,81,40,40,44,14,47,40,14,17,29,43,27,17,19,8,30,19,32,31,31,32,34,21,30]},{id:"2ch",testament:"old",verseCount:822,chapters:[17,18,17,22,14,42,22,18,31,19,23,16,22,15,19,14,19,34,11,37,20,12,21,27,28,23,9,27,36,27,21,33,25,33,27,23]},{id:"ezr",testament:"old",verseCount:280,chapters:[11,70,13,24,17,22,28,36,15,44]},{id:"neh",testament:"old",verseCount:406,chapters:[11,20,32,23,19,19,73,18,38,39,36,47,31]},{id:"est",testament:"old",verseCount:167,chapters:[22,23,15,17,14,14,10,17,32,3]},{id:"job",testament:"old",verseCount:1070,chapters:[22,13,26,21,27,30,21,22,35,22,20,25,28,22,35,22,16,21,29,29,34,30,17,25,6,14,23,28,25,31,40,22,33,37,16,33,24,41,30,24,34,17]},{id:"psa",testament:"old",verseCount:2461,chapters:[6,12,8,8,12,10,17,9,20,18,7,8,6,7,5,11,15,50,14,9,13,31,6,10,22,12,14,9,11,12,24,11,22,22,28,12,40,22,13,17,13,11,5,26,17,11,9,14,20,23,19,9,6,7,23,13,11,11,17,12,8,12,11,10,13,20,7,35,36,5,24,20,28,23,10,12,20,72,13,19,16,8,18,12,13,17,7,18,52,17,16,15,5,23,11,13,12,9,9,5,8,28,22,35,45,48,43,13,31,7,10,10,9,8,18,19,2,29,176,7,8,9,4,8,5,6,5,6,8,8,3,18,3,3,21,26,9,8,24,13,10,7,12,15,21,10,20,14,9,6]},{id:"pro",testament:"old",verseCount:915,chapters:[33,22,35,27,23,35,27,36,18,32,31,28,25,35,33,33,28,24,29,30,31,29,35,34,28,28,27,28,27,33,31]},{id:"ecc",testament:"old",verseCount:222,chapters:[18,26,22,16,20,12,29,17,18,20,10,14]},{id:"sng",testament:"old",verseCount:117,chapters:[17,17,11,16,16,13,13,14]},{id:"isa",testament:"old",verseCount:1292,chapters:[31,22,26,6,30,13,25,22,21,34,16,6,22,32,9,14,14,7,25,6,17,25,18,23,12,21,13,29,24,33,9,20,24,17,10,22,38,22,8,31,29,25,28,28,25,13,15,22,26,11,23,15,12,17,13,12,21,14,21,22,11,12,19,12,25,24]},{id:"jer",testament:"old",verseCount:1364,chapters:[19,37,25,31,31,30,34,22,26,25,23,17,27,22,21,21,27,23,15,18,14,30,40,10,38,24,22,17,32,24,40,44,26,22,19,32,21,28,18,16,18,22,13,30,5,28,7,47,39,46,64,34]},{id:"lam",testament:"old",verseCount:154,chapters:[22,22,66,22,22]},{id:"ezk",testament:"old",verseCount:1273,chapters:[28,10,27,17,17,14,27,18,11,22,25,28,23,23,8,63,24,32,14,49,32,31,49,27,17,21,36,26,21,26,18,32,33,31,15,38,28,23,29,49,26,20,27,31,25,24,23,35]},{id:"dan",testament:"old",verseCount:357,chapters:[21,49,30,37,31,28,28,27,27,21,45,13]},{id:"hos",testament:"old",verseCount:197,chapters:[11,23,5,19,15,11,16,14,17,15,12,14,16,9]},{id:"jol",testament:"old",verseCount:73,chapters:[20,32,21]},{id:"amo",testament:"old",verseCount:146,chapters:[15,16,15,13,27,14,17,14,15]},{id:"oba",testament:"old",verseCount:21,chapters:[21]},{id:"jon",testament:"old",verseCount:48,chapters:[17,10,10,11]},{id:"mic",testament:"old",verseCount:105,chapters:[16,13,12,13,15,16,20]},{id:"nam",testament:"old",verseCount:47,chapters:[15,13,19]},{id:"hab",testament:"old",verseCount:56,chapters:[17,20,19]},{id:"zep",testament:"old",verseCount:53,chapters:[18,15,20]},{id:"hag",testament:"old",verseCount:38,chapters:[15,23]},{id:"zec",testament:"old",verseCount:211,chapters:[21,13,10,14,11,15,14,23,17,12,17,14,9,21]},{id:"mal",testament:"old",verseCount:55,chapters:[14,17,18,6]},{id:"mat",testament:"new",verseCount:1071,chapters:[25,23,17,25,48,34,29,34,38,42,30,50,58,36,39,28,27,35,30,34,46,46,39,51,46,75,66,20]},{id:"mrk",testament:"new",verseCount:678,chapters:[45,28,35,41,43,56,37,38,50,52,33,44,37,72,47,20]},{id:"luk",testament:"new",verseCount:1151,chapters:[80,52,38,44,39,49,50,56,62,42,54,59,35,35,32,31,37,43,48,47,38,71,56,53]},{id:"jhn",testament:"new",verseCount:879,chapters:[51,25,36,54,47,71,53,59,41,42,57,50,38,31,27,33,26,40,42,31,25]},{id:"act",testament:"new",verseCount:1007,chapters:[26,47,26,37,42,15,60,40,43,48,30,25,52,28,41,40,34,28,41,38,40,30,35,27,27,32,44,31]},{id:"rom",testament:"new",verseCount:433,chapters:[32,29,31,25,21,23,25,39,33,21,36,21,14,23,33,27]},{id:"1co",testament:"new",verseCount:437,chapters:[31,16,23,21,13,20,40,13,27,33,34,31,13,40,58,24]},{id:"2co",testament:"new",verseCount:257,chapters:[24,17,18,18,21,18,16,24,15,18,33,21,14]},{id:"gal",testament:"new",verseCount:149,chapters:[24,21,29,31,26,18]},{id:"eph",testament:"new",verseCount:155,chapters:[23,22,21,32,33,24]},{id:"php",testament:"new",verseCount:104,chapters:[30,30,21,23]},{id:"col",testament:"new",verseCount:95,chapters:[29,23,25,18]},{id:"1th",testament:"new",verseCount:89,chapters:[10,20,13,18,28]},{id:"2th",testament:"new",verseCount:47,chapters:[12,17,18]},{id:"1ti",testament:"new",verseCount:113,chapters:[20,15,16,16,25,21]},{id:"2ti",testament:"new",verseCount:83,chapters:[18,26,17,22]},{id:"tit",testament:"new",verseCount:46,chapters:[16,15,15]},{id:"phm",testament:"new",verseCount:25,chapters:[25]},{id:"heb",testament:"new",verseCount:303,chapters:[14,18,19,16,14,20,28,13,28,39,40,29,25]},{id:"jas",testament:"new",verseCount:108,chapters:[27,26,18,17,20]},{id:"1pe",testament:"new",verseCount:105,chapters:[25,25,22,19,14]},{id:"2pe",testament:"new",verseCount:61,chapters:[21,22,18]},{id:"1jn",testament:"new",verseCount:105,chapters:[10,29,24,21,21]},{id:"2jn",testament:"new",verseCount:13,chapters:[13]},{id:"3jn",testament:"new",verseCount:15,chapters:[15]},{id:"jud",testament:"new",verseCount:25,chapters:[25]},{id:"rev",testament:"new",verseCount:404,chapters:[20,29,22,11,14,17,17,13,21,11,19,17,18,20,8,21,18,24,21,15,27,21]}]},496:function(e,t){},5698:function(e,t,n){e.exports=n(6352)},5703:function(e,t,n){},6352:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(33),o=n.n(s),c=(n(5703),n(10)),i=n.n(c),l=n(17),u=n(19),p=n(20),m=n(22),d=n(21),h=n(23),f=n(8),g=n(488),b=n.n(g),v=n(5),y=n(54),x=n(121),E=n.n(x),I=n(69),k=n.n(I),j=n(489),w=n.n(j),O=n(269),C=n.n(O),N=n(270),T=n.n(N),S=n(490),M=C.a.createInstance({driver:[C.a.INDEXEDDB],name:"web-cache"}),P=Object(S.setup)({baseURL:"https://git.door43.org/",cache:{store:M,maxAge:864e5}}),L=function(e){var t=e.languageId;return{ult:t+"_ult",ust:t+"_ust",tn:t+"_tn",ta:t+"_ta",tw:t+"_tw",ugnt:"UGNT",uhb:"UHB",ugl:t+"_ugl",uhal:t+"_uhal",obs:t+"_obs","obs-tn":t+"_obs-tn","obs-tq":t+"_obs-tq","obs-sn":t+"_obs-sn","obs-sq":t+"_obs-sq"}};function W(e){return A.apply(this,arguments)}function A(){return(A=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r={},s=L({languageId:a}),o=Object.keys(s),c=o.map(function(e){var t=s[e];return R({username:n,repository:t})}),e.next=7,Promise.all(c);case 7:return l=e.sent,o.forEach(function(e,t){r[e]=l[t]}),e.abrupt("return",r);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function R(e){return B.apply(this,arguments)}function B(){return(B=Object(l.a)(i.a.mark(function e(t){var n,a,r,s;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.repository,e.next=3,K({username:n,repository:a,path:"manifest.yaml"});case 3:return r=e.sent,s=r?w.a.parseDocument(r).toJSON():null,e.abrupt("return",s);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function K(e){return _.apply(this,arguments)}function _(){return(_=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.repository,r=t.path,s=t.branch,o=void 0===s?"master":s,e.prev=1,c=k.a.join(n,a,"raw/branch",o,r),e.next=5,D({uri:c});case 5:return l=e.sent,e.abrupt("return",l);case 9:e.prev=9,e.t0=e.catch(1);case 11:case"end":return e.stop()}},e,this,[[1,9]])}))).apply(this,arguments)}function D(e){return J.apply(this,arguments)}function J(){return(J=Object(l.a)(i.a.mark(function e(t){var n,a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.uri,e.next=3,P.get(n);case 3:return a=e.sent,r=a.data,e.abrupt("return",r);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var z=function(e){var t=e.key,n=e.value;return T.a.set(t,n)},U=function(e){var t,n=e.key,a=e.defaultValue;try{t=T.a.get(n)}catch(r){t=a}return t},V=function(e){return JSON.parse(JSON.stringify(e))};function F(){return(F=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,u,p,m,d,h,f,g;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.context,a=n.username,r=n.languageId,s=n.reference.bookId,o=t.manifests,c={ult:null,ust:null,tn:null,original:null},u=o.uhb,p=o.ugnt,m=Q({bookId:s,uhbManifest:u,ugntManifest:p}),d="old"===m?u:p,f=(h=["ult","ust","tn","original"]).map(function(){var e=Object(l.a)(i.a.mark(function e(t){var n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(!["ult","ust"].includes(t)){e.next=3;break}return n=o[t],e.abrupt("return",q({username:a,languageId:r,resourceId:t,bookId:s,manifest:n}));case 3:if("tn"!==t){e.next=6;break}return n=o[t],e.abrupt("return",Z({username:a,languageId:r,bookId:s,manifest:n}));case 6:if("original"!==t){e.next=8;break}return e.abrupt("return",Y({username:a,languageId:r,bookId:s,uhbManifest:u,ugntManifest:p}));case 8:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()),e.next=9,Promise.all(f);case 9:return g=e.sent,h.forEach(function(e,t){var n=g[t],a="original"===e?d:o[e];c[e]={manifest:a,data:n}}),e.abrupt("return",c);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function q(e){return H.apply(this,arguments)}function H(){return(H=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.username,a=t.languageId,r=t.resourceId,s=t.bookId,o=t.manifest,c=o.projects,ae({projects:c,bookId:s})){e.next=4;break}throw Error("book not found in ".concat(r));case 4:return l=L({languageId:a})[r],e.next=7,te({username:n,repository:l,bookId:s,manifest:o});case 7:return u=e.sent,p=E.a.toJSON(u),e.abrupt("return",p.chapters);case 10:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Q=function(e){var t,n=e.bookId,a=e.uhbManifest,r=e.ugntManifest;return ae({projects:a.projects,bookId:n})&&(t="old"),ae({projects:r.projects,bookId:n})&&(t="new"),t};function Y(e){return G.apply(this,arguments)}function G(){return(G=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u,p,m,d;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.bookId,s=t.uhbManifest,o=t.ugntManifest,u=Q({bookId:r,uhbManifest:s,ugntManifest:o}),p=L({languageId:a}),"old"===u&&(c=s,l=p.uhb),"new"===u&&(c=o,l=p.ugnt),e.next=9,te({username:n,repository:l,bookId:r,manifest:c});case 9:return m=e.sent,d=E.a.toJSON(m),e.abrupt("return",d.chapters);case 12:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Z(e){return X.apply(this,arguments)}function X(){return(X=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.bookId,s=t.manifest,e.next=3,$({username:n,languageId:a,bookId:r,manifest:s});case 3:return o=e.sent,e.abrupt("return",o);case 5:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function $(e){return ee.apply(this,arguments)}function ee(){return(ee=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.bookId,s=t.manifest,o=L({languageId:a}).tn,e.next=4,te({username:n,repository:o,bookId:r,manifest:s});case 4:return c=e.sent,l=re({tsv:c}),e.abrupt("return",l);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function te(e){return ne.apply(this,arguments)}function ne(){return(ne=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.repository,r=t.bookId,s=t.manifest,o=s.projects,c=ae({projects:o,bookId:r}),l=(l=c.path).replace(/^\.\//,""),e.next=6,K({username:n,repository:a,path:l});case 6:return u=e.sent,e.abrupt("return",u);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var ae=function(e){var t,n=e.projects,a=e.bookId,r=n.filter(function(e){return e.identifier===a});return r.length>0&&(t=r[0]),t},re=function(e){return e.tsv.split("\n").map(function(e){return e.trim().split("\t")})},se=Object(f.withStyles)(function(e){return{paper:{color:"#fff",backgroundColor:"#31ADE3",textAlign:"center",boxShadow:"0px 1px 5px 0px rgba(0, 0, 0, 0.2),0px 2px 2px 0px rgba(0, 0, 0, 0.14),0px 3px 1px -2px rgba(0, 0, 0, 0.12)"},toolbar:{margin:"auto",display:"inline-flex",padding:"1em 0"},logo:{height:"1.8em",paddingTop:"0.25em"}}},{withTheme:!0})(function(e){var t=e.classes,n=(e.applicationName,e.manifests),a=e.context,s=a.resourceId,o=a.reference,c="",i="";if(n[s]&&o){var l=o.bookId;i=o.chapter;var u=n[s].projects,p=ae({projects:u,bookId:l});c=p?p.title:""}var m=c?r.a.createElement("span",null,"\xa0\xa0",c," ",i):r.a.createElement("span",null);return r.a.createElement(b.a,null,r.a.createElement("div",{className:t.paper},r.a.createElement("div",{className:t.toolbar},r.a.createElement("img",{className:t.logo,src:"./logo.png",alt:"unfoldingWord"}),r.a.createElement(v.Typography,{variant:"h6",color:"inherit",className:t.coin,noWrap:!0},m))))}),oe=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props;return r.a.createElement(se,e)}}]),t}(r.a.Component),ce=n(18),ie=Object(f.withStyles)(function(e){return{bookListItem:{},listItemIcon:{marginRight:0},listItemText:{paddingLeft:"0.7em"}}})(function(e){var t=e.classes,n=e.manifest,a=e.manifest.dublin_core,s=(a.subject,a.title),o=a.language,c=e.context,i=e.context,l=(i.username,i.languageId,i.resourceId,i.reference),u=i.reference,p=u.bookId,m=u.chapter,d=u.verse,h=e.setContext,f="";if(n&&l&&p){var g=n.projects;f=ae({projects:g,bookId:p}).title}return r.a.createElement(v.ListItem,{button:!0,className:t.bookListItem,style:{paddingLeft:"2em",paddingRight:"0.7em"},onClick:function(){h(c)}},r.a.createElement(v.ListItemIcon,{className:t.listItemIcon},r.a.createElement(ce.d,null)),r.a.createElement(v.ListItemText,{className:t.listItemText,primary:"".concat(f," ").concat(m).concat(d?":".concat(d):""),secondary:"".concat(o.title," - ").concat(s)}))}),le=Object(f.withStyles)(function(e){return{root:{height:"100%",maxWidth:"40em",marginLeft:"auto",marginRight:"auto"},list:{height:"100%",overflowY:"auto"}}})(function(e){var t=e.classes,n=e.setContext,a=e.manifests,s=e.contexts,o=[];return s&&(o=s.filter(function(e){return!!a[e.resourceId]}).map(function(e,t){return r.a.createElement(ie,{key:t+JSON.stringify(e),context:e,setContext:n,manifest:a[e.resourceId]})})),r.a.createElement(v.Paper,{className:t.root},r.a.createElement(v.List,{className:t.root,component:"nav",dense:!0},r.a.createElement("div",{className:t.list},o)))}),ue=n(103),pe=n(499),me=n(500),de=function(e){var t=e.inputRef,n=Object(me.a)(e,["inputRef"]);return r.a.createElement("div",Object.assign({ref:t},n))},he={Control:function(e){return r.a.createElement(v.TextField,Object.assign({fullWidth:!0,InputProps:{inputComponent:de,inputProps:Object(ue.a)({className:e.selectProps.classes.input,inputRef:e.innerRef,children:e.children},e.innerProps)}},e.selectProps.textFieldProps))},Menu:function(e){return r.a.createElement(v.Paper,Object.assign({square:!0,className:e.selectProps.classes.paper},e.innerProps),e.children)},NoOptionsMessage:function(e){return r.a.createElement(v.Typography,Object.assign({color:"textSecondary",className:e.selectProps.classes.noOptionsMessage},e.innerProps),e.children)},Option:function(e){return r.a.createElement(v.MenuItem,Object.assign({buttonRef:e.innerRef,selected:e.isFocused,component:"div",style:{fontWeight:e.isSelected?500:400}},e.innerProps),e.children)},Placeholder:function(e){return r.a.createElement(v.Typography,Object.assign({color:"textSecondary",className:e.selectProps.classes.placeholder},e.innerProps),e.children)},SingleValue:function(e){return r.a.createElement(v.Typography,Object.assign({className:e.selectProps.classes.singleValue},e.innerProps),e.children)},ValueContainer:function(e){return r.a.createElement("div",{className:e.selectProps.classes.valueContainer},e.children)}},fe=n(59),ge=function(e){return{root:{flexGrow:1},input:{display:"flex",padding:0},valueContainer:{display:"flex",flexWrap:"wrap",flex:1,alignItems:"center",overflow:"hidden"},chip:{margin:"".concat(e.spacing.unit/2,"px ").concat(e.spacing.unit/4,"px")},chipFocused:{backgroundColor:Object(fe.emphasize)("light"===e.palette.type?e.palette.grey[300]:e.palette.grey[700],.08)},noOptionsMessage:{padding:"".concat(e.spacing.unit,"px ").concat(2*e.spacing.unit,"px")},singleValue:{fontSize:16},placeholder:{position:"absolute",left:2,fontSize:16},paper:{position:"absolute",zIndex:1,marginTop:e.spacing.unit,left:0,right:0},divider:{height:2*e.spacing.unit}}},be=[{value:"en",label:"en - English"},{value:"fr",label:"fr - French"}],ve=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e){return function(e){var t=JSON.parse(JSON.stringify(n.props.context));t.languageId=e.value,n.props.setContext(t)}},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.theme,a=e.context,s={input:function(e){return Object(ue.a)({},e,{color:n.palette.text.primary,"& input":{font:"inherit"}})}};return r.a.createElement("div",{className:t.root},r.a.createElement(v.NoSsr,null,r.a.createElement(pe.a,{classes:t,styles:s,options:be,components:he,value:be.filter(function(e){return e.value===a.languageId})[0],onChange:this.handleChange("language"),placeholder:"Select Language"}),r.a.createElement("div",{className:t.divider})))}}]),t}(r.a.Component),ye=Object(f.withStyles)(ge,{withTheme:!0})(ve),xe=Object(f.withStyles)({card:{minWidth:275,marginBottom:"1em"},title:{fontSize:14},pos:{marginBottom:12},actions:{width:"100%",textAlign:"right"},button:{marginLeft:"auto"}})(function(e){var t=e.classes,n=(e.manifest,e.manifest.dublin_core),a=n.identifier,s=n.subject,o=n.title,c=n.description,i=(n.publisher,n.language,n.rights),l=(n.contributors,e.context),u=l.username,p=l.languageId,m=e.setContext;return r.a.createElement(v.Card,{className:t.card},r.a.createElement(v.CardContent,null,r.a.createElement(v.Typography,{className:t.title,color:"textSecondary",gutterBottom:!0},s),r.a.createElement(v.Typography,{variant:"h5",component:"h2"},o),r.a.createElement(v.Typography,{className:t.pos,color:"textSecondary"},i),r.a.createElement(v.Typography,{component:"p"},c)),r.a.createElement(v.CardActions,{className:t.actions},r.a.createElement(v.Button,{size:"small",variant:"contained",className:t.button,color:"primary",onClick:function(){m({username:u,languageId:p,resourceId:a,reference:"obs"===a?{bookId:a}:{}})}},"Open")))}),Ee=function(e){return{root:{},paper:{padding:2*e.spacing.unit},column:{maxWidth:"40em",marginLeft:"auto",marginRight:"auto"},verse:{margin:0},tabVerse:{margin:"".concat(2*e.spacing.unit,"px ").concat(0*e.spacing.unit,"px ").concat(0*e.spacing.unit,"px")},fullWidth:{width:"100%"},expansionPanelDetails:{padding:0},expansionPanelActions:{padding:0}}},Ie=Object(f.withStyles)(Ee)(function(e){var t=e.classes,n=e.context,a=e.setContext,s=e.manifests,o=Object.keys(s).filter(function(e){return["ult","obs"].includes(e)&&s[e]});return r.a.createElement("div",{className:t.column},r.a.createElement(ye,{context:n,setContext:a}),o.map(function(e){return r.a.createElement(xe,{key:e,context:n,setContext:a,manifest:s[e]})}))}),ke=n(171),je=n(494),we=function(e){var t=e.bookId;try{return t&&"obs"!==t?Oe({bookId:t}).chapters:Object(ke.a)(Array(50).keys())}catch(n){}},Oe=function(e){var t=e.bookId;return je.filter(function(e){return e.id===t})[0]},Ce=Object(f.withStyles)(function(e){return{bookListItem:{},listItemIcon:{marginRight:0},listItemText:{paddingLeft:"0.7em"}}},{withTheme:!0})(function(e){var t=e.classes,n=e.bookMetadata,a=e.context,s=e.setContext,o=e.context.reference,c=n.identifier,i=we({bookId:c}).length;return r.a.createElement(v.ListItem,{button:!0,selected:o.bookId===n.identifier,className:t.bookListItem,style:{paddingLeft:"2.2em",paddingRight:"0.7em"},onClick:function(){a.reference={bookId:c},s(a)}},r.a.createElement(v.ListItemIcon,{className:t.listItemIcon},o.bookId===n.identifier?r.a.createElement(ce.a,null):r.a.createElement(ce.b,null)),r.a.createElement(v.ListItemText,{className:t.listItemText,primary:n.title,secondary:i+" Chapters"}))}),Ne=Object(f.withStyles)(function(e){return{list:{paddingTop:0,paddingBottom:0},listItemIcon:{marginRight:0},listItemText:{paddingLeft:"0.7em"}}},{withTheme:!0})(function(e){var t=e.classes,n=e.testamentId,a=e.books,s=e.context,o=e.setContext,c=e.open,i=e.toggle,l=a?a.map(function(e){return r.a.createElement(Ce,{key:e.identifier,bookMetadata:e,context:s,setContext:o})}):[];return r.a.createElement("div",null,r.a.createElement(v.ListItem,{button:!0,selected:c,className:t.fileList,style:{paddingLeft:"1em",paddingRight:"0.5em"},onClick:i},r.a.createElement(v.ListItemIcon,{className:t.listItemIcon},c?r.a.createElement(ce.e,null):r.a.createElement(ce.f,null)),r.a.createElement(v.ListItemText,{inset:!0,className:t.listItemText,primary:n,secondary:a.length+" Books"})),r.a.createElement(v.Collapse,{in:c,timeout:"auto",unmountOnExit:!0},r.a.createElement(v.List,{dense:!0,className:t.list},l)))}),Te=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"toggle",value:function(){this.setState({open:!this.state.open})}},{key:"render",value:function(){var e=this.props,t=this.state.open;return r.a.createElement(Ne,Object.assign({},e,{open:t,toggle:this.toggle.bind(this)}))}}]),t}(r.a.Component),Se=Object(f.withStyles)(function(e){return{bible:{height:"100%",maxWidth:"40em",marginLeft:"auto",marginRight:"auto"},bibleList:{height:"100%",overflowY:"auto"}}})(function(e){var t=e.classes,n=e.manifests,a=e.context,s=e.setContext,o={},c=n.ult;return c&&c.projects.forEach(function(e){var t=e.categories.includes("bible-ot")?"Old Testament":"New Testament";o[t]||(o[t]=[]),o[t].push(e)}),r.a.createElement(v.Paper,{className:t.bible},r.a.createElement(v.List,{className:t.bible,component:"nav",dense:!0},r.a.createElement("div",{className:t.bibleList},Object.keys(o).map(function(e){return r.a.createElement(Te,{key:e,testamentId:e,books:o[e],context:a,setContext:s})}))))}),Me=Object(f.withStyles)(function(e){return{bookListItem:{},listItemIcon:{marginRight:0},listItemText:{paddingLeft:"0.7em"}}})(function(e){var t=e.classes,n=e.chapter,a=e.verses,s=e.context,o=e.setContext,c=e.context.reference;return r.a.createElement(v.ListItem,{button:!0,selected:c.chapter===n,className:t.bookListItem,style:{paddingLeft:"2em",paddingRight:"0.7em"},onClick:function(){s.reference={bookId:c.bookId,chapter:n},o(s)}},r.a.createElement(v.ListItemIcon,{className:t.listItemIcon},c.chapter===n?r.a.createElement(ce.c,null):r.a.createElement(ce.d,null)),r.a.createElement(v.ListItemText,{className:t.listItemText,primary:"Chapter "+n,secondary:a+" Verses"}))}),Pe=Object(f.withStyles)(function(e){return{root:{height:"100%",maxWidth:"40em",marginLeft:"auto",marginRight:"auto"},list:{height:"100%",overflowY:"auto"}}})(function(e){var t=e.classes,n=(e.bookData,e.context),a=e.setContext,s=e.context,o=(s.reference,s.reference.bookId),c=we({bookId:o}).map(function(e,t){return r.a.createElement(Me,{key:t,chapter:t+1,verses:e,context:n,setContext:a})});return r.a.createElement(v.Paper,{className:t.root},r.a.createElement(v.List,{className:t.root,component:"nav",dense:!0},r.a.createElement("div",{className:t.list},c)))}),Le=n(495),We=n.n(Le),Ae=Object(f.withStyles)(Ee)(function(e){var t=e.classes,n=e.summary,a=e.details,s=e.id,o=e.open,c=e.handleToggle,i=e.handleClose;return r.a.createElement(v.ExpansionPanel,{expanded:o,className:t.column,onChange:c},r.a.createElement(v.ExpansionPanelSummary,{expandIcon:r.a.createElement(ce.h,null)},r.a.createElement("span",{id:s,style:{position:"absolute",top:"-5em"}}),n),r.a.createElement(v.ExpansionPanelDetails,{className:t.expansionPanelDetails},o?r.a.createElement("div",{className:t.fullWidth},a):""),r.a.createElement(v.ExpansionPanelActions,{className:t.expansionPanelActions},r.a.createElement(v.IconButton,{className:t.button,"aria-label":"Close",onClick:i},r.a.createElement(ce.g,null))))}),Re=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={id:Math.random(),open:!1},n.handleClose=function(){n.setState({open:!1}),n.scrollToId(n.state.id)},n.handleToggle=function(){n.setState({open:!n.state.open}),n.scrollToId(n.state.id)},n.scrollToId=function(e){var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=this.state,n=t.open,a=t.id;return r.a.createElement(Ae,Object.assign({},e,{id:a,open:n,handleClose:this.handleClose.bind(this),handleToggle:this.handleToggle.bind(this)}))}}]),t}(r.a.Component),Be=n(101),Ke=n.n(Be),_e=n(102),De=n.n(_e),Je=function(e){var t=e.languageId;return L({languageId:t}).ta};function ze(e){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.path,s=Je({languageId:a}),o=r.split("/").splice(1).join("/")+"/title.md",e.next=5,K({username:n,repository:s,path:o});case 5:return c=e.sent,e.abrupt("return",c);case 7:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ve(e){return Fe.apply(this,arguments)}function Fe(){return(Fe=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.path,o=Je({languageId:a}),c=r.split("/").filter(function(e){return"man"!==e}).join("/")+"/01.md",e.prev=3,e.next=6,K({username:n,repository:o,path:c});case 6:l=e.sent,u=c.split("/").splice(0,1).join("/"),s=l.split("../").join("http://".concat(a,"/ta/").concat(u,"/")).split("/01.md").join("").split("rc://").join("http://"),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(3);case 14:return e.abrupt("return",s);case 15:case"end":return e.stop()}},e,this,[[3,11]])}))).apply(this,arguments)}var qe=function(e){var t=e.languageId;return L({languageId:t}).tw};function He(e){return Qe.apply(this,arguments)}function Qe(){return(Qe=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.path,o=qe({languageId:a}),c=r.split("/").splice(1).join("/")+".md",e.next=5,K({username:n,repository:o,path:c});case 5:return(l=e.sent)&&(s=l.split(/\n/)[0].replace(/#/g,"").trim()),e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ye(e){return Ge.apply(this,arguments)}function Ge(){return(Ge=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.path,o=qe({languageId:a}),c=r.split("/").filter(function(e){return"dict"!==e}).join("/")+".md",e.next=5,K({username:n,repository:o,path:c});case 5:return(l=e.sent)&&(u=c.split("/").splice(0,1).join("/"),s=l.split("../").join("http://".concat(a,"/tw/").concat(u,"/")).split(".md").join("").split("rc://").join("http://")),e.abrupt("return",s);case 8:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ze(){return(Ze=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.username,a=t.languageId,r=t.resourceId,s=t.path,e.t0=r,e.next="ta"===e.t0?4:"tw"===e.t0?8:"tn"===e.t0?12:13;break;case 4:return e.next=6,ze({username:n,languageId:a,path:s});case 6:return o=e.sent,e.abrupt("break",15);case 8:return e.next=10,He({username:n,languageId:a,path:s});case 10:return o=e.sent,e.abrupt("break",15);case 12:return e.abrupt("break",15);case 13:return console.log("resourceId not configured: ".concat(a," - ").concat(r," - ").concat(s)),e.abrupt("break",15);case 15:return e.abrupt("return",o);case 17:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Xe(){return(Xe=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:n=t.username,a=t.languageId,r=t.resourceId,s=t.path,e.t0=r,e.next="ta"===e.t0?4:"tw"===e.t0?8:"tn"===e.t0?12:13;break;case 4:return e.next=6,Ve({username:n,languageId:a,path:s});case 6:return o=e.sent,e.abrupt("break",15);case 8:return e.next=10,Ye({username:n,languageId:a,path:s});case 10:return o=e.sent,e.abrupt("break",15);case 12:return e.abrupt("break",15);case 13:return console.log("resourceId not configured: ".concat(a," - ").concat(r," - ").concat(s)),e.abrupt("break",15);case 15:return e.abrupt("return",o);case 17:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var $e=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={context:n.props.context,path:null,title:null,article:null,open:null},n.handleOpen=function(){var e=n.state,t=e.context,a=t.username,r=t.languageId,s=t.resourceId,o=t.reference,c=e.path,i=e.title;if(o){var l=n.props.context,u=V(l);["ult","obs"].includes(s)&&(u.resourceId=s),u.reference=o,n.props.setContext(u)}else(function(e){return Xe.apply(this,arguments)})({username:a,languageId:r,resourceId:s,path:c}).then(function(e){var t={title:i||c,text:e};n.props.addTab(t)})},n.handleClose=function(){n.setState({open:!1})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"parseHref",value:function(e){var t,n,a,r,s=e.href,o=this.props.context.username;var c=/http:\/\/([\w-_]+)\/([\w-_]+)\/(.+)/;if(c.test(s)){var i=c.exec(s),l=Object(y.a)(i,4);l[0],t=l[1],n=l[2],a=l[3]}else a=s;if("tn"===n){var u=/\/([\w]+)\/([\d]+)\/([\d]+)/;if(u.test(a)){var p=u.exec(a),m=Object(y.a)(p,4),d=(m[0],m[1]),h=m[2],f=m[3];"obs"===d?(n="obs",r={chapter:parseInt(h),verse:parseInt(f)}):(n="ult",r={bookId:d,chapter:parseInt(h),verse:parseInt(f)})}}return{context:{username:o,languageId:t,resourceId:n,reference:r},path:a}}},{key:"componentWillMount",value:function(){var e=this.props,t=e.href,n=e.children,a=this.parseHref({href:t}),r=n[0];r!==t&&(a.title=r),this.setState(a)}},{key:"componentDidMount",value:function(){var e=this,t=this.state,n=t.context,a=n.username,r=n.languageId,s=n.resourceId,o=t.title,c=t.path;!o&&r&&s&&c&&function(e){return Ze.apply(this,arguments)}({username:a,languageId:r,resourceId:s,path:c}).then(function(t){e.setState({title:t})})}},{key:"render",value:function(){var e=this.state,t=e.title,n=e.path,a=this.props.classes;return r.a.createElement(v.Chip,{label:r.a.createElement(v.Typography,{noWrap:!0,component:"span"},t||n),component:"span",className:a.chip,classes:{label:a.label},onClick:this.handleOpen,variant:"outlined",icon:r.a.createElement(ce.n,null),color:"primary",clickable:!0})}}]),t}(r.a.Component),et=Object(f.withStyles)(function(e){return{chip:{height:"unset",maxWidth:"95%"},label:{maxWidth:"81%"}}},{withTheme:!0})($e),tt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={component:null},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.text,n=e.addTab,a=e.context,s=e.setContext,o={remarkReactComponents:{a:function(e){return r.a.createElement(et,Object.assign({},e,{context:a,setContext:s,addTab:n}))},div:function(e){return r.a.createElement("div",Object.assign({},e,{style:{width:"100%"}}))}}},c=Ke()().use(De.a,o).processSync(t).contents;this.setState({component:c})}},{key:"render",value:function(){return this.state.component}}]),t}(r.a.Component),nt=Object(f.withStyles)(function(e){return{root:{width:"100%"},note:{marginTop:"0.5em",marginBottom:"0.5em"}}})(function(e){var t=e.classes,n=e.context,a=e.setContext,s=e.note,o=e.addTab,c=s.occurrence_note.replace(/\[\[rc:\/\//g,"http://").replace(/\]\]?/g,""),i=r.a.createElement(tt,{context:n,setContext:a,text:c,addTab:o});return r.a.createElement("div",{className:t.root},r.a.createElement(v.Divider,null),r.a.createElement("div",{className:t.note},r.a.createElement("strong",null,s.gl_quote)," ",i))}),at=Object(f.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){e.classes;var t=e.verseObject,n=e.senses;return r.a.createElement("div",null,r.a.createElement(v.Typography,null,r.a.createElement("span",null,r.a.createElement("strong",null,t.text||t.content)," -"),r.a.createElement("span",null," ",r.a.createElement("em",null,"lemma:")," ",t.lemma),r.a.createElement("span",null," ",r.a.createElement("em",null,"strong:")," ",t.strong),r.a.createElement("br",null),r.a.createElement("span",null," ",r.a.createElement("em",null,"morph:")," ",t.morph)),n.map(function(e,t){return r.a.createElement(v.Typography,{key:t},r.a.createElement("sup",null,t+1),e.gloss?r.a.createElement("span",null," ",r.a.createElement("em",null,"Gloss:")," ",e.gloss):"",e.definition?r.a.createElement("span",null," ",r.a.createElement("em",null,"Definition:")," ",e.definition):"")}))}),rt="unfoldingword",st=L({languageId:"en"}),ot=function(e){var t=e.lexiconMarkdown,n=[];if(t){var a=[];t.split(/##\s*Senses/)[1].split(/###\s*Sense/).splice(1).forEach(function(e){var t=/####\s*Definitions?.*?[\n\s]+(.*?)\n/,n=/####\s*Glosse?s?.*?[\n\s]+(.*?)\n/,r=t.test(e)?t.exec(e)[1]:null;r=/#/.test(r)?null:r;var s=n.test(e)?n.exec(e)[1]:null,o={definition:r,gloss:s=/#/.test(s)?null:s};a.push(o)}),n=it({array:a})}return n};function ct(){return(ct=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.strong,/H\d+/.test(n)&&(r=st.uhal,o=n.match(/H\d+/)[0],s=k.a.join("content",o+".md")),/G\d+/.test(n)&&(r=st.ugl,s=k.a.join("content",n,"01.md")),!r||!s){e.next=8;break}return e.next=6,K({username:rt,repository:r,path:s});case 6:c=e.sent,a=ot({lexiconMarkdown:c});case 8:if(a){e.next=10;break}throw Error("Could not find sense info for: ".concat(n));case 10:return e.abrupt("return",a);case 11:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var it=function(e){var t=e.array,n=(e.response,t);return t.forEach(function(e){(n=n.filter(function(t){return!(e.gloss===t.gloss&&e.definition===t.definition)})).push(e)}),n},lt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={senses:[]},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this;(function(e){return ct.apply(this,arguments)})({strong:this.props.verseObject.strong}).then(function(t){e.unmounted||e.setState({senses:t})}).catch(function(e){console.log(e)})}},{key:"componentWillUnmount",value:function(){this.unmounted=!0}},{key:"render",value:function(){return r.a.createElement(at,{verseObject:this.props.verseObject,senses:this.state.senses})}}]),t}(r.a.Component),ut=Object(f.withStyles)(function(e){return{}},{withTheme:!0})(lt),pt=function(e){return{root:{backgroundColor:e.palette.background.paper,width:"100%"},width:{width:"100%"},appBar:{width:"95%",zIndex:"10",margin:"auto"},hidden:{},padding:{padding:"0 ".concat(2*e.spacing.unit,"px")},tabContent:{padding:"0 ".concat(3*e.spacing.unit,"px")}}},mt=Object(f.withStyles)(pt,{withTheme:!0})(function(e){var t=e.tab,n=e.addTab,a=e.open,s=e.context,o=e.setContext,c=r.a.createElement("div",null);a&&(t.text?c=r.a.createElement(tt,{text:t.text,addTab:n,context:s,setContext:o}):t.notes?c=t.notes.map(function(e,t){return r.a.createElement(nt,{key:t,note:e,addTab:n,context:s,setContext:o})}):t.original?c=t.original.map(function(e,t){var a=e.link.replace("rc://*/","http://".concat(s.languageId,"/")),c=e.originalWords.map(function(e,t){return r.a.createElement(ut,{key:t,verseObject:e})}),i="".concat(a);return r.a.createElement("div",{key:t},r.a.createElement(v.Divider,null),r.a.createElement(tt,{text:i,addTab:n,context:s,setContext:o}),c)}):t.words?c=t.words.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(v.Divider,null),r.a.createElement(tt,{text:e,addTab:n,context:s,setContext:o}))}):t.content&&(c=t.content));return c}),dt=Object(f.withStyles)(pt,{withTheme:!0})(function(e){var t=e.classes,n=e.context,a=e.setContext,s=e.tabs,o=e.addTab,c=e.tabIndex,i=e.handleChangeIndex,l=e.id,u=[],p=[],m=0;s.forEach(function(e,s){if(e.text)m=0;else if(e.notes)m=e.notes.length;else if(e.original){var i=e.original;m=i.length}else e.words?m=e.words.length:e.content&&(m=e.content.length);var l=r.a.createElement(v.Badge,{className:t.padding,color:"primary",badgeContent:m},e.title);u.push(r.a.createElement(v.Tab,{key:u.length,label:m>0?l:e.title}));var d=s===c;p.push(r.a.createElement("div",{key:p.length,className:d?t.tabContent:t.hidden},r.a.createElement(mt,{tab:e,addTab:o,open:d,context:n,setContext:a})))});var d=p[c];return r.a.createElement("div",{id:l,className:t.root},r.a.createElement(v.AppBar,{className:t.appBar,position:"sticky",color:"default"},r.a.createElement(v.Tabs,{className:t.width,value:c,onChange:i,indicatorColor:"primary",textColor:"primary",variant:"scrollable",scrollButtons:"auto"},u)),r.a.createElement("div",{className:t.width},d))}),ht=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={id:Math.random(),tabIndex:0,tabs:n.props.tabs},n.handleChangeIndex=function(e,t){var a=void 0!==t?t:e;n.setState({tabIndex:a}),n.scrollToId(n.state.id)},n.addTab=function(e){var t=n.state.tabs;t.push(e),n.setState({tabs:t,tabIndex:t.length-1}),n.scrollToId(n.state.id)},n.scrollToId=function(e){var t=document.getElementById(e);t&&t.scrollIntoView({behavior:"smooth",block:"start"})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=this.state,n=t.tabs,a=t.tabIndex,s=t.id;return r.a.createElement(dt,Object.assign({},e,{id:s,tabs:n,tabIndex:a,addTab:this.addTab.bind(this),handleChangeIndex:this.handleChangeIndex.bind(this)}))}}]),t}(r.a.Component),ft=Object(f.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){e.classes;var t=e.verseObject;return r.a.createElement("span",null," ",t.text||t.content)}),gt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={anchorEl:null},n.handlePopoverOpen=function(e){n.setState({anchorEl:e.currentTarget})},n.handlePopoverClose=function(){n.setState({anchorEl:null})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e=this.props,t=e.classes,n=e.children,a=e.originalWords,s=this.state.anchorEl,o=Boolean(s);return r.a.createElement("span",null,r.a.createElement("span",{"aria-owns":o?"mouse-over-popover":void 0,"aria-haspopup":"true",onMouseEnter:this.handlePopoverOpen,onMouseLeave:this.handlePopoverClose,className:o?t.open:t.closed},n.map(function(e,t){return r.a.createElement(ft,{key:t,verseObject:e})})),r.a.createElement(v.Popover,{id:"mouse-over-popover",className:t.popover,classes:{paper:t.paper},open:o,anchorEl:s,anchorOrigin:{vertical:"bottom",horizontal:"left"},transformOrigin:{vertical:"top",horizontal:"left"},onClose:this.handlePopoverClose,disableRestoreFocus:!0},a.map(function(e,t){return r.a.createElement(ut,{key:t,verseObject:e})})))}}]),t}(r.a.Component),bt=Object(f.withStyles)(function(e){return{open:{backgroundColor:"lightgoldenrodyellow"},closed:{},popover:{pointerEvents:"none"},paper:{padding:e.spacing.unit}}},{withTheme:!0})(gt),vt=function(e){e.classes;var t,n=e.originalWords,a=e.verseObject,s=a.tag,o=a.children,c=(a.tw,a.strong),i=a.lemma,l=a.morph,u=a.occurrence,p=a.occurrences,m=a.content;switch(s){case"k":t=o.map(function(e,t){return r.a.createElement(xt,{key:t,verseObject:e})});break;case"zaln":var d={strong:c,lemma:i,morph:l,occurrence:u,occurrences:p,content:m},h=JSON.parse(JSON.stringify(n));h.push(d),t=1===o.length&&"milestone"===o[0].type?r.a.createElement(xt,{verseObject:o[0],originalWords:h}):r.a.createElement(bt,{originalWords:h,children:o});break;default:t=r.a.createElement("div",null)}return t},yt=Object(f.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){e.classes;var t=e.verseObject;return r.a.createElement("span",null,t.text)}),xt=function(e){e.classes;var t,n=e.verseObject,a=e.originalWords,s=void 0===a?[]:a;switch(n.type){case"text":case"quote":t=r.a.createElement(yt,{verseObject:n});break;case"milestone":t=r.a.createElement(vt,{verseObject:n,originalWords:s});break;case"word":t=n.strong?r.a.createElement(bt,{children:[n],originalWords:[n]}):r.a.createElement(ft,{verseObject:n});break;case"section":case"paragraph":t=r.a.createElement("span",null);break;case"footnote":t=r.a.createElement("sup",null,"*");break;default:t=r.a.createElement("span",null,"...")}return r.a.createElement("span",{"data-verse-object":JSON.stringify(n)},t,n.nextChar)},Et=function(e){var t=e.manifest.dublin_core,n=t.identifier,a=t.title;return r.a.createElement("div",{style:{width:"100%",textAlign:"right",marginBottom:"0.5em"}},r.a.createElement(v.Chip,{label:r.a.createElement(v.Typography,{variant:"caption"},r.a.createElement("strong",null,n.toUpperCase())," (",a,")"),icon:r.a.createElement(ce.m,{fontSize:"small"}),style:{height:"25px"}}))},It=Object(f.withStyles)(Ee,{withTheme:!0})(function(e){var t=e.classes,n=e.verseKey,a=e.context.reference.chapter,s=e.resource,o=s.manifest,c=s.manifest.dublin_core.language.direction,i=s.data,l=e.noTitle,u=r.a.createElement("span",null);i[a][n].verseObjects&&(u=i[a][n].verseObjects.map(function(e,t){return r.a.createElement(xt,{key:t,verseObject:e})}));var p=r.a.createElement("span",null);return l||(p=r.a.createElement(Et,{manifest:o})),r.a.createElement("div",{className:t.verse},r.a.createElement("div",{style:{direction:c}},r.a.createElement("sup",null,n," "),u),p)}),kt=Object(f.withStyles)(Ee,{withTheme:!0})(function(e){var t=e.classes,n=(e.languageId,e.verseKey),a=e.resources,s=a.ult,o=a.ust,c=a.original,i=a.tn,l=e.context,u=e.setContext,p=e.context.reference,m=p.bookId,d=p.chapter,h=[],f={title:"Reference",content:r.a.createElement("div",{style:{paddingTop:"1em"}},r.a.createElement(It,{verseKey:n,resource:o,context:l}),r.a.createElement(v.Divider,{variant:"middle"}),r.a.createElement(It,{verseKey:n,resource:c,context:l}))};if(h.push(f),c.data[d][n]){var g=function(e){var t=e.verseObjects;return t?t.filter(function(e){return e.tw}).map(function(e){var t=[];return"word"===e.type&&t.push(e),e.children&&(t=t.concat(e.children)),{link:e.tw,originalWords:t}}):[]}({verseObjects:c.data[d][n].verseObjects});if(g.length>0){var b={title:"Words",original:g};h.push(b)}}if(i.data[d][n]){var y={title:"Notes",notes:i.data[d][n]};h.push(y)}var x=r.a.createElement("div",null,r.a.createElement("div",{style:{paddingRight:"24px"}},r.a.createElement(Et,{manifest:s.manifest})),h.length>0?r.a.createElement(ht,{context:l,setContext:u,tabs:h}):null),E="".concat(m,"_").concat(d,"_").concat(n);return r.a.createElement(Re,{summary:r.a.createElement("div",null,r.a.createElement("span",{id:E,style:{position:"absolute",top:"-5em"}}),r.a.createElement("div",{className:t.verse},r.a.createElement(It,{verseKey:n,resource:s,context:l,noTitle:!0}))),details:x})}),jt=Object(f.withStyles)(Ee)(function(e){e.classes;var t=e.context,n=e.context,a=n.reference,s=n.reference.chapter,o=e.setContext,c=e.lemmaIndex,i=e.resources,l=e.resources,u=l.ult,p=l.tn,m=Object.keys(u.data[s]).filter(function(e){return/\d+/g.test(e)}).map(function(e){return r.a.createElement(kt,{key:"".concat(a.chapter,"-").concat(e),context:t,setContext:o,lemmaIndex:c,verseKey:e,resources:i})}),d=[{title:"Chapter Notes",text:p.data[s].intro&&p.data[s].intro[0]?p.data[s].intro[0].occurrence_note.replace(/\[\[rc:\/\//g,"http://").replace(/\]\]?/g,""):""}];return[r.a.createElement(Re,{key:"chapter"+a.chapter,summary:r.a.createElement("h2",null,"Chapter ",a.chapter),details:r.a.createElement(ht,{context:t,setContext:o,tabs:d})})].concat(m)}),wt=n(170),Ot=n.n(wt),Ct=function(e){var t=e.lemmaIndex,n=[];Object.keys(t).forEach(function(e){var a=t[e].map(function(t){var n=t.strong,a=t.alignment,r=t.reference,s=r.chapter,o=r.verse,c=function e(t){var n=t.verseObject,a=t.originalTexts,r=void 0===a?[]:a,s=t.targetTexts,o=void 0===s?[]:s,c=n.content,i=n.text,l=n.children;return c&&r.push(c),i&&o.push(i),l&&l.forEach(function(t){var n=e({verseObject:t,originalTexts:r,targetTexts:o}),a=n._originalTexts,s=n._targetTexts;r.concat(a),o.concat(s)}),{originalTexts:r,targetTexts:o}}({verseObject:a}),i=c.originalTexts,l=c.targetTexts,u=i.join(" "),p=l.join(" "),m="".concat(s,":").concat(o);return["".concat(n,": ").concat(e),u,p,m]});n=n.concat(a)});return r.a.createElement(f.MuiThemeProvider,{theme:Object(f.createMuiTheme)({overrides:{MuiPaper:{elevation4:{boxShadow:"none"},rounded:{borderRadius:"unset"},root:{backgroundColor:"unset"}},MuiTableCell:{root:{padding:"0 8px 0 8px"}},MuiTableRow:{root:{height:"unset"}}}})},r.a.createElement(Ot.a,{title:"Search UGNT and ULT for this book",data:n,columns:[{name:"Strong's: Lemma",options:{filter:!1,sort:!0}},{name:"UGNT",options:{filter:!1,sort:!0}},{name:"ULT",options:{filter:!1,sort:!0}},{name:"C:V",options:{filter:!1,sort:!0}}],options:{filterType:"checkbox",selectableRows:!1,responsive:"scroll",download:!1,print:!1,filter:!1,viewColumns:!1}}))},Nt=function(){return Object(f.createMuiTheme)({overrides:{MuiPaper:{elevation4:{boxShadow:"none"},rounded:{borderRadius:"unset"},root:{backgroundColor:"#FFF"}},MuiTableCell:{root:{padding:"0 8px 0 8px"}},MUIDataTableHeadCell:{fixedHeader:{zIndex:"unset"}},MUIDataTable:{responsiveScroll:{maxHeight:"unset"}},MuiTableRow:{root:{height:"unset"}}}})},Tt=function(e){var t=e.tn,n=[{name:"C:V",options:{filter:!1,sort:!0}},{name:"ID",options:{filter:!1,sort:!0,display:"false"}},{name:"Type",options:{filter:!0,sort:!0}},{name:"Original",options:{filter:!1,sort:!0}},{name:"Occurrence",options:{filter:!1,sort:!0,display:"false"}},{name:"Gateway",options:{filter:!1,sort:!0}},{name:"Note",options:{filter:!1,sort:!0,display:"false",customBodyRender:function(e,t,n){var a=e.length<=97?e:e.substring(0,100)+"...";return r.a.createElement("div",null,a)}}}];t.shift(),t.pop();var a=t.map(function(e){var t=Object(y.a)(e,9),n=(t[0],t[1]),a=t[2],r=t[3],s=t[4],o=t[5],c=t[6],i=t[7],l=t[8],u=s||"general";return["".concat(n,":").concat(a),r,u,o,c,i,l]});return r.a.createElement(f.MuiThemeProvider,{theme:Nt()},r.a.createElement(Ot.a,{title:"Search translationNotes",data:a,columns:n,options:{filterType:"checkbox",selectableRows:!1,responsive:"scroll",download:!1,print:!1,filter:!0,viewColumns:!0}}))},St=Object(f.withStyles)(Ee)(function(e){var t=e.classes,n=e.context,a=e.setContext,s=e.context.reference.chapter,o=e.resources,c=o.ult,i=o.ust,l=o.original,u=o.tn,p=e.lemmaIndex,m=function(e){var t=e.tn,n={},a=JSON.parse(JSON.stringify(t));return a.shift(),a.forEach(function(e){var t=Object(y.a)(e,9),a=t[0],r=t[1],s=t[2],o=t[3],c=t[4],i=t[5],l=t[6],u=t[7],p=t[8];if(a&&r&&s){n[r]||(n[r]={}),n[r][s]||(n[r][s]=[]);var m={id:o,support_reference:c,original_quote:i,occurrence:l,gl_quote:u,occurrence_note:p=p?p.replace(/<br>/g,"\n"):p};n[r][s].push(m)}}),n}({tn:u.data}),d=[],h=m.front.intro[0].occurrence_note,f=h.split("\n").splice(1).join("\n").replace(/\[\[rc:\/\//g,"http://").replace(/\]\]?/g,"");if(d.push({title:"Book Notes",text:f}),u){var g=r.a.createElement(Tt,{tn:u.data});d.push({title:"Search Notes",content:g})}if(p&&Object.keys(p).length>0){var b=r.a.createElement(Ct,{lemmaIndex:p});d.push({title:"Search Words",content:b})}var v={ult:c,ust:i,original:l,tn:{manifest:u.manifest,data:m}},x=r.a.createElement(jt,{context:n,setContext:a,lemmaIndex:p,resources:v,translationNotesChapterData:m[s]});return r.a.createElement("div",{className:t.root},r.a.createElement(Re,{key:n.reference.bookId+"intro",summary:r.a.createElement(We.a,{source:h.split("\n")[0],escapeHtml:!1}),details:r.a.createElement(ht,{context:n,setContext:a,tabs:d})}),x)}),Mt=Object(f.withStyles)(function(e){return{root:{width:"100%"},progress:{margin:"auto",display:"block"}}})(function(e){var t=e.classes,n=e.resources,a=e.manifests,s=e.context,o=e.setContext,c=e.context.reference,i=e.referenceLoaded,l=e.lemmaIndex,u=r.a.createElement(Se,{context:s,setContext:o,manifests:a}),p=r.a.createElement(Pe,{context:s,setContext:o,manifests:a}),m=r.a.createElement(St,{context:s,setContext:o,resources:n,lemmaIndex:l}),d=r.a.createElement(v.CircularProgress,{className:t.progress,color:"secondary",disableShrink:!0}),h=!c.bookId,f=c.bookId&&!c.chapter,g=i&&c.bookId===i.bookId;return h?d=u:f?d=p:g&&(d=m),r.a.createElement("div",{className:t.root},d)}),Pt=function e(t){var n=t.verseObject,a=t.originalWords,r=void 0===a?[]:a;if("milestone"===n.type){var s=JSON.parse(JSON.stringify(n));delete s.children,r.push(s),n.children.forEach(function(t){e({verseObject:t,originalWords:r})})}return r},Lt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={lemmaIndex:null,referenceLoaded:null,resources:{ult:null,ust:null,tn:null,original:null}},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"fetchResourcesConditionally",value:function(e){var t=this,n=e.manifests,a=e.context.reference,r=this.state,s=r.ult,o=r.ust,c=r.obs,i=a.bookId!==this.props.context.reference.bookId,l=!(s||o||c)||i;a.bookId&&Object.keys(n).length>0&&l&&function(e){return F.apply(this,arguments)}(e).then(function(e){var n=function(e){var t=e.data;console.time("indexing");var n={};return Object.keys(t).forEach(function(e){var a=t[e];Object.keys(a).forEach(function(t){a[t].verseObjects.forEach(function(a){Pt({verseObject:a}).forEach(function(r){var s=r.lemma,o=r.strong,c={reference:{chapter:e,verse:t},alignment:a,strong:o};n[s]||(n[s]=[]),n[s].push(c)})})})}),console.timeEnd("indexing"),n}({data:e.ult.data});t.setState({lemmaIndex:n,resources:e,referenceLoaded:a})})}},{key:"componentWillReceiveProps",value:function(e){this.fetchResourcesConditionally(e)}},{key:"componentDidMount",value:function(){this.fetchResourcesConditionally(this.props)}},{key:"componentDidUpdate",value:function(){var e=this.props.context.reference,t=e.bookId,n=e.chapter,a=e.verse,r="".concat(t,"_").concat(n,"_").concat(a),s=document.getElementById(r);s&&s.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"render",value:function(){var e=this.props,t=this.state,n=t.lemmaIndex,a=t.resources,s=t.referenceLoaded;return r.a.createElement(Mt,Object.assign({},e,{lemmaIndex:n,referenceLoaded:s,resources:a}))}}]),t}(r.a.Component),Wt=n(496),At=n.n(Wt),Rt=Object(f.withStyles)(function(e){return{bookListItem:{},listItemIcon:{marginRight:0},listItemText:{paddingLeft:"0.7em"}}})(function(e){var t=e.classes,n=e.storyKey,a=e.frames,s=e.context,o=e.setContext,c=e.context.reference;return r.a.createElement(v.ListItem,{button:!0,selected:c.chapter===n,className:t.bookListItem,style:{paddingLeft:"2em",paddingRight:"0.7em"},onClick:function(){s.reference={bookId:c.bookId,chapter:n},o(s)}},r.a.createElement(v.ListItemIcon,{className:t.listItemIcon},c.chapter===n?r.a.createElement(ce.c,null):r.a.createElement(ce.d,null)),r.a.createElement(v.ListItemText,{className:t.listItemText,primary:"Story ".concat(a[0].text.replace("#","").trim()),secondary:Object.keys(a).length+" Frames"}))}),Bt=Object(f.withStyles)(function(e){return{root:{height:"100%",maxWidth:"40em",marginLeft:"auto",marginRight:"auto"},list:{height:"100%",overflowY:"auto"}}})(function(e){var t=e.classes,n=e.stories,a=e.context,s=e.setContext,o=(e.context.reference,Object.keys(n).map(function(e){var t=parseInt(e),o=n[t];return r.a.createElement(Rt,{key:t,context:a,setContext:s,storyKey:t,frames:o})}));return r.a.createElement(v.Paper,{className:t.root},r.a.createElement(v.List,{className:t.root,component:"nav",dense:!0},r.a.createElement("div",{className:t.list},o)))}),Kt=n(497),_t=n.n(Kt),Dt=Object(f.withStyles)({card:{marginBottom:"1em"},media:{width:"calc(100vw - 1.9em)",height:"calc((100vw - 1.9em) * 9/16)",maxWidth:"40em",maxHeight:"calc(40em * 9/16)"},content:{paddingBottom:0},details:{padding:0},actions:{padding:0},button:{marginLeft:"auto"},player:{width:"100%",height:"100%"}})(function(e){var t,n=e.classes,a=e.open,s=e.handleToggleOpen,o=e.content,c=e.details,i=e.image,l=e.youtubeId;if(l){var u="https://www.youtube.com/watch?v=".concat(l);t=r.a.createElement("div",{className:n.media},r.a.createElement(_t.a,{className:n.player,url:u,controls:!0,config:{youtube:{playerVars:{rel:0,modestbranding:1}}},height:"100%",width:"100%"}))}return r.a.createElement(v.Card,{className:n.card},i?r.a.createElement(v.CardMedia,{className:n.media,image:i,title:"Open Bible Stories Image"}):t,r.a.createElement(v.CardContent,{className:n.content},o),r.a.createElement(v.CardActions,{className:n.actions,disableActionSpacing:!0},r.a.createElement(v.IconButton,{className:n.button,onClick:s,"aria-expanded":a,"aria-label":"Show more"},a?r.a.createElement(ce.g,null):r.a.createElement(ce.h,null))),r.a.createElement(v.Collapse,{in:a,timeout:"auto",unmountOnExit:!0},r.a.createElement(v.CardContent,{className:n.details},c),r.a.createElement(v.CardActions,{className:n.actions,disableActionSpacing:!0},r.a.createElement(v.IconButton,{className:n.button,onClick:s,"aria-expanded":a,"aria-label":"collapse"},a?r.a.createElement(ce.g,null):r.a.createElement(ce.h,null)))))}),Jt=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,id:Math.random(),helps:{}},n.handleToggleOpen=function(){n.setState({open:!n.state.open}),n.scrollToId()},n.scrollToId=function(){var e=document.getElementById(n.state.id);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.frameKey,n=e.context.reference;parseInt(n.verse)===parseInt(t)&&this.scrollToId()}},{key:"render",value:function(){var e=this.state,t=e.open,n=e.id,a=this.props;return r.a.createElement("div",{id:n},r.a.createElement(Dt,Object.assign({},a,{open:t,handleToggleOpen:this.handleToggleOpen.bind(this)})))}}]),t}(r.a.Component),zt=["UHEzSQE6TOs","OkJWjWFVvV4","2ycsRNjhYjU","aBPANcV67nk","I84GIPjHW0Q","lNzawXS8iKk","hDPJKRZa7U4","l0G3AQOYPR0","lfwMHrfoki0","SPSRlFyq_CQ","RpidswdLDWs","ZJKdHg9yVRs","MIk6i62zQ9A","Xg5dWR59sR8","vM4EzYDNSSM","IHwCxln7EbA","UL2pNVepgY8","DZxkuz2NEe8","KMoK1oITeBQ","jBCf1YY5pzM","sgABmFUZKx0","78PNW7qpufE","DxqwSFPTp3A","O0c_U3rPW0Q","im9mN_i_Y44","y3y27a90cBs","ie03EnZJ8kE","g6L2xbnpgCg","p7F8u3ymfn8","uFvINl8a7Ow","y0RYWZZw9Nc","MzdAo6p3J48","Htgd5jnKzPc","jCy9BJhwg6w","deYD2wxIQlA","gC6jkPn9sks","4srXPVgYU0w","F-CEE6hc1aE","4gFX7PnhfdI","RlOsDbJ9hEc","MAhIbNxMlPI","vCaywUPxzy4","kDMNXa4Z_M0","wb5owhurDXc","WUcXHSmjvgw","Ij34FKUaUJM","ioqNQiAUz0E","ep6RD36iDFw","ZWl5kehifDU","CnSJk-p087Y"],Ut=function(e){var t=e.storyMarkdown,n={};return t.split(/\s*?\n\s*?\n\s*?[!]/).forEach(function(e,t){n[t]=Vt({frameMarkdown:e})}),n},Vt=function(e){var t=e.frameMarkdown,n={},a=/\((http.*?\.jpg).*?\)/;if(a.test(t)){var r=a.exec(t),s=Object(y.a)(r,2),o=(s[0],s[1]);n.image=o}return n.text=t.replace(/\s*\[.*?\]\(.*?\)\s*/,"").trim(),n};function Ft(e){return qt.apply(this,arguments)}function qt(){return(qt=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.storyId,s=L({languageId:a}).obs,o=r<10?"0".concat(r):"".concat(r),c="content/".concat(o,".md"),e.next=6,K({username:n,repository:s,path:c});case 6:return l=e.sent,u=Ut({storyMarkdown:l}),e.abrupt("return",u);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Ht(){return(Ht=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=Object(ke.a)(Array(51).keys()).splice(1),s={},o=r.map(function(e){return Ft({username:n,languageId:a,storyId:e})}),e.next=6,Promise.all(o);case 6:return c=e.sent,r.forEach(function(e,t){s[e]=c[t]}),e.abrupt("return",s);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var Qt=Object(f.withStyles)({})(function(e){e.classes;var t=e.context,n=e.setContext,a=(e.open,e.handleToggleOpen,e.storyKey),s=e.frameKey,o=e.image,c=e.text,i=e.helps,l=[];if(i){var u=i.notes,p=i.words,m=i.questions,d=i.studyNotes;i.studyQuestions&&l.push({title:"Study Questions",text:i.studyQuestions}),u&&l.push({title:"Notes",notes:u}),p&&l.push({title:"Words",words:p}),m&&l.push({title:"Questions",notes:m}),d&&l.push({title:"Study Notes",notes:i.studyNotes})}var h,f=l.length>0?r.a.createElement(ht,{context:t,setContext:n,tabs:l}):r.a.createElement("div",null),g=s>0?"**".concat(s,"** ").concat(c):c,b=Ke()().use(De.a,{remarkReactComponents:{strong:"sup"}}).processSync(g).contents;return 0===parseInt(s)&&(h=function(e){var t=e.storyKey;return zt[t-1]}({storyKey:a})),r.a.createElement(Jt,{context:t,content:b,details:f,image:o,youtubeId:h})}),Yt=n(173);function Gt(){return(Gt=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.storyKey,s=t.frameKey,o={},l=(c=["obs-tn","obs-tq","obs-sn"]).map(function(e){var t;return"obs-tn"===e&&(t=an({username:n,languageId:a,storyKey:r,frameKey:s})),"obs-tq"===e&&(t=tn({username:n,languageId:a,storyKey:r,frameKey:s})),"obs-sn"===e&&(t=$t({username:n,languageId:a,storyKey:r,frameKey:s})),t}),e.next=6,Promise.all(l);case 6:return u=e.sent,c.forEach(function(e,t){"obs-tn"===e&&(o.notes=u[t].notes,o.words=u[t].words),"obs-tq"===e&&(o.questions=u[t]),"obs-sn"===e&&(o.studyNotes=u[t])}),e.abrupt("return",o);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function Zt(e){return Xt.apply(this,arguments)}function Xt(){return(Xt=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.storyKey,s=L({languageId:a})["obs-sq"],o=sn(r)+".md",c=["content",o].join("/"),l=K({username:n,repository:s,path:c}),e.abrupt("return",l);case 6:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function $t(e){return en.apply(this,arguments)}function en(){return(en=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.storyKey,s=t.frameKey,o=L({languageId:a})["obs-sn"],c=sn(s)+".md",l=["content",sn(r),c].join("/"),e.next=6,K({username:n,repository:o,path:l});case 6:return u=e.sent,p=ln({markdown:u}),e.abrupt("return",p);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function tn(e){return nn.apply(this,arguments)}function nn(){return(nn=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.storyKey,s=t.frameKey,o=L({languageId:a})["obs-tq"],c=sn(s)+".md",l=["content",sn(r),c].join("/"),e.next=6,K({username:n,repository:o,path:l});case 6:return u=e.sent,p=on({markdown:u}),e.abrupt("return",p);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}function an(e){return rn.apply(this,arguments)}function rn(){return(rn=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l,u,p;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.username,a=t.languageId,r=t.storyKey,s=t.frameKey,o=L({languageId:a})["obs-tn"],c=sn(s)+".md",l=["content",sn(r),c].join("/"),e.next=6,K({username:n,repository:o,path:l});case 6:return u=e.sent,p=cn({markdown:u}),e.abrupt("return",p);case 9:case"end":return e.stop()}},e,this)}))).apply(this,arguments)}var sn=function(e){return"".concat(e<10?0:"").concat(e)},on=function(e){var t=e.markdown;return t?t.split(/\n\s*#\s*/m).map(function(e){var t=e.split(/\n\s*/m),n=Object(Yt.a)(t),a=n[0],r=n.slice(1);return{gl_quote:a.replace(/\s*#\s*/,""),occurrence_note:r.join("\n\n")}}):null},cn=function(e){var t=e.markdown;if(!t)return{};var n,a=t.split(/#+\s*translationWords\s*/m),r=Object(y.a)(a,2),s=r[0],o=r[1],c=s.split(/\n\s*#\s*/m).map(function(e){var t=e.split(/\n\s*\n/m),n=Object(Yt.a)(t),a=n[0],r=n.slice(1);return{gl_quote:a.replace(/\s*#\s*/,""),occurrence_note:r.join("\n\n")}});return o&&/\w+/.test(o)&&(n=o.split(/\n?\s*\*\s*/m).filter(function(e){return""!==e}).map(function(e){return e.replace(/\[\[rc/,"http").replace(/\]\]/,"")})),{notes:c,words:n}},ln=function(e){var t=e.markdown;return t?t.split(/\n\s*#+\s*/m).map(function(e){var t=e.split(/\n\s*\n/m),n=Object(Yt.a)(t),a=n[0],r=n.slice(1);return{gl_quote:a.replace(/\s*#\s*/,""),occurrence_note:r.join("\n\n")}}).filter(function(e){return!/^;/.test(e.occurrence_note)}):null},un=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,helps:{}},n.handleToggleOpen=function(){n.setState({open:!n.state.open}),n.scrollToId()},n.scrollToId=function(){var e=document.getElementById(n.props.frameKey);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.storyKey,a=t.frameKey,r=t.context,s=r.username,o=r.languageId,c=r.reference;(function(e){return Gt.apply(this,arguments)})({username:s,languageId:o,storyKey:n,frameKey:a}).then(function(t){e.setState({helps:t})}),parseInt(c.verse)===parseInt(a)&&this.scrollToId()}},{key:"render",value:function(){var e=this.state.open,t=this.props,n=Object(ue.a)({},this.state.helps,this.props.helps);return r.a.createElement("div",{id:t.frameKey},r.a.createElement(Qt,Object.assign({},t,{helps:n,open:e,handleToggleOpen:this.handleToggleOpen.bind(this)})))}}]),t}(r.a.Component),pn=Object(f.withStyles)(Ee)(function(e){var t,n=e.classes,a=e.storyKey,s=e.story,o=e.context,c=e.setContext,i=e.helps,l=e.guide,u=e.title,p="# ".concat(u),m=Ke()().use(De.a).processSync(p).contents,d=[];if(l){var h=l;d.push({title:"Guide",text:h})}var f=r.a.createElement(ht,{context:o,setContext:c,tabs:d});t=r.a.createElement(Jt,{context:o,content:m,details:f});var g=Object.keys(s).map(function(e,t){var n=s[e],l=n.image,u=n.text;return r.a.createElement(un,{key:"".concat(a,"-").concat(e),storyKey:a,helps:0===t?i:{},frameKey:e,image:l,text:u,context:o,setContext:c})});return r.a.createElement("div",{className:n.column},t,g)}),mn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1,id:Math.random(),helps:null},n.handleToggleOpen=function(){n.setState({open:!n.state.open}),n.scrollToId()},n.scrollToId=function(){var e=document.getElementById(n.state.id);e&&e.scrollIntoView({behavior:"smooth",block:"start"})},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"fetchStudyQuestions",value:function(e){var t=this,n=e.storyKey,a=e.context,r=a.username,s=a.languageId;Zt({username:r,languageId:s,storyKey:0}).then(function(e){Zt({username:r,languageId:s,storyKey:n}).then(function(n){var a={studyQuestions:n};t.setState({helps:a,guide:e})})})}},{key:"componentWillReceiveProps",value:function(e){this.fetchStudyQuestions(e)}},{key:"componentDidMount",value:function(){this.fetchStudyQuestions(this.props)}},{key:"render",value:function(){var e=this.state,t=e.helps,n=e.guide,a=e.open,s=e.id,o=this.props;return r.a.createElement("div",{id:s},r.a.createElement(pn,Object.assign({},o,{helps:t,guide:n,open:a,handleToggleOpen:this.handleToggleOpen.bind(this)})))}}]),t}(r.a.Component),dn=Object(f.withStyles)(function(e){return{root:{width:"100%"},progress:{margin:"auto",display:"block"}}})(function(e){var t=e.classes,n=e.context,a=e.context.reference,s=e.setContext,o=e.stories,c=e.title,i=r.a.createElement(v.CircularProgress,{className:t.progress,color:"secondary",disableShrink:!0}),l=o&&!a.chapter,u=o&&a.chapter;l?i=r.a.createElement(Bt,{context:n,setContext:s,stories:o}):u&&(i=r.a.createElement(mn,{context:n,setContext:s,storyKey:a.chapter,story:o[a.chapter],title:c}));return r.a.createElement("div",{className:t.root},i)}),hn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={stories:null},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.context;(function(e){return Ht.apply(this,arguments)})({username:t.username,languageId:t.languageId}).then(function(t){e.setState({stories:t})})}},{key:"componentDidUpdate",value:function(){var e=this.props.context.reference,t=e.bookId,n=e.chapter,a=e.verse,r="".concat(t,"_").concat(n,"_").concat(a),s=document.getElementById(r);s&&s.scrollIntoView({behavior:"smooth",block:"start"})}},{key:"render",value:function(){var e=this.state.stories,t=this.props,n=t.manifests.obs.dublin_core.title;return r.a.createElement(dn,Object.assign({},t,{stories:e,title:n}))}}]),t}(r.a.Component),fn=Object(f.withStyles)(At.a)(hn),gn=Object(f.withStyles)(function(e){return{root:{width:"100%"},progress:{margin:"auto",display:"block"}}})(function(e){var t=e.classes,n=e.manifests,a=e.history,s=e.context,o=e.setContext,c=(e.title,r.a.createElement(le,{context:s,setContext:o,manifests:n,contexts:a})),i=r.a.createElement(Ie,{context:s,setContext:o,manifests:n}),l=r.a.createElement(Lt,{context:s,setContext:o,manifests:n}),u=r.a.createElement(fn,{context:s,setContext:o,manifests:n}),p=r.a.createElement(v.CircularProgress,{className:t.progress,color:"secondary",disableShrink:!0}),m="history"===s.view;if(Object.keys(n).length>0){var d=!s.resourceId,h=["ult","ust","uhb","ugnt"].includes(s.resourceId),f="obs"===s.resourceId;m?p=c:d?p=i:h?p=l:f&&(p=u)}return r.a.createElement("div",{className:t.root},p)}),bn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){var e=this.props.context.reference;if(e){var t=e.bookId,n=e.chapter,a=e.verse,r="".concat(t,"_").concat(n,"_").concat(a),s=document.getElementById(r);s&&s.scrollIntoView({behavior:"smooth",block:"start"})}}},{key:"render",value:function(){var e=this.props;return r.a.createElement(gn,e)}}]),t}(r.a.Component),vn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleChange=function(e,t){var a=n.props,r=a.context,s=a.context,o=s.username,c=s.languageId,i=s.reference;switch(t){case 0:n.previousChapter();break;case 1:r={username:o,languageId:c,view:"history"};break;case 2:r={username:o,languageId:c,reference:{}};break;case 3:r.reference={};break;case 4:i&&(r.reference={bookId:i.bookId});break;case 5:n.nextChapter()}n.props.setContext(r)},n.previousChapter=function(){var e=n.props.context;e.reference.chapter>1&&(e.reference.chapter=e.reference.chapter-1,e.reference.verse=void 0),n.props.setContext(e)},n.nextChapter=function(){var e=n.props.context,t=e.reference,a=t.bookId;t.chapter<we(a).length&&(e.reference.chapter=e.reference.chapter+1,e.reference.verse=void 0),n.props.setContext(e)},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.classes,a=t.context,s="history"===a.view,o=!a.resourceId,c=!("obs"===a.resourceId)&&!(a.reference&&a.reference.bookId),i=!(a.reference&&a.reference.chapter);return s?e=1:o?e=2:c?e=3:i&&(e=4),r.a.createElement(v.Paper,{className:n.root},r.a.createElement(v.BottomNavigation,{value:e,onChange:this.handleChange,showLabels:!0,className:n.bottomNavigation},r.a.createElement(v.BottomNavigationAction,{className:n.button,icon:r.a.createElement(ce.j,null)}),r.a.createElement(v.BottomNavigationAction,{className:n.button,label:"History",icon:r.a.createElement(ce.i,null)}),r.a.createElement(v.BottomNavigationAction,{className:n.button,label:"Resources",icon:r.a.createElement(ce.l,null)}),r.a.createElement(v.BottomNavigationAction,{className:n.button,label:"Books",icon:r.a.createElement(ce.a,null)}),r.a.createElement(v.BottomNavigationAction,{className:n.button,label:"Chapters",icon:r.a.createElement(ce.c,null)}),r.a.createElement(v.BottomNavigationAction,{className:n.button,icon:r.a.createElement(ce.k,null)})))}}]),t}(r.a.Component),yn=Object(f.withStyles)(function(e){return{root:{width:"100%"},bottomNavigation:{margin:"0 auto",maxWidth:"40em"},button:{paddingLeft:"0",paddingRight:"0",minWidth:"60px"}}},{withTheme:!0})(vn),xn=Object(f.createMuiTheme)({typography:{useNextVariants:!0},palette:{primary:{light:"#59B7E7",main:"#31ADE3",dark:"#014263",contrastText:"#FFF"}}}),En=Object(f.withStyles)(function(e){return{root:{flexGrow:1},appFrame:{zIndex:1,position:"relative",display:"flex",width:"100%"},main:{width:"100%",minWidth:"20em"},workspace:{padding:"1em 1em 5.5em 1em"},bottomNav:{width:"100%",position:"fixed",bottom:0,zIndex:10}}})(function(e){var t=e.classes,n=e.context,a=e.setContext,s=e.history,o=e.manifests;return r.a.createElement(f.MuiThemeProvider,{theme:xn},r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.appFrame},r.a.createElement("main",{className:t.main},r.a.createElement(oe,{applicationName:"unfoldingWord",context:n,setContext:a,manifests:o}),r.a.createElement("div",{className:t.workspace},r.a.createElement(bn,{context:n,setContext:a,history:s,manifests:o}))),r.a.createElement("nav",{className:t.bottomNav},r.a.createElement(yn,{context:n,setContext:a})))))}),In="ApplicationContainer.state.",kn=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(m.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={manifests:{},context:n.defaultContext(),history:[]},n}return Object(h.a)(t,e),Object(p.a)(t,[{key:"defaultContext",value:function(){return{username:"unfoldingWord",languageId:"en",resourceId:null,reference:{}}}},{key:"addToHistoryArray",value:function(e,t){var n=[];t&&(n=V(t));var a=JSON.stringify(e);if(!(a===JSON.stringify(n[0]))){var r=JSON.parse(a);n.unshift(r)}return n}},{key:"addHistory",value:function(e){var t=e.history,n=e.context;return n.reference&&n.reference.chapter&&(t=this.addToHistoryArray(n,t),z({key:"".concat(In,"history"),value:t})),t}},{key:"refreshManifests",value:function(){var e=Object(l.a)(i.a.mark(function e(t){var n,a,r,s,o,c,l;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t.context,a=this.state,r=a.context,s=a.manifests,o=V(s),c=r.languageId!==n.languageId,l=r.username!==n.username,!c&&!l){e.next=9;break}return e.next=8,W(n);case 8:o=e.sent;case 9:return e.abrupt("return",o);case 10:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"setContext",value:function(){var e=Object(l.a)(i.a.mark(function e(t){var n,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n={},a=V(t),(!a.reference||!a.resourceId)&&(n.context=a,window.scrollTo(0,0)),e.next=6,this.refreshManifests({context:a});case 6:n.manifests=e.sent,!!this.state.manifests[a.resourceId]&&("obs"===a.resourceId&&(a.reference.bookId="obs"),n.context=a,n.history=this.addHistory({history:this.state.history,context:a}),window.scrollTo(0,0)),this.setState(n),z({key:"".concat(In,"context"),value:a});case 11:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"componentWillMount",value:function(){var e=U({key:"".concat(In,"context"),defaultValue:this.defaultContext()}),t=U({key:"".concat(In,"history"),defaultValue:[]});this.setState({context:e,history:t})}},{key:"componentDidMount",value:function(){var e=Object(l.a)(i.a.mark(function e(){var t,n,a,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t={},n=this.state.context,e.next=4,W(n);case 4:a=e.sent,r=!!(n&&a&&a[n.resourceId]),t.manifests=a,t.context=r?n:this.defaultContext(),this.setState(t);case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state,t=e.context,n=e.history,a=e.manifests;return r.a.createElement(En,{context:t,history:n,setContext:this.setContext.bind(this),manifests:a})}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(kn,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5698,2,1]]]);
//# sourceMappingURL=main.838a8300.chunk.js.map