{"version":3,"sources":["chaptersAndVerses.js","Workspace/Scripture/helpers.js","helpers.js","ApplicationBar/Component.js","ApplicationBar/index.js","ApplicationBar/Container.js","Workspace/Component.js","Workspace/index.js","Workspace/Container.js","BottomNav/Container.js","BottomNav/index.js","Component.js","Container.js","serviceWorker.js","index.js"],"names":["chaptersInBook","_ref","bookId","Object","_Volumes_Github_Workspace_translation_helps_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_toConsumableArray__WEBPACK_IMPORTED_MODULE_0__","Array","keys","map","i","bookData","chapters","_unused","_ref3","data","filter","row","id","validateBookId","reference","valid","validateChapter","dependencies","chapter","validateReference","_ref5","verse","blankReference","validBookId","validChapter","validVerse","verseCount","inRange","validateVerse","fetchResources","_x","_fetchResources","apply","this","arguments","_callee2","_ref$context","username","languageId","manifests","resources","uhbManifest","ugntManifest","testament","originalManifest","resourceIds","promises","resourcesArray","_Volumes_Github_Workspace_translation_helps_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","a","wrap","_context2","prev","next","context","ult","ust","ulb","irv","tn","original","uhb","ugnt","whichTestament","_ref13","_Volumes_Github_Workspace_translation_helps_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_2__","mark","_callee","resourceId","manifest","_context","includes","abrupt","fetchBook","translationNotes","fetchOriginalBook","stop","_x9","Promise","all","sent","forEach","index","_x2","_fetchBook","_callee3","_ref2","projects","repository","usfm","json","_context3","projectByBookId","ApplicationHelpers","fetchFileByBookId","usfmjs","toJSON","_x3","_fetchOriginalBook","_callee4","_ref4","repositories","_context4","pivotTranslationNotes","_ref7","translationNotesObject","array","JSON","parse","stringify","shift","item","_item","_Volumes_Github_Workspace_translation_helps_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_slicedToArray__WEBPACK_IMPORTED_MODULE_1__","book","support_reference","original_quote","occurrence","gl_quote","occurrence_note","object","replace","push","_x6","_translationNotes","_callee7","_ref8","_context7","fetchNotes","_x7","_fetchNotes","_callee8","_ref9","tsv","_context8","tsvParse","_x8","_fetchFileByBookId","_callee9","_ref10","_projectByBookId","path","_context9","_ref11","project","_projects","identifier","length","_ref12","split","trim","store","localforage","createInstance","driver","INDEXEDDB","name","api","setup","baseURL","cache","maxAge","resourceRepositories","ta","tw","ugl","uhal","obs","obs-tn","obs-tq","obs-sn","obs-sq","fetchResourceManifests","_fetchResourceManifests","_resourceRepositories","resourceIdsPromises","manifestArray","fetchManifest","_fetchManifest","yaml","fetchFileFromServer","YAML","parseDocument","_fetchFileFromServer","_ref4$branch","branch","uri","repositoryExists","Path","join","get","t0","apiPath","getUID","_x4","_getUID","user","uid","_x5","_repositoryExists","_callee5","_ref6","query","repos","repo","_context5","concat","_callee6","_context6","save","key","value","localstorage","set","load","defaultValue","deepFreeze","freeze","withStyles","theme","paper","color","backgroundColor","textAlign","boxShadow","toolbar","margin","display","padding","logo","height","paddingTop","withTheme","classes","applicationName","bookName","ScriptureHelpers","title","referenceComponent","react_default","createElement","dist_default","className","src","alt","index_es","variant","coin","noWrap","Container","state","props","ApplicationBar_Component","React","Component","History","lazy","__webpack_require__","e","then","bind","Resources","OpenBibleStories","Scripture","root","width","progress","history","setContext","historyComponent","contexts","scripture","openBibleStories","loadingComponent","disableShrink","component","shouldShowHistory","view","shouldShowResources","shouldShowScripture","shouldShowOpenBibleStories","react","fallback","element","document","getElementById","scrollIntoView","behavior","block","Workspace_Component","BottomNavContainer","handleChange","event","objectSpread","_this","previousChapter","nextChapter","undefined","_this$props","couldShowReference","couldShowBook","couldShowChapter","onChange","showLabels","bottomNavigation","button","icon","icons_index_es","label","maxWidth","paddingLeft","paddingRight","minWidth","createMuiTheme","typography","useNextVariants","palette","primary","light","main","dark","contrastText","flexGrow","appFrame","zIndex","position","workspace","bottomNav","bottom","styles","ApplicationBar","Workspace","BottomNav","keyPrefix","defaultContext","urlParams","URLSearchParams","window","location","search","_history","toConsumableArray","newContext","unshift","addToHistoryArray","helpers","oldContext","oldManifests","languageChanged","usernameChanged","manifestExists","validReference","chapterAndVerses","newState","_reference","scrollTo","refreshManifests","validateContext","addHistory","setState","updateQuery","_ref4$reference","_username","_languageId","_resourceId","_bookId","_chapter","_verse","pushState","validContext","_this$state2","_manifests","src_Component","Boolean","hostname","match","ReactDOM","render","src_Container","navigator","serviceWorker","ready","registration","unregister"],"mappings":"gLAEaA,EAAiB,SAAAC,GAAc,IAAZC,EAAYD,EAAZC,OAC9B,IAOE,MALe,QAAXA,EACSC,OAAAC,EAAA,EAAAD,CAAIE,MAAM,IAAIC,QAAQC,IAAI,SAAAC,GAAC,OAAEA,EAAE,IAE/BC,EAAS,CAACP,WAASQ,SAGhC,MAAAC,GACA,OAAO,OASEF,EAAW,SAAAG,GAAc,IAAZV,EAAYU,EAAZV,OAExB,OADkBW,EAAKC,OAAO,SAAAC,GAAG,OAAIA,EAAIC,KAAOd,IAAQ,IAS7Ce,EAAiB,SAACC,GAC7B,IAAIC,EAMJ,MALyB,QAArBD,EAAUhB,OACZiB,GAAQ,EACCD,EAAUhB,QAAYO,EAASS,KACxCC,GAAQ,GAEHA,GAGIC,EAAkB,SAACF,GAC9B,IAAMG,EAAiBJ,EAAeC,GAChCR,EAAWV,EAAekB,GAEhC,OADeG,KAAkBX,EAASQ,EAAUI,QAAU,IAYnDC,EAAoB,SAAAC,GAAiB,IAAfN,EAAeM,EAAfN,UAC7BC,GAAQ,EACLjB,EAA0BgB,EAA1BhB,OAAQoB,EAAkBJ,EAAlBI,QAASG,EAASP,EAATO,MAClBC,GAAmBxB,IAAWoB,IAAYG,EAC1CE,EAAcV,EAAeC,GAC7BU,EAAeR,EAAgBF,GAC/BW,GAAgBJ,GAdK,SAACP,GAC5B,IAAMG,EAAgBJ,EAAeC,IAAcE,EAAgBF,GAE7DY,EADW9B,EAAekB,GACJA,EAAUI,SAChCS,EAAWD,GAAcZ,EAAUO,OAASK,EAClD,OAAQT,GAAgBU,EASOC,CAAcd,GAU7C,OATIQ,EACFP,GAAQ,GACCQ,GAAgBL,GAAYG,EAE5BE,GAAeC,IAAiBH,EACzCN,GAAQ,EACCQ,GAAeC,GAAgBC,IACxCV,GAAQ,GAJRA,GAAQ,EAMHA,oMChEF,SAAec,EAAtBC,GAAA,OAAAC,EAAAC,MAAAC,KAAAC,sDAAO,SAAAC,EAAAtC,GAAA,IAAAuC,EAAAC,EAAAC,EAAAxC,EAAAyC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAAC,EAAA,OAAAC,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAAAjB,EAAAvC,EACLyD,QACEjB,EAFGD,EAEHC,SACAC,EAHGF,EAGHE,WAEExC,EALCsC,EAIHtB,UACEhB,OAGJyC,EARK1C,EAQL0C,UAEIC,EAAY,CACde,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,IAAK,KACLC,GAAI,KACJC,SAAU,MAECnB,EAAmCF,EAAxCsB,IAAwBnB,EAAgBH,EAAtBuB,KACpBnB,EAAYoB,EAAe,CAACjE,SAAQ2C,cAAaC,iBACjDE,EAAkC,QAAdD,EAAuBF,EAAcC,EAGzDI,GADAD,EAAc,CAAC,MAAO,MAAO,MAAO,MAAO,KAAM,aAC1B1C,IAAZ,eAAA6D,EAAAjE,OAAAkE,EAAA,EAAAlE,CAAAiD,EAAAC,EAAAiB,KAAgB,SAAAC,EAAOC,GAAP,IAAAC,EAAA,OAAArB,EAAAC,EAAAC,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,WAE3B,CAAC,MAAM,MAAO,MAAO,OAAOkB,SAASH,KAAe7B,EAAU6B,GAFnC,CAAAE,EAAAjB,KAAA,eAG7BgB,EAAW9B,EAAU6B,GAHQE,EAAAE,OAAA,SAItBC,EAAU,CAACpC,WAAUC,aAAY8B,aAAYtE,SAAQuE,cAJ/B,UAMZ,OAAfD,IAAuB7B,EAAU6B,GANN,CAAAE,EAAAjB,KAAA,eAO7BgB,EAAW9B,EAAU6B,GAPQE,EAAAE,OAAA,SAQtBE,EAAiB,CAACrC,WAAUC,aAAYxC,SAAQuE,cAR1B,UAUZ,aAAfD,EAV2B,CAAAE,EAAAjB,KAAA,eAAAiB,EAAAE,OAAA,SAWtBG,EAAkB,CAACtC,WAAUC,aAAYxC,SAAQ2C,cAAaC,kBAXxC,wBAAA4B,EAAAM,SAAAT,EAAAlC,SAAhB,gBAAA4C,GAAA,OAAAb,EAAAhC,MAAAC,KAAAC,YAAA,IAvBZiB,EAAAE,KAAA,EAqCwByB,QAAQC,IAAIjC,GArCpC,cAqCCC,EArCDI,EAAA6B,KAsCLnC,EAAYoC,QAAQ,SAACb,EAAYc,GAC/B,IAAMzE,EAAOsC,EAAemC,GACtBb,EAA2B,aAAfD,EAA6BxB,EAAmBL,EAAU6B,GAC5E5B,EAAU4B,GAAc,CACtBC,WACA5D,UA3CC0C,EAAAqB,OAAA,SA8CEhC,GA9CF,yBAAAW,EAAAyB,SAAAzC,EAAAF,gCAiDA,SAAewC,EAAtBU,GAAA,OAAAC,EAAApD,MAAAC,KAAAC,sDAAO,SAAAmD,EAAAC,GAAA,IAAAjD,EAAAC,EAAA8B,EAAAtE,EAAAuE,EAAAkB,EAAAC,EAAAC,EAAAC,EAAA,OAAA1C,EAAAC,EAAAC,KAAA,SAAAyC,GAAA,cAAAA,EAAAvC,KAAAuC,EAAAtC,MAAA,UAA0BhB,EAA1BiD,EAA0BjD,SAAUC,EAApCgD,EAAoChD,WAAY8B,EAAhDkB,EAAgDlB,WAAYtE,EAA5DwF,EAA4DxF,OAAQuE,EAApEiB,EAAoEjB,SAClEkB,EAAYlB,EAAZkB,SACFK,EAAgB,CAACL,WAAUzF,WAF3B,CAAA6F,EAAAtC,KAAA,eAAAsC,EAAAnB,OAAA,SAE4C,MAF5C,cAGCgB,EAAaK,IAAwC,CAACvD,eAAa8B,GAHpEuB,EAAAtC,KAAA,EAIcyC,EAAkB,CAACzD,WAAUmD,aAAY1F,SAAQuE,aAJ/D,cAICoB,EAJDE,EAAAX,KAKCU,EAAOK,IAAOC,OAAOP,GALtBE,EAAAnB,OAAA,SAMEkB,EAAKpF,UANP,yBAAAqF,EAAAf,SAAAS,EAAApD,gCASA,IAAM8B,EAAiB,SAAAvD,GAAyC,IACjEmC,EAD0B7C,EAAuCU,EAAvCV,OAAQ2C,EAA+BjC,EAA/BiC,YAAaC,EAAkBlC,EAAlBkC,aAMnD,OAJmBkD,EAAgB,CAACL,SAAU9C,EAAY8C,SAAUzF,aAEpD6C,EAAY,OADRiD,EAAgB,CAACL,SAAU7C,EAAa6C,SAAUzF,aAErD6C,EAAY,OACtBA,GAGF,SAAegC,EAAtBsB,GAAA,OAAAC,EAAAlE,MAAAC,KAAAC,sDAAO,SAAAiE,EAAAC,GAAA,IAAA9D,EAAAxC,EAAA2C,EAAAC,EAAA2B,EAAAmB,EAAA7C,EAAA0D,EAAAZ,EAAAC,EAAA,OAAA1C,EAAAC,EAAAC,KAAA,SAAAoD,GAAA,cAAAA,EAAAlD,KAAAkD,EAAAjD,MAAA,cAAA+C,EAAkC/D,SAAUC,EAA5C8D,EAA4C9D,WAAYxC,EAAxDsG,EAAwDtG,OAAQ2C,EAAhE2D,EAAgE3D,YAAaC,EAA7E0D,EAA6E1D,aAE5EC,EAAYoB,EAAe,CAACjE,SAAQ2C,cAAaC,iBACjD2D,EAAeR,IAAwC,CAACvD,eAC5C,QAAdK,IACF0B,EAAW5B,EACX+C,EAAaa,EAAaxC,KAEV,QAAdlB,IACF0B,EAAW3B,EACX8C,EAAaa,EAAavC,MAVvBwC,EAAAjD,KAAA,EAYcyC,EAAkB,CAACzD,SAAU,gBAAiBmD,aAAY1F,SAAQuE,aAZhF,cAYCoB,EAZDa,EAAAtB,KAaCU,EAAOK,IAAOC,OAAOP,GAbtBa,EAAA9B,OAAA,SAcEkB,EAAKpF,UAdP,yBAAAgG,EAAA1B,SAAAuB,EAAAlE,gCA+BA,IAAMsE,EAAwB,SAAAC,GAAU,IAAR7C,EAAQ6C,EAAR7C,GACrC,IAAKA,EAAI,MAAO,GAChB,IAAI8C,EAAyB,GACzBC,EAAQC,KAAKC,MAAMD,KAAKE,UAAUlD,IAmBtC,OAlBA+C,EAAMI,QACNJ,EAAMzB,QAAQ,SAAA8B,GAAQ,IAAAC,EAAAjH,OAAAkH,EAAA,EAAAlH,CACuFgH,EADvF,GACfG,EADeF,EAAA,GACT9F,EADS8F,EAAA,GACA3F,EADA2F,EAAA,GACOpG,EADPoG,EAAA,GACWG,EADXH,EAAA,GAC8BI,EAD9BJ,EAAA,GAC8CK,EAD9CL,EAAA,GAC0DM,EAD1DN,EAAA,GACoEO,EADpEP,EAAA,GAEpB,GAAIE,GAAQhG,GAAWG,EAAO,CACvBoF,EAAuBvF,KAAUuF,EAAuBvF,GAAW,IACnEuF,EAAuBvF,GAASG,KAAQoF,EAAuBvF,GAASG,GAAS,IAEtF,IAAImG,EAAS,CACX5G,KACAuG,oBACAC,iBACAC,aACAC,WACAC,gBAPFA,EAAqBA,EAAmBA,EAAgBE,QAAQ,QAAQ,MAAQF,GAShFd,EAAuBvF,GAASG,GAAOqG,KAAKF,MAGzCf,GAGF,SAAe/B,EAAtBiD,GAAA,OAAAC,EAAA5F,MAAAC,KAAAC,sDAAO,SAAA2F,EAAAC,GAAA,IAAAzF,EAAAC,EAAAxC,EAAAuE,EAAA5D,EAAA,OAAAuC,EAAAC,EAAAC,KAAA,SAAA6E,GAAA,cAAAA,EAAA3E,KAAA2E,EAAA1E,MAAA,cAAiChB,EAAjCyF,EAAiCzF,SAAUC,EAA3CwF,EAA2CxF,WAAYxC,EAAvDgI,EAAuDhI,OAAQuE,EAA/DyD,EAA+DzD,SAA/D0D,EAAA1E,KAAA,EACc2E,EAAW,CAAC3F,WAAUC,aAAYxC,SAAQuE,aADxD,cACC5D,EADDsH,EAAA/C,KAAA+C,EAAAvD,OAAA,SAEE/D,GAFF,wBAAAsH,EAAAnD,SAAAiD,EAAA5F,gCAKA,SAAe+F,EAAtBC,GAAA,OAAAC,EAAAlG,MAAAC,KAAAC,sDAAO,SAAAiG,EAAAC,GAAA,IAAA/F,EAAAC,EAAAxC,EAAAuE,EAAAmB,EAAA6C,EAAA5H,EAAA,OAAAuC,EAAAC,EAAAC,KAAA,SAAAoF,GAAA,cAAAA,EAAAlF,KAAAkF,EAAAjF,MAAA,cAA2BhB,EAA3B+F,EAA2B/F,SAAUC,EAArC8F,EAAqC9F,WAAYxC,EAAjDsI,EAAiDtI,OAAQuE,EAAzD+D,EAAyD/D,SACxDmB,EAAaK,IAAwC,CAACvD,eAAaqB,GADpE2E,EAAAjF,KAAA,EAEayC,EAAkB,CAACzD,WAAUmD,aAAY1F,SAAQuE,aAF9D,cAECgE,EAFDC,EAAAtD,KAGCvE,EAAO8H,EAAS,CAACF,QAHlBC,EAAA9D,OAAA,SAIE/D,GAJF,wBAAA6H,EAAA1D,SAAAuD,EAAAlG,gCAOA,SAAe6D,EAAtB0C,GAAA,OAAAC,EAAAzG,MAAAC,KAAAC,sDAAO,SAAAwG,EAAAC,GAAA,IAAAtG,EAAAmD,EAAA1F,EAAAuE,EAAAkB,EAAAqD,EAAAC,EAAApI,EAAA,OAAAuC,EAAAC,EAAAC,KAAA,SAAA4F,GAAA,cAAAA,EAAA1F,KAAA0F,EAAAzF,MAAA,cAAkChB,EAAlCsG,EAAkCtG,SAAUmD,EAA5CmD,EAA4CnD,WAAY1F,EAAxD6I,EAAwD7I,OAAQuE,EAAhEsE,EAAgEtE,SAC9DkB,EAAYlB,EAAZkB,SADFqD,EAEQhD,EAAgB,CAACL,WAAUzF,WACxC+I,GADKA,EAFAD,EAEAC,MACOpB,QAAQ,QAAS,IAHxBqB,EAAAzF,KAAA,EAIcwC,IAAuC,CAACxD,WAAUmD,aAAYqD,SAJ5E,cAICpI,EAJDqI,EAAA9D,KAAA8D,EAAAtE,OAAA,SAKE/D,GALF,wBAAAqI,EAAAlE,SAAA8D,EAAAzG,gCAQA,IAAM2D,EAAkB,SAAAmD,GAAwB,IAEjDC,EAF2BzD,EAAsBwD,EAAtBxD,SAAUzF,EAAYiJ,EAAZjJ,OACnCmJ,EAAY1D,EAAS7E,OAAO,SAAAqG,GAAI,OAAIA,EAAKmC,aAAepJ,IAK9D,OAHImJ,EAAUE,OAAS,IACrBH,EAAUC,EAAU,IAEfD,GAGIT,EAAW,SAAAa,GAAW,IAATf,EAASe,EAATf,IACxB,IACE,OAAOA,EAAIgB,MAAM,MAAMlJ,IAAI,SAAAQ,GAAG,OAAIA,EAAI2I,OAAOD,MAAM,QACnD,MAAA9I,GACA,OAAO,sVC5JLgJ,EAAQC,IAAYC,eAAe,CACvCC,OAAQ,CAACF,IAAYG,WACrBC,KAAM,cAEFC,EAAMC,gBAAM,CAChBC,QAPc,0BAQdC,MAAO,CAACT,QAAOU,OAAQ,SAMZC,EAAuB,SAAArK,GAAkB,IAAhByC,EAAgBzC,EAAhByC,WACpC,MAAO,CACLiB,IAAKjB,EAAa,OAClBmB,IAAKnB,EAAa,OAClBoB,IAAKpB,EAAa,OAClBkB,IAAKlB,EAAa,OAClBqB,GAAIrB,EAAa,MACjB6H,GAAI7H,EAAa,MACjB8H,GAAI9H,EAAa,MACjBwB,KAAM,OACND,IAAK,MACLwG,IAAK/H,EAAa,OAClBgI,KAAMhI,EAAa,QACnBiI,IAAKjI,EAAa,OAClBkI,SAAUlI,EAAa,UACvBmI,SAAUnI,EAAa,UACvBoI,SAAUpI,EAAa,UACvBqI,SAAUrI,EAAa,YAIpB,SAAesI,EAAtB9I,GAAA,OAAA+I,EAAA7I,MAAAC,KAAAC,sDAAO,SAAAiC,EAAAmB,GAAA,IAAAjD,EAAAC,EAAAC,EAAAuI,EAAAjI,EAAAkI,EAAAC,EAAA,OAAAhI,EAAAC,EAAAC,KAAA,SAAAoB,GAAA,cAAAA,EAAAlB,KAAAkB,EAAAjB,MAAA,cAAuChB,EAAvCiD,EAAuCjD,SAAUC,EAAjDgD,EAAiDhD,WAClDC,EAAY,GACVuI,EAAwBZ,EAAqB,CAAC5H,eAC9CO,EAAc9C,OAAOG,KAAK4K,GAC1BC,EAAsBlI,EAAY1C,IAAI,SAAAiE,GAC1C,IAAMoB,EAAasF,EAAsB1G,GAEzC,OAAO6G,EAAc,CAAC5I,SADJ,CAAC,OAAO,OAAOkC,SAASH,GAAc,gBAAkB/B,EAC/BmD,iBAPxClB,EAAAjB,KAAA,EASuByB,QAAQC,IAAIgG,GATnC,cASCC,EATD1G,EAAAU,KAULnC,EAAYoC,QAAQ,SAACb,EAAYc,GAC/B3C,EAAU6B,GAAc4G,EAAc9F,KAXnCZ,EAAAE,OAAA,SAaEjC,GAbF,yBAAA+B,EAAAM,SAAAT,EAAAlC,gCAgBA,SAAegJ,EAAtB9F,GAAA,OAAA+F,EAAAlJ,MAAAC,KAAAC,sDAAO,SAAAC,EAAA3B,GAAA,IAAA6B,EAAAmD,EAAA2F,EAAAzF,EAAA,OAAA1C,EAAAC,EAAAC,KAAA,SAAAC,GAAA,cAAAA,EAAAC,KAAAD,EAAAE,MAAA,cAA8BhB,EAA9B7B,EAA8B6B,SAAUmD,EAAxChF,EAAwCgF,WAAxCrC,EAAAE,KAAA,EACc+H,EAAoB,CAAC/I,WAAUmD,aAAYqD,KAAM,kBAD/D,cACCsC,EADDhI,EAAA6B,KAECU,EAAQyF,EAAQE,IAAKC,cAAcH,GAAMnF,SAAW,KAFrD7C,EAAAqB,OAAA,SAGEkB,GAHF,wBAAAvC,EAAAyB,SAAAzC,EAAAF,gCAOA,SAAemJ,EAAtBnF,GAAA,OAAAsF,EAAAvJ,MAAAC,KAAAC,sDAAO,SAAAmD,EAAAe,GAAA,IAAA/D,EAAAmD,EAAAqD,EAAA2C,EAAAC,EAAAC,EAAAjL,EAAA,OAAAuC,EAAAC,EAAAC,KAAA,SAAAyC,GAAA,cAAAA,EAAAvC,KAAAuC,EAAAtC,MAAA,cAAoChB,EAApC+D,EAAoC/D,SAAUmD,EAA9CY,EAA8CZ,WAAYqD,EAA1DzC,EAA0DyC,KAA1D2C,EAAApF,EAAgEqF,cAAhE,IAAAD,EAAuE,SAAvEA,EAAA7F,EAAAtC,KAAA,EACoBsI,EAAiB,CAACtJ,WAAUmD,eADhD,WAAAG,EAAAX,KAAA,CAAAW,EAAAtC,KAAA,gBAGGqI,EAAME,IAAKC,KAAKxJ,EAAUmD,EAAY,aAAciG,EAAQ5C,GAH/DlD,EAAAvC,KAAA,EAAAuC,EAAAtC,KAAA,EAKkByI,EAAI,CAACJ,QALvB,cAKKjL,EALLkF,EAAAX,KAAAW,EAAAnB,OAAA,SAMM/D,GANN,eAAAkF,EAAAvC,KAAA,GAAAuC,EAAAoG,GAAApG,EAAA,SAAAA,EAAAnB,OAAA,SASM,MATN,QAAAmB,EAAAtC,KAAA,wBAAAsC,EAAAnB,OAAA,SAYI,MAZJ,yBAAAmB,EAAAf,SAAAS,EAAApD,KAAA,oCAeP,IAAM+J,EAAU,SAET,SAAeC,EAAtBC,GAAA,OAAAC,EAAAnK,MAAAC,KAAAC,sDAAO,SAAAiE,EAAA/E,GAAA,IAAAiB,EAAAqJ,EAAAU,EAAAC,EAAA,OAAArJ,EAAAC,EAAAC,KAAA,SAAAoD,GAAA,cAAAA,EAAAlD,KAAAkD,EAAAjD,MAAA,cAAuBhB,EAAvBjB,EAAuBiB,SACtBqJ,EAAME,IAAKC,KAAKG,EAAS,QAAS3J,GADnCiE,EAAAjD,KAAA,EAEcyI,EAAI,CAACJ,QAFnB,cAECU,EAFD9F,EAAAtB,KAGMqH,EAAOD,EAAXxL,GAHF0F,EAAA9B,OAAA,SAIE6H,GAJF,wBAAA/F,EAAA1B,SAAAuB,EAAAlE,gCAMA,SAAe0J,EAAtBW,GAAA,OAAAC,EAAAvK,MAAAC,KAAAC,sDAAO,SAAAsK,EAAAC,GAAA,IAAApK,EAAAmD,EAAA6G,EAAAK,EAAAhB,EAAA/C,EAAAgE,EAAAC,EAAA,OAAA5J,EAAAC,EAAAC,KAAA,SAAA2J,GAAA,cAAAA,EAAAzJ,KAAAyJ,EAAAxJ,MAAA,cAAiChB,EAAjCoK,EAAiCpK,SAAUmD,EAA3CiH,EAA2CjH,WAA3CqH,EAAAxJ,KAAA,EACa4I,EAAO,CAAC5J,aADrB,cACCgK,EADDQ,EAAA7H,KAEC0H,EAFD,KAAAI,OAEctH,EAFd,SAAAsH,OAEgCT,GAC/BX,EAAME,IAAKC,KAAKG,EAAS,QAAnB,UAAAc,OAAsCJ,IAH7CG,EAAAxJ,KAAA,EAIuByI,EAAI,CAACJ,QAJ5B,cAAA/C,EAAAkE,EAAA7H,KAIQ2H,EAJRhE,EAIElI,KACDmM,EAAOD,EAAMjM,OAAO,SAAAkM,GAAI,OAAIA,EAAKhD,OAASpE,IAAY,GALvDqH,EAAArI,OAAA,WAMIoI,GANJ,yBAAAC,EAAAjI,SAAA4H,EAAAvK,yCAQQ6J,+EAAf,SAAAiB,EAAAvG,GAAA,IAAAkF,EAAA3C,EAAAtI,EAAA,OAAAuC,EAAAC,EAAAC,KAAA,SAAA8J,GAAA,cAAAA,EAAA5J,KAAA4J,EAAA3J,MAAA,cAAoBqI,EAApBlF,EAAoBkF,IAApBsB,EAAA3J,KAAA,EACuBwG,EAAIiC,IAAIJ,GAD/B,cAAA3C,EAAAiE,EAAAhI,KACSvE,EADTsI,EACStI,KADTuM,EAAAxI,OAAA,SAES/D,GAFT,wBAAAuM,EAAApI,SAAAmI,EAAA9K,gCAKO,IAAMgL,EAAO,SAAAnF,GAAkB,IAAhBoF,EAAgBpF,EAAhBoF,IAAKC,EAAWrF,EAAXqF,MAC1B,OAAOC,IAAaC,IAAIH,EAAKC,IAGjBG,EAAO,SAAAlF,GAAyB,IACvC+E,EADgBD,EAAuB9E,EAAvB8E,IAAKK,EAAkBnF,EAAlBmF,aAEzB,IACEJ,EAAQC,IAAatB,IAAIoB,GACzB,MAAA3M,GACA4M,EAAQI,EAEV,OAAOJ,GAASI,GAGLC,EAAa,SAAbA,EAAchG,GAKzB,OAJAzH,OAAOG,KAAKsH,GAAQvC,QAAQ,SAAAiI,GAC1B,IAAMC,EAAQ3F,EAAO0F,GACjBC,GAA0B,kBAAVA,GAAoBK,EAAWL,KAE9CpN,OAAO0N,OAAOjG,2oOC9CRkG,uBApBA,SAAAC,GAAK,MAAK,CACvBC,MAAO,CACLC,MAAO,OACPC,gBAAiB,UACjBC,UAAW,SACXC,UAAW,+GAIbC,QAAS,CACPC,OAAQ,OACRC,QAAS,cACTC,QAAS,SAEXC,KAAM,CACJC,OAAQ,QACRC,WAAY,YAIkB,CAAEC,WAAW,GAAhCd,CA/DG,SAAA7N,GAQZ,IAPJ4O,EAOI5O,EAPJ4O,QAEAlM,GAKI1C,EANJ6O,gBAMI7O,EALJ0C,WAKIH,EAAAvC,EAJJyD,QACEc,EAGEhC,EAHFgC,WACAtD,EAEEsB,EAFFtB,UAIE6N,EAAW,GACXzN,EAAU,GACd,GAAIqB,EAAU6B,IAAetD,EAAW,KAC9BhB,EAAWgB,EAAXhB,OACRoB,EAAUJ,EAAUI,QAFkB,IAG/BqE,EAAYhD,EAAU6B,GAAtBmB,SACDyD,EAAU4F,IAAiC,CAACrJ,WAAUzF,WAC5D6O,EAAW3F,EAAUA,EAAQ6F,MAAQ,GAEvC,IAAMC,EAAsBH,EAAWI,EAAA9L,EAAA+L,cAAA,uBAAmBL,EAAnB,IAA8BzN,GAAkB6N,EAAA9L,EAAA+L,cAAA,aAEvF,OACED,EAAA9L,EAAA+L,cAACC,EAAAhM,EAAD,KACE8L,EAAA9L,EAAA+L,cAAA,OAAKE,UAAWT,EAAQb,OACtBmB,EAAA9L,EAAA+L,cAAA,OAAKE,UAAWT,EAAQR,SACtBc,EAAA9L,EAAA+L,cAAA,OAAKE,UAAWT,EAAQJ,KAAMc,IAAI,aAAaC,IAAI,kBACnDL,EAAA9L,EAAA+L,cAACK,EAAA,WAAD,CAAYC,QAAQ,KAAKzB,MAAM,UAAUqB,UAAWT,EAAQc,KAAMC,QAAM,GACrEV,QCpCEW,6MCGbC,MAAQ,2EAGC,IACAC,EAAS1N,KAAT0N,MACP,OACEZ,EAAA9L,EAAA+L,cAACY,EACKD,UARYE,IAAMC,WCMxBC,EAAUC,eAAK,kBAAMC,EAAAC,EAAA,GAAAC,KAAAF,EAAAG,KAAA,cACrBC,EAAYL,eAAK,kBAAMlL,QAAAC,IAAA,CAAAkL,EAAAC,EAAA,IAAAD,EAAAC,EAAA,KAAAC,KAAAF,EAAAG,KAAA,cACvBE,EAAmBN,eAAK,kBAAMlL,QAAAC,IAAA,CAAAkL,EAAAC,EAAA,GAAAD,EAAAC,EAAA,GAAAD,EAAAC,EAAA,IAAAD,EAAAC,EAAA,KAAAC,KAAAF,EAAAG,KAAA,cAC9BG,EAAYP,eAAK,kBAAMlL,QAAAC,IAAA,CAAAkL,EAAAC,EAAA,GAAAD,EAAAC,EAAA,IAAAD,EAAAC,EAAA,KAAAC,KAAAF,EAAAG,KAAA,cAmFd1C,uBAVA,SAAAC,GAAK,MAAK,CACvB6C,KAAM,CACJC,MAAO,QAETC,SAAU,CACRxC,OAAQ,OACRC,QAAS,WAIET,CAjFU,SAAA7N,GAOnB,IANJ4O,EAMI5O,EANJ4O,QACAlM,EAKI1C,EALJ0C,UACAoO,EAII9Q,EAJJ8Q,QACArN,EAGIzD,EAHJyD,QACAsN,EAEI/Q,EAFJ+Q,WAGMC,GADFhR,EADJgP,MAGEE,EAAA9L,EAAA+L,cAACe,EAAD,CACEzM,QAASA,EACTsN,WAAYA,EACZrO,UAAWA,EACXuO,SAAUH,KAGRnO,EACJuM,EAAA9L,EAAA+L,cAACqB,EAAD,CACE/M,QAASA,EACTsN,WAAYA,EACZrO,UAAWA,IAGTwO,EACJhC,EAAA9L,EAAA+L,cAACuB,EAAD,CACEjN,QAASA,EACTsN,WAAYA,EACZrO,UAAWA,IAGTyO,EACJjC,EAAA9L,EAAA+L,cAACsB,EAAD,CACEhN,QAASA,EACTsN,WAAYA,EACZrO,UAAWA,IAGT0O,EACJlC,EAAA9L,EAAA+L,cAACK,EAAA,iBAAD,CAAkBH,UAAWT,EAAQiC,SAAU7C,MAAM,YAAYqD,eAAa,IAG5EC,EAAYF,EACVG,EAAsC,YAAjB9N,EAAQ+N,KACnC,GAAItR,OAAOG,KAAKqC,GAAW4G,OAAS,EAAG,CACrC,IAAMmI,GAAwBhO,EAAQc,WAChCmN,EAAuB,CAAC,MAAM,MAAM,OAAOhN,SAASjB,EAAQc,YAC5DoN,EAAqD,QAAvBlO,EAAQc,WAExCgN,EAAmBD,EAAYN,EAC1BS,EAAqBH,EAAY3O,EACjC+O,EAAqBJ,EAAYJ,EACjCS,IAA4BL,EAAYH,GAGnD,OACEjC,EAAA9L,EAAA+L,cAAA,OAAKE,UAAWT,EAAQ+B,MACtBzB,EAAA9L,EAAA+L,cAACyC,EAAA,SAAD,CAAUC,SAAUT,GACjBE,MCtEM1B,6MCKbC,MAAQ,uFAGa,IACZ5O,EAAamB,KAAK0N,MAAMrM,QAAxBxC,UACP,GAAIA,EAAW,KACNhB,EAA0BgB,EAA1BhB,OAAQoB,EAAkBJ,EAAlBI,QAASG,EAASP,EAATO,MAClBT,EAAE,GAAAkM,OAAMhN,EAAN,KAAAgN,OAAgB5L,EAAhB,KAAA4L,OAA2BzL,GAC7BsQ,EAAUC,SAASC,eAAejR,GACpC+Q,GACFA,EAAQG,eAAe,CACrBC,SAAU,SACVC,MAAO,4CAOb,IAAMrC,EAAQ1N,KAAK0N,MACnB,OACEZ,EAAA9L,EAAA+L,cAACiD,EACKtC,UAvBYE,IAAMC,4BCcxBoC,6MACJC,aAAe,SAACC,EAAOjF,GACrB,IAAI7J,EAAOvD,OAAAsS,EAAA,EAAAtS,CAAA,GAAOuS,EAAK3C,MAAMrM,SADEgB,EAM3BhB,EAHFjB,EAH6BiC,EAG7BjC,SACAC,EAJ6BgC,EAI7BhC,WACAxB,EAL6BwD,EAK7BxD,UAEF,OAAQqM,GACN,KAAK,EACH7J,EAAUgP,EAAKC,kBACf,MACF,KAAK,EACHjP,EAAU,CAACjB,WAAUC,aAAY+O,KAAM,UAAWvQ,UAAW,IAC7D,MACF,KAAK,EACHwC,EAAU,CAACjB,WAAUC,aAAYxB,UAAW,IAC5C,MACF,KAAK,EACHwC,EAAQxC,UAAY,GACpB,MACF,KAAK,EACCA,IAAWwC,EAAQxC,UAAY,CAAChB,OAAQgB,EAAUhB,SACtD,MACF,KAAK,EACHwD,EAAUgP,EAAKE,cAKnBF,EAAK3C,MAAMiB,WAAWtN,MAGxBiP,gBAAkB,WAChB,IAAIzR,EAASf,OAAAsS,EAAA,EAAAtS,CAAA,GAAOuS,EAAK3C,MAAMrM,QAAQxC,WAClCI,EAAWJ,EAAXI,QAML,OALIA,EAAU,IACZJ,EAAUI,QAAUA,EAAU,EAC9BJ,EAAUO,WAAQoR,GAEP1S,OAAAsS,EAAA,EAAAtS,CAAA,GAAOuS,EAAK3C,MAAMrM,QAAlB,CAA2BxC,iBAI1C0R,YAAc,WACZ,IAAI1R,EAASf,OAAAsS,EAAA,EAAAtS,CAAA,GAAOuS,EAAK3C,MAAMrM,QAAQxC,WAClChB,EAAmBgB,EAAnBhB,OAAQoB,EAAWJ,EAAXI,QAOb,OALIA,EADiBtB,YAAe,CAACE,WAASqJ,SAE5CrI,EAAUI,QAAUA,EAAU,EAC9BJ,EAAUO,WAAQoR,GAEP1S,OAAAsS,EAAA,EAAAtS,CAAA,GAAOuS,EAAK3C,MAAMrM,QAAlB,CAA2BxC,uFAIjC,IAQHqM,EARGuF,EACsBzQ,KAAK0N,MAA1BlB,EADDiE,EACCjE,QAASnL,EADVoP,EACUpP,QAEX8N,EAAsC,YAAjB9N,EAAQ+N,KAC7BsB,GAAuBrP,EAAQc,WAC/BwO,IAA0C,QAAvBtP,EAAQc,eAA2Bd,EAAQxC,WAAawC,EAAQxC,UAAUhB,QAC7F+S,IAAsBvP,EAAQxC,WAAawC,EAAQxC,UAAUI,SAQnE,OALIkQ,EAAqBjE,EAAQ,EACxBwF,EAAsBxF,EAAQ,EAC9ByF,EAAiBzF,EAAQ,EACzB0F,IAAoB1F,EAAQ,GAGnC4B,EAAA9L,EAAA+L,cAACK,EAAA,MAAD,CAAOH,UAAWT,EAAQ+B,MACxBzB,EAAA9L,EAAA+L,cAACK,EAAA,iBAAD,CACElC,MAAOA,EACP2F,SAAU7Q,KAAKkQ,aACfY,YAAY,EACZ7D,UAAWT,EAAQuE,kBAEnBjE,EAAA9L,EAAA+L,cAACK,EAAA,uBAAD,CACEH,UAAWT,EAAQwE,OACnBC,KAAMnE,EAAA9L,EAAA+L,cAACmE,EAAA,EAAD,QAERpE,EAAA9L,EAAA+L,cAACK,EAAA,uBAAD,CACEH,UAAWT,EAAQwE,OACnBG,MAAM,UACNF,KAAMnE,EAAA9L,EAAA+L,cAACmE,EAAA,EAAD,QAERpE,EAAA9L,EAAA+L,cAACK,EAAA,uBAAD,CACEH,UAAWT,EAAQwE,OACnBG,MAAM,YACNF,KAAMnE,EAAA9L,EAAA+L,cAACmE,EAAA,EAAD,QAERpE,EAAA9L,EAAA+L,cAACK,EAAA,uBAAD,CACEH,UAAWT,EAAQwE,OACnBG,MAAM,QACNF,KAAMnE,EAAA9L,EAAA+L,cAACmE,EAAA,EAAD,QAERpE,EAAA9L,EAAA+L,cAACK,EAAA,uBAAD,CACEH,UAAWT,EAAQwE,OACnBG,MAAM,WACNF,KAAMnE,EAAA9L,EAAA+L,cAACmE,EAAA,EAAD,QAERpE,EAAA9L,EAAA+L,cAACK,EAAA,uBAAD,CACEH,UAAWT,EAAQwE,OACnBC,KAAMnE,EAAA9L,EAAA+L,cAACmE,EAAA,EAAD,iBAxGetD,IAAMC,WClBxBL,EDuJA/B,qBAfA,SAAAC,GAAK,MAAK,CACvB6C,KAAM,CACJC,MAAO,QAETuC,iBAAkB,CAChB9E,OAAQ,SACRmF,SAAU,QAEZJ,OAAQ,CACNK,YAAa,IACbC,aAAc,IACdC,SAAU,UAIoB,CAAEhF,WAAW,GAAhCd,CAAwCwE,GE/IjDvE,EAAQ8F,yBAAe,CAC3BC,WAAY,CACVC,iBAAiB,GAEnBC,QAAS,CACPC,QAAS,CACPC,MAAO,UACPC,KAAM,UACNC,KAAM,UACNC,aAAc,WA0ELvG,uBAzBA,SAAAC,GAAK,MAAK,CACvB6C,KAAM,CACJ0D,SAAU,GAEZC,SAAU,CACRC,OAAQ,EACRC,SAAU,WACVlG,QAAS,OACTsC,MAAO,QAETsD,KAAM,CACJtD,MAAO,OACP+C,SAAU,QAEZc,UAAW,CACTlG,QAAS,qBAEXmG,UAAW,CACT9D,MAAO,OACP4D,SAAU,QACVG,OAAQ,EACRJ,OAAQ,MAIG1G,CArEU,SAAA7N,GAAA,IACvB4O,EADuB5O,EACvB4O,QACAnL,EAFuBzD,EAEvByD,QACAsN,EAHuB/Q,EAGvB+Q,WACAD,EAJuB9Q,EAIvB8Q,QACApO,EALuB1C,EAKvB0C,UALuB,OAOzBwM,EAAA9L,EAAA+L,cAACyF,EAAA,iBAAD,CAAkB9G,MAAOA,GACvBoB,EAAA9L,EAAA+L,cAAA,OAAKE,UAAWT,EAAQ+B,MACtBzB,EAAA9L,EAAA+L,cAAA,OAAKE,UAAWT,EAAQ0F,UACtBpF,EAAA9L,EAAA+L,cAAA,QAAME,UAAWT,EAAQsF,MACvBhF,EAAA9L,EAAA+L,cAAC0F,EAAD,CACEhG,gBAAgB,gBAChBpL,QAASA,EACTsN,WAAYA,EACZrO,UAAWA,IAEbwM,EAAA9L,EAAA+L,cAAA,OAAKE,UAAWT,EAAQ6F,WACtBvF,EAAA9L,EAAA+L,cAAC2F,EAAD,CACErR,QAASA,EACTsN,WAAYA,EACZD,QAASA,EACTpO,UAAWA,MAIjBwM,EAAA9L,EAAA+L,cAAA,OAAKE,UAAWT,EAAQ8F,WACtBxF,EAAA9L,EAAA+L,cAAC4F,EAAD,CACEtR,QAASA,EACTsN,WAAYA,kBC5ChBiE,EAAY,8BA4JHpF,6MAzJbC,MAAQ,CACNnN,UAAW,GACXe,QAASgP,EAAKwC,iBACdnE,QAAS,oFAIT,IAAMoE,EAAY,IAAIC,gBAAgBC,OAAOC,SAASC,QAOtD,MAAO,CACL9S,SAPe0S,EAAUjJ,IAAI,aAAe,gBAQ5CxJ,WAPiByS,EAAUjJ,IAAI,eAAiB,KAQhD1H,WAPiB2Q,EAAUjJ,IAAI,cAQ/BhL,UAAW,CACThB,OARWiV,EAAUjJ,IAAI,UASzB5K,QARY6T,EAAUjJ,IAAI,WAS1BzK,MARU0T,EAAUjJ,IAAI,qDAaZxH,EAAU8Q,GAC1B,IAAIzE,EAAU,GACVyE,IAAUzE,EAAO5Q,OAAAsV,EAAA,EAAAtV,CAAOqV,IAC5B,IAAME,EAAa3O,KAAKE,UAAUvC,GAGlC,KADiBgR,IADE3O,KAAKE,UAAU8J,EAAQ,KAE/B,CACT,IAAMrN,EAAUqD,KAAKC,MAAM0O,GAC3B3E,EAAQ4E,QAAQjS,GAGlB,OAAOqN,wCAIsB,IAAnBA,EAAmB9Q,EAAnB8Q,QAASrN,EAAUzD,EAAVyD,QAKnB,OAJIA,EAAQxC,WAAawC,EAAQxC,UAAUI,UACzCyP,EAAU1O,KAAKuT,kBAAkBlS,EAASqN,GAC1C8E,IAAa,CAAEvI,IAAG,GAAAJ,OAAK+H,EAAL,WAAyB1H,MAAOwD,KAE7CA,2KAIerN,cACiCrB,KAAKyN,MAA5CgG,IAATpS,QAAgCqS,IAAXpT,UACxBA,iBAAgBoT,GACdC,EAAmBF,EAAWpT,aAAegB,EAAQhB,WACrDuT,EAAmBH,EAAWrT,WAAaiB,EAAQjB,UACrDuT,IAAmBC,kCACHJ,IAA+BnS,UAAjDf,yCAEKA,kJAG+B,IAAtBA,EAAsB/B,EAAtB+B,UAAWe,EAAW9C,EAAX8C,QACpBc,EAAyBd,EAAzBc,WAAYtD,EAAawC,EAAbxC,UACbgV,IAAoBvT,KAAeA,EAAU6B,GAC7C2R,EAAiBC,IAAmC,CAAClV,cAE3D,OADegV,GAAkBC,6EAIlBzR,wFACX2R,EAAW,GACGC,EAAc5R,EAAzBxD,UACDA,EAAYoV,EAAUnW,OAAAsS,EAAA,EAAAtS,CAAA,GAAOmW,GAAc,GAC3C5S,iBAAcgB,GAAUxD,gBAEJwC,EAAQxC,YAAcwC,EAAQc,cAEtD6R,EAAS3S,QAAUA,EACnB2R,OAAOkB,SAAS,EAAE,IAGO,QAAvB7S,EAAQc,aAAsBd,EAAQxC,UAAUhB,OAAS,gBAErCmC,KAAKmU,iBAAiB,CAAC9S,mBAAzCf,SACN0T,EAAS1T,UAAYA,EACAN,KAAKoU,gBAAgB,CAAC9T,YAAWe,cAGpD2S,EAAS3S,QAAUA,EACnB2S,EAAStF,QAAU1O,KAAKqU,WAAW,CAAC3F,QAAS1O,KAAKyN,MAAMiB,QAASrN,YACjE2R,OAAOkB,SAAS,EAAE,IAGpBlU,KAAKsU,SAASN,GACdhU,KAAKuU,YAAYlT,GAEjBmS,IAAa,CAAEvI,IAAG,GAAAJ,OAAK+H,EAAL,WAAyB1H,MAAO7J,+IAGiC,IAAxEjB,EAAwE+D,EAAxE/D,SAAUC,EAA8D8D,EAA9D9D,WAAY8B,EAAkDgC,EAAlDhC,WAAkDqS,EAAArQ,EAAtCtF,UAAYhB,EAA0B2W,EAA1B3W,OAAQoB,EAAkBuV,EAAlBvV,QAASG,EAASoV,EAATpV,MACpEqV,EAAYrU,EAAQ,YAAAyK,OAAezK,EAAf,KAA6B,GACjDsU,EAAcrU,EAAU,cAAAwK,OAAiBxK,EAAjB,KAAiC,GACzDsU,EAAcxS,EAAU,cAAA0I,OAAiB1I,EAAjB,KAAiC,GACzDyS,EAAU/W,EAAM,UAAAgN,OAAahN,EAAb,KAAyB,GACzCgX,EAAW5V,EAAO,WAAA4L,OAAc5L,EAAd,KAA2B,GAC7C6V,EAAS1V,EAAK,SAAAyL,OAAYzL,GAAU,GACrCqL,EAAK,KAAAI,OAAQ4J,GAAR5J,OAAoB6J,GAApB7J,OAAkC8J,GAAlC9J,OAAgD+J,GAAhD/J,OAA0DgK,GAA1DhK,OAAqEiK,GAChF9B,OAAOtE,QAAQqG,UAAU,KAAM,KAAMtK,gDAIpC,IAAIuJ,EAAW,GACTnB,EAAiB7S,KAAK6S,iBACxBxR,EAAUmS,IAAa,CACzBvI,IAAG,GAAAJ,OAAK+H,EAAL,WACHtH,aAAcuH,IAEZA,EAAezS,WAAaiB,EAAQjB,WACtCiB,EAAUwR,GAEZmB,EAAS3S,QAAUA,EACnB2S,EAAStF,QAAU8E,IAAa,CAC9BvI,IAAG,GAAAJ,OAAK+H,EAAL,WACHtH,aAAc,KAEhBtL,KAAKsU,SAASN,0KAIVA,EAAW,GACR3S,EAAWrB,KAAKyN,MAAhBpM,iBACiBmS,IAA+BnS,UAAjDf,SACA0U,EAAehV,KAAKoU,gBAAgB,CAAC9T,YAAWe,YACtD2S,EAAS1T,UAAYA,EACrB0T,EAAS3S,QAAU2T,EAAe3T,EAAUrB,KAAK6S,iBACjD7S,KAAKsU,SAASN,sIAGP,IAAAiB,EAC+BjV,KAAKyN,MAApCpM,EADA4T,EACA5T,QAASqN,EADTuG,EACSvG,QAASpO,EADlB2U,EACkB3U,UACnB+B,EAAWhB,EAAUmS,IAAmBnS,GAAWA,EACnD6T,EAAa5U,EAAYkT,IAAmBlT,GAAaA,EAC/D,OACEwM,EAAA9L,EAAA+L,cAACoI,EAAD,CACE9T,QAASgB,EACTqM,QAASA,EACTC,WAAY3O,KAAK2O,WAAWR,KAAKnO,MACjCM,UAAW4U,WApJKtH,IAAMC,WCEVuH,QACW,cAA7BpC,OAAOC,SAASoC,UAEe,UAA7BrC,OAAOC,SAASoC,UAEhBrC,OAAOC,SAASoC,SAASC,MACvB,2DCZNC,IAASC,OAAO1I,EAAA9L,EAAA+L,cAAC0I,EAAD,MAAe9F,SAASC,eAAe,SDuHjD,kBAAmB8F,WACrBA,UAAUC,cAAcC,MAAM1H,KAAK,SAAA2H,GACjCA,EAAaC","file":"static/js/main.a46d3aae.chunk.js","sourcesContent":["import data from './chaptersAndVerses.json';\n\nexport const chaptersInBook = ({bookId}) => {\n  try {\n    let chapters;\n    if (bookId === 'obs') {\n      chapters = [...Array(50).keys()].map(i=>i+1);\n    } else {\n      chapters = bookData({bookId}).chapters;\n    }\n    return chapters;\n  } catch {\n    return null;\n  }\n};\n\nexport const versesInChapter = ({bookId, chapter}) => {\n  const verses = chaptersInBook({bookId})[chapter - 1];\n  return verses;\n};\n\nexport const bookData = ({bookId}) => {\n  const _bookData = data.filter(row => row.id === bookId)[0];\n  return _bookData;\n};\n\nexport const testament = ({bookId}) => {\n  const _testament = bookData({bookId}).testament;\n  return _testament;\n};\n\nexport const validateBookId = (reference) => {\n  let valid;\n  if (reference.bookId === 'obs') {\n    valid = true;\n  } else if (reference.bookId && !!bookData(reference)) {\n    valid = true;\n  }\n  return valid;\n}\n\nexport const validateChapter = (reference) => {\n  const dependencies = ( validateBookId(reference) );\n  const chapters = chaptersInBook(reference);\n  const valid = (dependencies && !!chapters[reference.chapter - 1]);\n  return valid;\n}\n\nexport const validateVerse = (reference) => {\n  const dependencies = (validateBookId(reference) && validateChapter(reference));\n  const chapters = chaptersInBook(reference);\n  const verseCount = chapters[reference.chapter];\n  const inRange = (verseCount && reference.verse <= verseCount);\n  return (dependencies && inRange);\n};\n\nexport const validateReference = ({reference}) => {\n  let valid = false;\n  const {bookId, chapter, verse} = reference;\n  const blankReference = (!bookId && !chapter && !verse);\n  const validBookId = validateBookId(reference);\n  const validChapter = validateChapter(reference);\n  const validVerse = (!!verse) ? validateVerse(reference) : true;\n  if (blankReference) {\n    valid = true;\n  } else if (validBookId && !chapter && !verse) {\n    valid = true;\n  } else if (validBookId && validChapter && !verse) {\n    valid = true;\n  } else if (validBookId && validChapter && validVerse) {\n    valid = true;\n  }\n  return valid;\n};\n","import usfmjs from 'usfm-js';\n\n// Purpose: application wide\n// Scope: limited to resource files and parsing\n// Notes: pass in manifests don't fetch them\n\nimport * as ApplicationHelpers from '../../helpers';\n\nexport async function fetchResources({\n  context: {\n    username,\n    languageId,\n    reference: {\n      bookId,\n    },\n  },\n  manifests,\n}) {\n  let resources = {\n    ult: null,\n    ust: null,\n    ulb: null,\n    irv: null,\n    tn: null,\n    original: null,\n  };\n  const { uhb: uhbManifest, ugnt: ugntManifest} = manifests;\n  const testament = whichTestament({bookId, uhbManifest, ugntManifest})\n  const originalManifest = (testament === 'old') ? uhbManifest : ugntManifest;\n\n  const resourceIds = ['ult', 'ust', 'ulb', 'irv', 'tn', 'original'];\n  const promises = resourceIds.map(async (resourceId) => {\n    let manifest;\n    if (['ult','ust', 'ulb', 'irv'].includes(resourceId) && manifests[resourceId]) {\n      manifest = manifests[resourceId];\n      return fetchBook({username, languageId, resourceId, bookId, manifest});\n    }\n    if (resourceId === 'tn' && manifests[resourceId]) {\n      manifest = manifests[resourceId];\n      return translationNotes({username, languageId, bookId, manifest});\n    }\n    if (resourceId === 'original') {\n      return fetchOriginalBook({username, languageId, bookId, uhbManifest, ugntManifest});\n    }\n  });\n  const resourcesArray = await Promise.all(promises);\n  resourceIds.forEach((resourceId, index) => {\n    const data = resourcesArray[index];\n    const manifest = (resourceId === 'original') ? originalManifest : manifests[resourceId];\n    resources[resourceId] = {\n      manifest,\n      data\n    };\n  });\n  return resources;\n};\n\nexport async function fetchBook({username, languageId, resourceId, bookId, manifest}) {\n  const {projects} = manifest;\n  if (!projectByBookId({projects, bookId})) return null;\n  const repository = ApplicationHelpers.resourceRepositories({languageId})[resourceId];\n  const usfm = await fetchFileByBookId({username, repository, bookId, manifest});\n  const json = usfmjs.toJSON(usfm);\n  return json.chapters;\n};\n\nexport const whichTestament = ({bookId, uhbManifest, ugntManifest}) => {\n  let testament;\n  const uhbProject = projectByBookId({projects: uhbManifest.projects, bookId});\n  const ugntProject = projectByBookId({projects: ugntManifest.projects, bookId});\n  if (uhbProject) testament = 'old';\n  if (ugntProject) testament = 'new';\n  return testament;\n}\n\nexport async function fetchOriginalBook({username, languageId, bookId, uhbManifest, ugntManifest}) {\n  let manifest, repository;\n  const testament = whichTestament({bookId, uhbManifest, ugntManifest});\n  const repositories = ApplicationHelpers.resourceRepositories({languageId});\n  if (testament === 'old') {\n    manifest = uhbManifest;\n    repository = repositories.uhb;\n  };\n  if (testament === 'new') {\n    manifest = ugntManifest;\n    repository = repositories.ugnt;\n  };\n  const usfm = await fetchFileByBookId({username: 'unfoldingword', repository, bookId, manifest});\n  const json = usfmjs.toJSON(usfm);\n  return json.chapters;\n};\n\nexport async function fetchUGNTBook({username, languageId, bookId, manifest}) {\n  const repository = ApplicationHelpers.resourceRepositories({languageId}).ugnt;\n  const usfm = await fetchFileByBookId({username, repository, bookId, manifest});\n  const json = usfmjs.toJSON(usfm);\n  return json;\n};\n\nexport async function fetchUHBBook({username, languageId, bookId, manifest}) {\n  const repository = ApplicationHelpers.resourceRepositories({languageId}).uhb;\n  const usfm = await fetchFileByBookId({username, repository, bookId, manifest});\n  const json = usfmjs.toJSON(usfm);\n  return json;\n};\n\nexport const pivotTranslationNotes = ({tn}) => {\n  if (!tn) return {};\n  let translationNotesObject = {};\n  let array = JSON.parse(JSON.stringify(tn));\n  array.shift();\n  array.forEach(item => {\n    let [book, chapter, verse, id, support_reference, original_quote, occurrence, gl_quote, occurrence_note] = item;\n    if (book && chapter && verse) {\n      if (!translationNotesObject[chapter]) translationNotesObject[chapter] = {};\n      if (!translationNotesObject[chapter][verse]) translationNotesObject[chapter][verse] = [];\n      occurrence_note = (!!occurrence_note) ? occurrence_note.replace(/<br>/g,'\\n') : occurrence_note;\n      let object = {\n        id,\n        support_reference,\n        original_quote,\n        occurrence,\n        gl_quote,\n        occurrence_note,\n      };\n      translationNotesObject[chapter][verse].push(object);\n    }\n  });\n  return translationNotesObject\n}\n\nexport async function translationNotes({username, languageId, bookId, manifest}) {\n  const data = await fetchNotes({username, languageId, bookId, manifest});\n  return data;\n};\n\nexport async function fetchNotes({username, languageId, bookId, manifest}) {\n  const repository = ApplicationHelpers.resourceRepositories({languageId}).tn;\n  const tsv = await fetchFileByBookId({username, repository, bookId, manifest});\n  const data = tsvParse({tsv});\n  return data;\n};\n\nexport async function fetchFileByBookId({username, repository, bookId, manifest}) {\n  const {projects} = manifest;\n  let {path} = projectByBookId({projects, bookId});\n  path = path.replace(/^\\.\\//, '');\n  const data = await ApplicationHelpers.fetchFileFromServer({username, repository, path});\n  return data;\n};\n\nexport const projectByBookId = ({projects, bookId}) => {\n  const _projects = projects.filter(item => item.identifier === bookId);\n  let project;\n  if (_projects.length > 0) {\n    project = _projects[0];\n  }\n  return project;\n};\n\nexport const tsvParse = ({tsv}) => {\n  try {\n    return tsv.split('\\n').map(row => row.trim().split('\\t'));\n  } catch {\n    return null;\n  }\n};\n","import Path from 'path';\nimport YAML from 'yaml';\nimport localforage from 'localforage';\nimport localstorage from 'local-storage'\nimport { setup } from 'axios-cache-adapter';\n\nconst baseURL = \"https://git.door43.org/\";\n\nconst store = localforage.createInstance({\n  driver: [localforage.INDEXEDDB],\n  name: 'web-cache',\n});\nconst api = setup({\n  baseURL: baseURL,\n  cache: {store, maxAge: 1 * 24 * 60 * 60 * 1000},\n});\n\n// Purpose: application wide\n// Scope: limited to resource manifests and information\n\nexport const resourceRepositories = ({languageId}) => {\n  return {\n    ult: languageId + '_ult',\n    ulb: languageId + '_ulb',\n    irv: languageId + '_irv',\n    ust: languageId + '_ust',\n    tn: languageId + '_tn',\n    ta: languageId + '_ta',\n    tw: languageId + '_tw',\n    ugnt: 'UGNT',\n    uhb: 'UHB',\n    ugl: languageId + '_ugl',\n    uhal: languageId + '_uhal',\n    obs: languageId + '_obs',\n    'obs-tn': languageId + '_obs-tn',\n    'obs-tq': languageId + '_obs-tq',\n    'obs-sn': languageId + '_obs-sn',\n    'obs-sq': languageId + '_obs-sq',\n  };\n};\n\nexport async function fetchResourceManifests({username, languageId}) {\n  let manifests = {};\n  const _resourceRepositories = resourceRepositories({languageId});\n  const resourceIds = Object.keys(_resourceRepositories);\n  const resourceIdsPromises = resourceIds.map(resourceId => {\n    const repository = _resourceRepositories[resourceId];\n    const _username = ['ugnt','uhb'].includes(resourceId) ? 'unfoldingword' : username;\n    return fetchManifest({username: _username, repository})\n  });\n  const manifestArray = await Promise.all(resourceIdsPromises);\n  resourceIds.forEach((resourceId, index) => {\n    manifests[resourceId] = manifestArray[index];\n  });\n  return manifests;\n};\n\nexport async function fetchManifest({username, repository}) {\n  const yaml = await fetchFileFromServer({username, repository, path: 'manifest.yaml'});\n  const json = (yaml) ? YAML.parseDocument(yaml).toJSON() : null;\n  return json;\n};\n\n// https://git.door43.org/unfoldingword/en_ult/raw/branch/master/manifest.yaml\nexport async function fetchFileFromServer({username, repository, path, branch='master'}) {\n  const repoExists = await repositoryExists({username, repository});\n  if (repoExists) {\n    const uri = Path.join(username, repository, 'raw/branch', branch, path);\n    try {\n      const data = await get({uri});\n      return data;\n    }\n    catch(error) {\n      return null;\n    }\n  } else {\n    return null;\n  }\n};\nconst apiPath = 'api/v1'\n\nexport async function getUID({username}) {\n  const uri = Path.join(apiPath, 'users', username);\n  const user = await get({uri});\n  const {id: uid} = user;\n  return uid;\n}\nexport async function repositoryExists({username, repository}) {\n  const uid = await getUID({username});\n  const query = `q=${repository}&uid=${uid}`;\n  const uri = Path.join(apiPath, 'repos', `search?${query}`);\n  const {data: repos} = await get({uri});\n  const repo = repos.filter(repo => repo.name === repository)[0];\n  return !!repo;\n}\nasync function get({uri}) {\n  const {data} = await api.get(uri);\n  return data;\n};\n\nexport const save = ({key, value}) => {\n return localstorage.set(key, value);\n};\n\nexport const load = ({key, defaultValue}) => {\n  let value;\n  try {\n    value = localstorage.get(key);\n  } catch {\n    value = defaultValue;\n  }\n  return value || defaultValue;\n};\n\nexport const deepFreeze = (object) => {\n  Object.keys(object).forEach(key => {\n    const value = object[key];\n    if (value && typeof value === \"object\") deepFreeze(value);\n  });\n  return Object.freeze(object);\n}\n","import React from 'react'\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport Headroom from 'react-headroom';\nimport {\n  Typography,\n} from '@material-ui/core';\n\nimport * as ScriptureHelpers from '../Workspace/Scripture/helpers';\n\nconst Component = ({\n  classes,\n  applicationName,\n  manifests,\n  context: {\n    resourceId,\n    reference,\n  },\n}) => {\n\n  let bookName = '';\n  let chapter = '';\n  if (manifests[resourceId] && reference) {\n    const { bookId } = reference;\n    chapter = reference.chapter;\n    const {projects} = manifests[resourceId];\n    const project = ScriptureHelpers.projectByBookId({projects, bookId});\n    bookName = project ? project.title : '';\n  }\n  const referenceComponent = (bookName ? <span>&nbsp;&nbsp;{bookName} {chapter}</span> : <span />);\n\n  return (\n    <Headroom>\n      <div className={classes.paper}>\n        <div className={classes.toolbar}>\n          <img className={classes.logo} src=\"./logo.png\" alt=\"unfoldingWord\" />\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.coin} noWrap>\n            {referenceComponent}\n          </Typography>\n        </div>\n      </div>\n    </Headroom>\n  );\n}\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  manifests: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  projectName: PropTypes.string,\n};\n\nconst styles = theme => ({\n  paper: {\n    color: '#fff',\n    backgroundColor: '#31ADE3',\n    textAlign: 'center',\n    boxShadow: '0px 1px 5px 0px rgba(0, 0, 0, 0.2),' +\n               '0px 2px 2px 0px rgba(0, 0, 0, 0.14),' +\n               '0px 3px 1px -2px rgba(0, 0, 0, 0.12)',\n  },\n  toolbar: {\n    margin: 'auto',\n    display: 'inline-flex',\n    padding: '1em 0',\n  },\n  logo: {\n    height: '1.8em',\n    paddingTop: '0.25em',\n  },\n});\n\nexport default withStyles(styles, { withTheme: true })(Component);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport Component from './Component';\n\nclass Container extends React.Component {\n  state = {\n  };\n\n  render() {\n    const {props} = this;\n    return (\n      <Component\n        {...props}\n      />\n    );\n  };\n}\nexport default Container;\n","import React, {Suspense, lazy} from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  CircularProgress,\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nconst History = lazy(() => import('./History'));\nconst Resources = lazy(() => import('./Resources'));\nconst OpenBibleStories = lazy(() => import('./OpenBibleStories'));\nconst Scripture = lazy(() => import('./Scripture'));\n\nexport const Component = ({\n  classes,\n  manifests,\n  history,\n  context,\n  setContext,\n  title,\n}) => {\n  const historyComponent = (\n    <History\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n      contexts={history}\n    />\n  );\n  const resources = (\n    <Resources\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n    />\n  );\n  const scripture = (\n    <Scripture\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n    />\n  );\n  const openBibleStories = (\n    <OpenBibleStories\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n    />\n  );\n  const loadingComponent = (\n    <CircularProgress className={classes.progress} color=\"secondary\" disableShrink />\n  );\n\n  let component = loadingComponent;\n  const shouldShowHistory = (context.view === 'history');\n  if (Object.keys(manifests).length > 0) {\n    const shouldShowResources = (!context.resourceId);\n    const shouldShowScripture = (['ult','ulb','irv'].includes(context.resourceId));\n    const shouldShowOpenBibleStories = (context.resourceId === 'obs');\n\n    if (shouldShowHistory) component = historyComponent;\n    else if (shouldShowResources) component = resources;\n    else if (shouldShowScripture) component = scripture;\n    else if (shouldShowOpenBibleStories) component = openBibleStories;\n  }\n\n  return (\n    <div className={classes.root}>\n      <Suspense fallback={loadingComponent}>\n        {component}\n      </Suspense>\n    </div>\n  );\n}\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  history: PropTypes.array,\n  manifests: PropTypes.object,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n  progress: {\n    margin: 'auto',\n    display: 'block',\n  },\n});\n\nexport default withStyles(styles)(Component);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Component from './Component';\n\nclass Container extends React.Component {\n  state = {\n  };\n\n  componentDidUpdate() {\n    const {reference} = this.props.context;\n    if (reference) {\n      const {bookId, chapter, verse} = reference;\n      const id = `${bookId}_${chapter}_${verse}`;\n      const element = document.getElementById(id);\n      if (element) {\n        element.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start',\n        });\n      }\n    }\n  }\n\n  render() {\n    const props = this.props;\n    return (\n      <Component\n        {...props}\n      />\n    );\n  };\n};\n\nContainer.propTypes = {\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  history: PropTypes.array,\n  manifests: PropTypes.object.isRequired,\n};\n\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Paper,\n  BottomNavigation,\n  BottomNavigationAction,\n} from '@material-ui/core';\nimport {\n  LibraryBooks,\n  Book,\n  Bookmark,\n  History,\n  KeyboardArrowLeft,\n  KeyboardArrowRight,\n} from '@material-ui/icons';\n\nimport {chaptersInBook} from '../chaptersAndVerses';\n\nclass BottomNavContainer extends React.Component {\n  handleChange = (event, value) => {\n    let context = {...this.props.context};\n    let {\n      username,\n      languageId,\n      reference,\n    } = context;\n    switch (value) {\n      case 0:\n        context = this.previousChapter();\n        break;\n      case 1:\n        context = {username, languageId, view: 'history', reference: {}};\n        break;\n      case 2:\n        context = {username, languageId, reference: {}};\n        break;\n      case 3:\n        context.reference = {};\n        break;\n      case 4:\n        if (reference) context.reference = {bookId: reference.bookId};\n        break;\n      case 5:\n        context = this.nextChapter();\n        break;\n      default:\n        break;\n    };\n    this.props.setContext(context);\n  };\n\n  previousChapter = () => {\n    let reference = {...this.props.context.reference}\n    let {chapter} = reference;\n    if (chapter > 1) {\n      reference.chapter = chapter - 1;\n      reference.verse = undefined;\n    }\n    const context = {...this.props.context, reference};\n    return context;\n  };\n\n  nextChapter = () => {\n    let reference = {...this.props.context.reference}\n    let {bookId, chapter} = reference;\n    const bookChapters = chaptersInBook({bookId}).length\n    if (chapter < bookChapters) {\n      reference.chapter = chapter + 1\n      reference.verse = undefined;\n    }\n    const context = {...this.props.context, reference};\n    return context;\n  };\n\n  render() {\n    const { classes, context } = this.props;\n\n    const shouldShowHistory = (context.view === 'history');\n    const couldShowReference = (!context.resourceId);\n    const couldShowBook = (!(context.resourceId === 'obs') && !(context.reference && context.reference.bookId));\n    const couldShowChapter = (!(context.reference && context.reference.chapter));\n\n    let value;\n    if (shouldShowHistory) { value = 1; }\n    else if (couldShowReference) { value = 2; }\n    else if (couldShowBook) { value = 3; }\n    else if (couldShowChapter) { value = 4; }\n\n    return (\n      <Paper className={classes.root}>\n        <BottomNavigation\n          value={value}\n          onChange={this.handleChange}\n          showLabels={true}\n          className={classes.bottomNavigation}\n        >\n          <BottomNavigationAction\n            className={classes.button}\n            icon={<KeyboardArrowLeft />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            label=\"History\"\n            icon={<History />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            label=\"Resources\"\n            icon={<LibraryBooks />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            label=\"Books\"\n            icon={<Book />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            label=\"Chapters\"\n            icon={<Bookmark />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            icon={<KeyboardArrowRight />}\n          />\n        </BottomNavigation>\n      </Paper>\n    );\n  }\n}\n\nBottomNavContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n  bottomNavigation: {\n    margin: '0 auto',\n    maxWidth: '40em',\n  },\n  button: {\n    paddingLeft: '0',\n    paddingRight: '0',\n    minWidth: '60px',\n  },\n});\n\nexport default withStyles(styles, { withTheme: true })(BottomNavContainer);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport ApplicationBar from './ApplicationBar';\nimport Workspace from './Workspace';\nimport BottomNav from './BottomNav';\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true,\n  },\n  palette: {\n    primary: {\n      light: '#59B7E7',\n      main: '#31ADE3',\n      dark: '#014263',\n      contrastText: '#FFF'\n    },\n  },\n});\n\nexport const Component = ({\n  classes,\n  context,\n  setContext,\n  history,\n  manifests,\n}) =>\n<MuiThemeProvider theme={theme}>\n  <div className={classes.root}>\n    <div className={classes.appFrame}>\n      <main className={classes.main}>\n        <ApplicationBar\n          applicationName=\"unfoldingWord\"\n          context={context}\n          setContext={setContext}\n          manifests={manifests}\n        />\n        <div className={classes.workspace}>\n          <Workspace\n            context={context}\n            setContext={setContext}\n            history={history}\n            manifests={manifests}\n          />\n        </div>\n      </main>\n      <nav className={classes.bottomNav}>\n        <BottomNav\n          context={context}\n          setContext={setContext}\n        />\n      </nav>\n    </div>\n  </div>\n</MuiThemeProvider>;\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  history: PropTypes.array,\n  setContext: PropTypes.func.isRequired,\n  manifests: PropTypes.object,\n};\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  appFrame: {\n    zIndex: 1,\n    position: 'relative',\n    display: 'flex',\n    width: '100%',\n  },\n  main: {\n    width: '100%',\n    minWidth: '20em',\n  },\n  workspace: {\n    padding: '1em 1em 5.5em 1em',\n  },\n  bottomNav: {\n    width: '100%',\n    position: 'fixed',\n    bottom: 0,\n    zIndex: 10,\n  }\n});\n\nexport default withStyles(styles)(Component);\n","import React from 'react';\nimport queryString from 'query-string';\n\nimport Component from './Component';\n\nimport * as helpers from './helpers';\nimport * as chapterAndVerses from './chaptersAndVerses';\n\nconst keyPrefix = 'ApplicationContainer.state.';\n\nclass Container extends React.Component {\n  state = {\n    manifests: {},\n    context: this.defaultContext(),\n    history: [],\n  };\n\n  defaultContext() {\n    const urlParams = new URLSearchParams(window.location.search);\n    const username = urlParams.get('username') || 'unfoldingword';\n    const languageId = urlParams.get('languageId') || 'en';\n    const resourceId = urlParams.get('resourceId');\n    const bookId = urlParams.get('bookId');\n    const chapter = urlParams.get('chapter');\n    const verse = urlParams.get('verse');\n    return {\n      username: username,\n      languageId: languageId,\n      resourceId: resourceId,\n      reference: {\n        bookId,\n        chapter,\n        verse,\n      },\n    }\n  };\n\n  addToHistoryArray(_context, _history) {\n    let history = [];\n    if (_history) history = [..._history];\n    const newContext = JSON.stringify(_context);\n    const oldContext = JSON.stringify(history[0]);\n    const isNew = !( newContext === oldContext );\n    if (isNew) {\n      const context = JSON.parse(newContext);\n      history.unshift(context);\n    }\n    if (!history) debugger\n    return history;\n  };\n\n  // add to history (load, add, persist, return)\n  addHistory({history, context}) {\n    if (context.reference && context.reference.chapter) {\n      history = this.addToHistoryArray(context, history);\n      helpers.save({ key: `${keyPrefix}history`, value: history });\n    }\n    return history;\n  };\n\n  // load new manifests and update context if language or username changes\n  async refreshManifests({context}) {\n    const {context: oldContext, manifests: oldManifests} = this.state;\n    let manifests = {...oldManifests};\n    const languageChanged = (oldContext.languageId !== context.languageId);\n    const usernameChanged = (oldContext.username !== context.username);\n    if (languageChanged || usernameChanged) {\n      manifests = await helpers.fetchResourceManifests(context);\n    }\n    return manifests;\n  };\n\n  validateContext({ manifests, context }) {\n    const {resourceId, reference} = context;\n    const manifestExists = (!!manifests && !!manifests[resourceId]);\n    const validReference = chapterAndVerses.validateReference({reference});\n    const valid = (manifestExists && validReference);\n    return valid;\n  }\n\n  async setContext(_context) {\n    let newState = {};\n    const {reference: _reference} = _context;\n    const reference = _reference ? {..._reference} : {};\n    const context = {..._context, reference};\n    // allow navigation to Resources selection\n    const emptyResourceId = (!context.reference || !context.resourceId);\n    if (emptyResourceId) {\n      newState.context = context;\n      window.scrollTo(0,0);\n    }\n    // use 'obs' for bookId if is resourceId\n    if (context.resourceId === 'obs') context.reference.bookId = 'obs';\n    // set context and manifests if new ones need to be fetched\n    const manifests = await this.refreshManifests({context});\n    newState.manifests = manifests;\n    const validContext = this.validateContext({manifests, context});\n    // validate context\n    if (validContext) {\n      newState.context = context;\n      newState.history = this.addHistory({history: this.state.history, context});\n      window.scrollTo(0,0);\n    }\n    // update state\n    this.setState(newState);\n    this.updateQuery(context);\n    // persist context\n    helpers.save({ key: `${keyPrefix}context`, value: context });\n  };\n\n  updateQuery({username, languageId, resourceId, reference: {bookId, chapter, verse}}) {\n    const _username = username ? `username=${username}&` : '';\n    const _languageId = languageId ? `languageId=${languageId}&` : '';\n    const _resourceId = resourceId ? `resourceId=${resourceId}&` : '';\n    const _bookId = bookId ? `bookId=${bookId}&` : '';\n    const _chapter = chapter ? `chapter=${chapter}&` : '';\n    const _verse = verse ? `verse=${verse}` : '';\n  \tconst query = `/?${_username}${_languageId}${_resourceId}${_bookId}${_chapter}${_verse}`;\n  \twindow.history.pushState(null, null, query);\n  }\n\n  componentWillMount() {\n    let newState = {};\n    const defaultContext = this.defaultContext();\n    let context = helpers.load({\n      key: `${keyPrefix}context`,\n      defaultValue: defaultContext,\n    });\n    if (defaultContext.username !== context.username) {\n      context = defaultContext;\n    }\n    newState.context = context;\n    newState.history = helpers.load({\n      key: `${keyPrefix}history`,\n      defaultValue: [],\n    });\n    this.setState(newState);\n  };\n\n  async componentDidMount() {\n    let newState = {};\n    const {context} = this.state;\n    const manifests = await helpers.fetchResourceManifests(context);\n    const validContext = this.validateContext({manifests, context});\n    newState.manifests = manifests;\n    newState.context = validContext ? context : this.defaultContext();\n    this.setState(newState);\n  };\n\n  render() {\n    const {context, history, manifests} = this.state;\n    const _context = context ? helpers.deepFreeze(context) : context;\n    const _manifests = manifests ? helpers.deepFreeze(manifests) : manifests;\n    return (\n      <Component\n        context={_context}\n        history={history}\n        setContext={this.setContext.bind(this)}\n        manifests={_manifests}\n      />\n    );\n  };\n};\n\nexport default Container;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              if (window) window.alert(\n                'Update is available, close the App and/or all tabs and restart the App to get the latest.'\n              );\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              if (window) window.alert(\n                'The first load of a Book and Chapter may take longer to download the resources.'\n              );\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Container from './Container';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Container />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}