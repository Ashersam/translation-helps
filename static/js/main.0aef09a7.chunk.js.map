{"version":3,"sources":["helpers.js","Workspace/Scripture/helpers.js","ApplicationBar/ApplicationBar.js","ApplicationBar/ApplicationBarContainer.js","ApplicationBar/index.js","Workspace/History/Context.js","Workspace/History/Contexts.js","Workspace/History/index.js","Workspace/Resources/Resource.js","Workspace/styles.js","Workspace/Resources/index.js","Workspace/Resources/Resources.js","chaptersAndVerses.js","Workspace/Scripture/BookSelection/BookComponent.js","Workspace/Scripture/BookSelection/TestamentComponent.js","Workspace/Scripture/BookSelection/TestamentContainer.js","Workspace/Scripture/BookSelection/index.js","Workspace/Scripture/BookSelection/BibleComponent.js","Workspace/Scripture/ChapterSelection/ChapterComponent.js","Workspace/Scripture/ChapterSelection/index.js","Workspace/Scripture/ChapterSelection/ChaptersComponent.js","Workspace/Scripture/ScriptureView/ExpansionPanelComponent.js","Workspace/Scripture/ScriptureView/ExpansionPanelContainer.js","Workspace/TranslationHelps/TranslationAcademy/helpers.js","Workspace/TranslationHelps/TranslationWords/helpers.js","Workspace/TranslationHelps/helpers.js","Workspace/TranslationHelps/RCLinkContainer.js","Workspace/TranslationHelps/TextComponentWithRCLinks.js","Workspace/TranslationHelps/TranslationNotes/index.js","Workspace/TranslationHelps/TranslationNotes/TranslationNoteComponent.js","Workspace/Scripture/ScriptureView/VerseObject/AlignedWords/AlignedWord/Component.js","Workspace/Scripture/ScriptureView/VerseObject/AlignedWords/AlignedWord/helpers.js","Workspace/Scripture/ScriptureView/VerseObject/AlignedWords/AlignedWord/Container.js","Workspace/Scripture/ScriptureView/VerseObject/AlignedWords/AlignedWord/index.js","Workspace/TranslationHelps/styles.js","Workspace/TranslationHelps/HelpsTab.js","Workspace/TranslationHelps/Component.js","Workspace/TranslationHelps/index.js","Workspace/TranslationHelps/Container.js","Workspace/Scripture/ScriptureView/VerseObject/Word.js","Workspace/Scripture/ScriptureView/VerseObject/AlignedWords/Container.js","Workspace/Scripture/ScriptureView/VerseObject/AlignedWords/index.js","Workspace/Scripture/ScriptureView/VerseObject/Milestone.js","Workspace/Scripture/ScriptureView/VerseObject/Text.js","Workspace/Scripture/ScriptureView/VerseObject/index.js","Workspace/Scripture/ScriptureView/VerseObject/Component.js","Workspace/Scripture/ScriptureView/Verse/index.js","Workspace/Scripture/ScriptureView/Verse/Component.js","Workspace/TranslationHelps/Original/helpers.js","Workspace/Scripture/ScriptureView/ChapterComponent.js","Workspace/Scripture/ScriptureView/AlignmentsTable/index.js","Workspace/Scripture/ScriptureView/AlignmentsTable/Component.js","Workspace/Scripture/ScriptureView/AlignmentsTable/helpers.js","Workspace/Scripture/ScriptureView/TranslationNotesTable/theme.js","Workspace/Scripture/ScriptureView/TranslationNotesTable/index.js","Workspace/Scripture/ScriptureView/TranslationNotesTable/Component.js","Workspace/Scripture/ScriptureView/index.js","Workspace/Scripture/ScriptureView/BookComponent.js","Workspace/Scripture/Scripture.js","Workspace/Scripture/Alignment/helpers.js","Workspace/Scripture/index.js","Workspace/Scripture/Container.js","Workspace/OpenBibleStories/StorySelection/StoryComponent.js","Workspace/OpenBibleStories/StorySelection/index.js","Workspace/OpenBibleStories/StorySelection/StoriesComponent.js","Workspace/OpenBibleStories/OpenBibleStoriesView/Card/Component.js","Workspace/OpenBibleStories/OpenBibleStoriesView/Card/index.js","Workspace/OpenBibleStories/OpenBibleStoriesView/Card/Container.js","Workspace/OpenBibleStories/youtubeIds.js","Workspace/OpenBibleStories/helpers.js","Workspace/OpenBibleStories/OpenBibleStoriesView/Frame/Component.js","Workspace/OpenBibleStories/translationHelps/helpers.js","Workspace/OpenBibleStories/OpenBibleStoriesView/Frame/index.js","Workspace/OpenBibleStories/OpenBibleStoriesView/Frame/Container.js","Workspace/OpenBibleStories/OpenBibleStoriesView/Story/Component.js","Workspace/OpenBibleStories/OpenBibleStoriesView/index.js","Workspace/OpenBibleStories/OpenBibleStoriesView/Story/Container.js","Workspace/OpenBibleStories/Component.js","Workspace/OpenBibleStories/Container.js","Workspace/OpenBibleStories/index.js","Workspace/Component.js","Workspace/index.js","Workspace/Container.js","BottomNav/Container.js","BottomNav/index.js","Component.js","Container.js","serviceWorker.js","index.js"],"names":["store","localforage","createInstance","driver","INDEXEDDB","name","api","setup","baseURL","cache","maxAge","resourceRepositories","languageId","ult","ust","tn","ta","tw","ugnt","uhb","ugl","uhal","obs","obs-tn","obs-tq","obs-sn","obs-sq","fetchManifest","username","repository","Promise","resolve","reject","fetchFileFromServer","then","yaml","json","YAML","parseDocument","toJSON","catch","filepath","branch","arguments","length","undefined","uri","path","join","get","response","data","error","fetchBook","resourceId","bookId","manifest","projectByBookId","projects","concat","console","warn","ApplicationHelpers","fetchFileByBookId","usfm","usfmjs","fetchOriginalBook","uhbManifest","ugntManifest","testament","whichTestament","repositories","translationNotes","fetchNotes","tsv","tsvParse","replace","project","_projects","filter","item","identifier","split","map","row","trim","withStyles","theme","paper","color","backgroundColor","textAlign","boxShadow","toolbar","margin","display","padding","logo","height","paddingTop","withTheme","_ref","classes","manifests","applicationName","_ref$context","context","reference","bookName","ScriptureHelpers","title","referenceComponent","react_default","a","createElement","chapter","dist_default","className","src","alt","index_es","variant","coin","noWrap","ApplicationBarContainer","state","props","this","src_ApplicationBar_ApplicationBar","React","Component","bookListItem","listItemIcon","marginRight","listItemText","paddingLeft","_ref$manifest$dublin_","dublin_core","subject","language","_ref$context$referenc","verse","setContext","button","style","paddingRight","onClick","icons_index_es","primary","secondary","root","maxWidth","marginLeft","list","overflowY","contexts","contextComponents","index","History_Context","key","JSON","stringify","component","dense","Contexts","card","minWidth","marginBottom","fontSize","pos","actions","width","description","rights","publisher","contributors","gutterBottom","size","styles","spacing","unit","column","originalVerse","fullWidth","expansionPanelDetails","expansionPanelActions","Resources","resources","Object","keys","includes","Resources_Resource","chaptersInBook","bookData","chapters","toConsumableArray","Array","_unused","id","bookMetadata","chapterCount","chaptersAndVerses","selected","paddingBottom","testamentId","books","open","toggle","bookComponents","BookSelection_BookComponent","fileList","inset","in","timeout","unmountOnExit","TestamentContainer","setState","BookSelection_TestamentComponent","assign","bind","BibleComponent","bible","bibleList","forEach","categories","push","BookSelection_TestamentContainer","verses","ChaptersComponent","ChapterSelection_ChapterComponent","summary","details","handleToggle","handleClose","expanded","onChange","expandIcon","position","top","aria-label","ExpansionContainer","Math","random","_this","scrollToId","element","document","getElementById","scrollIntoView","behavior","block","_this$state","ScriptureView_ExpansionPanelComponent","fetchTitle","linkPath","uriPath","splice","TranslationAcademyHelpers","log","markdown","TranslationWordsHelpers","message","fetchArticle","article","prefix","RCLinkContainer","handleOpen","_this$state$context","helpers","tab","text","addTab","href","regexpLanguageIdResourcePath","test","match","exec","_match2","slicedToArray","regexpReference","_match5","parseInt","_this$props","children","parseHref","_this2","_this$state2","_this$state2$context","_this$state3","label","chip","clickable","TextComponentWithRCLinks","options","remarkReactComponents","TranslationHelps_RCLinkContainer","div","remark","use","remark2react","processSync","contents","TranslationNoteComponent","note","marginTop","occurrence_note","noteComponent","TranslationHelps_TextComponentWithRCLinks","gl_quote","verseObject","senses","content","lemma","strong","morph","sense","gloss","definition","_strong","lexiconMarkdown","senseSection","definitionRegexp","glossRegexp","unique","parseSenses","array","_array","object","_object","Container","unmounted","AlignedWord_Component","palette","background","appBar","zIndex","hidden","tabContent","notes","TranslationNotes","original","wordObject","link","originalWords","AlignedWord","words","word","tabs","tabIndex","handleChangeIndex","tabLabels","tabContents","badgeCount","wordObjects","badge","badgeContent","HelpsTab","currentTab","value","indicatorColor","textColor","scrollButtons","_index","__index","TranslationHelps_Component","AlignedWords","anchorEl","handlePopoverOpen","event","currentTarget","handlePopoverClose","Boolean","aria-owns","aria-haspopup","onMouseEnter","onMouseLeave","closed","VerseObject_Word","popover","anchorOrigin","vertical","horizontal","transformOrigin","onClose","disableRestoreFocus","pointerEvents","Milestone","_ref$verseObject","tag","occurrence","occurrences","child","VerseObject","originalWord","_originalWords","parse","type","VerseObject_AlignedWords","_ref$originalWords","VerseObject_Text","VerseObject_Milestone","data-verseObject","nextChar","verseKey","ultVerseData","lemmaIndex","ustVerseData","originalVerseData","translationNotesVerseData","ultVerse","verseObjects","ustVerseComponent","ustVerse","originalVerseComponent","direction","wordsTab","notesTab","TranslationHelps","ExpansionPanelContainer","ultChapterData","ustChapterData","originalChapterData","translationNotesChapterData","o","Verse","lemmaRows","entry","alignment","_entry$reference","_helpers$textFromVers","textFromVerseObject","originalTexts","targetTexts","_verseObject","_textFromVerseObject","_originalTexts","_targetTexts","target","createMuiTheme","overrides","MuiPaper","elevation4","rounded","borderRadius","MuiTableCell","MuiTableRow","mui_datatables_dist_default","columns","sort","filterType","selectableRows","responsive","download","print","viewColumns","getMuiTheme","MUIDataTableHeadCell","fixedHeader","MUIDataTable","responsiveScroll","maxHeight","customBodyRender","tableMeta","updateValue","maxNoteLength","substring","shift","pop","_row","supportReference","origQuote","glQuote","BookComponent","_ref$resources","tnObject","translationNotesObject","_item","book","support_reference","original_quote","intro","introDetails","TranslationNotesTable","ScriptureView_AlignmentsTable","chapterComponent","ScriptureView_ChapterComponent","react_markdown_default","source","escapeHtml","progress","referenceLoaded","bookSelection","BookSelection","chapterSelection","ChapterSelection","scriptureView","ScriptureView","disableShrink","shouldShowBookSelection","shouldShowChapterSelection","shouldShowScriptureView","getWords","nextProps","referenceChanged","needToFetch","_props$context","each","done","time","chapterKey","timeEnd","AlignmentHelpers","fetchResourcesConditionally","_this$props$context$r","Workspace_Scripture_Scripture","storyKey","frames","StoriesComponent","stories","components","_storyKey","StorySelection_StoryComponent","media","player","videoFrame","handleToggleOpen","image","youtubeId","videoUrl","ReactPlayer_default","url","controls","config","youtube","playerVars","rel","modestbranding","disableActionSpacing","aria-expanded","helps","frameKey","Card_Component","youtubeIds","frameData","frameMarkdown","imageRegexp","_imageRegexp$exec","_imageRegexp$exec2","fetchStory","storyId","numberPadded","storyMarkdown","framesFromStory","questions","studyNotes","studyQuestions","_text","Card","fetchStudyQuestions","pad","fetchStudyNotes","file","parseStudyNotes","fetchQuestions","parseQuestions","fetchNotesAndWords","parseNotes","number","questionItem","_questionItem$split","_questionItem$split2","toArray","questionText","answerLines","slice","_markdown$split","_markdown$split2","notesMarkdown","wordsMarkdown","noteText","_noteText$split","_noteText$split2","quote","noteLines","_noteText$split3","_noteText$split4","_this$props$context","translationHelps","objectSpread","Frame_Component","story","guide","_story$frameKey","OpenBibleStoriesView_Frame","Story","newProps","Story_Component","shouldShowStorySelection","shouldShowOpenBibleStoriesView","StorySelection","OpenBibleStoriesView","OpenBibleStoriesContainer","storyIds","OpenBibleStories_Component","history","historyComponent","History","Workspace_Resources","scripture","Workspace_Scripture","openBibleStories","OpenBibleStories","shouldShowHistory","view","shouldShowResources","shouldShowScripture","shouldShowOpenBibleStories","Workspace_Component","BottomNavContainer","handleChange","previousChapter","nextChapter","_context$reference","_this$props2","couldShowReference","couldShowBook","couldShowChapter","showLabels","bottomNavigation","icon","typography","useNextVariants","light","main","dark","contrastText","flexGrow","appFrame","workspace","bottomNav","bottom","src_ApplicationBar","Workspace","BottomNav","keyPrefix","defaultContext","_context","_history","newContext","unshift","localstorage","window","scrollTo","_unused2","newState","addToHistory","set","_resourceRepositories","resourceIds","src_Component","location","hostname","ReactDOM","render","src_Container","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.0aef09a7.chunk.js","sourcesContent":["import path from 'path';\nimport YAML from 'yaml';\nimport {each} from 'async';\nimport localforage from 'localforage';\nimport { setup } from 'axios-cache-adapter';\n\nconst baseURL = \"https://git.door43.org/\";\n\nconst store = localforage.createInstance({\n  driver: [localforage.INDEXEDDB],\n  name: 'web-cache',\n});\nconst api = setup({\n  baseURL: baseURL,\n  cache: {store, maxAge: 24 * 60 * 60 * 1000},\n});\n\n// Purpose: application wide\n// Scope: limited to resource manifests and information\n\nexport const resourceRepositories = (languageId) => {\n  return {\n    ult: languageId + '_ult',\n    ust: languageId + '_ust',\n    tn: languageId + '-tn',\n    ta: languageId + '-ta',\n    tw: languageId + '-tw',\n    ugnt: 'UGNT',\n    uhb: 'UHB',\n    ugl: languageId + '_ugl',\n    uhal: languageId + '_uhal',\n    obs: languageId + '_obs',\n    'obs-tn': languageId + '_obs-tn',\n    'obs-tq': languageId + '_obs-tq',\n    'obs-sn': languageId + '_obs-sn',\n    'obs-sq': languageId + '_obs-sq',\n  };\n};\n\nexport const fetchResourceManifests = (username, languageId) => new Promise((resolve, reject) => {\n  let manifests = {};\n  const _resourceRepositories = resourceRepositories(languageId);\n  const resourceIds = Object.keys(_resourceRepositories);\n  each(\n    resourceIds,\n    (resourceId, done) => {\n      const repository = _resourceRepositories[resourceId];\n      fetchManifest(username, repository)\n      .then(manifest => {\n        manifests[resourceId] = manifest;\n        done();\n      }).catch(reject);\n    },\n    (error) => {\n      if (error) reject(error);\n      resolve(manifests);\n    }\n  );\n});\n\nexport const fetchManifest = (username, repository) => new Promise((resolve, reject) => {\n  fetchFileFromServer(username, repository, 'manifest.yaml')\n  .then(yaml => {\n    const json = YAML.parseDocument(yaml).toJSON();\n    resolve(json);\n  }).catch(reject);\n});\n\n// https://git.door43.org/unfoldingword/en_ult/raw/branch/master/manifest.yaml\nexport const fetchFileFromServer = (username, repository, filepath, branch='master') => new Promise((resolve, reject) => {\n  const uri = path.join(username, repository, 'raw/branch', branch, filepath);\n  get(uri).then(resolve).catch(reject);\n});\n\nexport const get = (uri) => new Promise((resolve, reject) => {\n  api.get(uri).then(response => {\n    resolve(response.data);\n  }).catch(error => {\n    reject(error);\n  });\n});\n","import usfmjs from 'usfm-js';\nimport {each} from 'async';\n\n// Purpose: application wide\n// Scope: limited to resource files and parsing\n// Notes: pass in manifests don't fetch them\n\nimport * as ApplicationHelpers from '../../helpers';\n\nexport const fetchResources = (props) => new Promise((resolve, reject) => {\n  const {context: {username, languageId, reference}, manifests} = props;\n  let resources = {\n    ult: null,\n    ust: null,\n    tn: null,\n    original: null,\n  };\n  const resourceIds = ['ult', 'ust', 'tn', 'original'];\n  each(resourceIds,\n    (resourceId, done) => {\n      switch (resourceId) {\n        case 'ult':\n          fetchBook(username, languageId, resourceId, reference.bookId, manifests.ult)\n          .then(data => {\n            resources[resourceId] = data.chapters;\n            done();\n          });\n          break;\n        case 'ust':\n          fetchBook(username, languageId, resourceId, reference.bookId, manifests.ust)\n          .then(data => {\n            resources[resourceId] = data.chapters;\n            done();\n          });\n          break;\n        case 'tn':\n          translationNotes(username, languageId, reference.bookId, manifests.tn)\n          .then(data => {\n            resources[resourceId] = data;\n            done();\n          });\n          break;\n        case 'original':\n          fetchOriginalBook(username, languageId, reference.bookId, manifests.uhb, manifests.ugnt)\n          .then(data => {\n            resources[resourceId] = data.chapters;\n            done();\n          });\n          break;\n        default:\n          done();\n          break;\n      }\n    },\n    (error) => {\n      resolve(resources);\n    }\n  );\n});\n\nexport const fetchBook = (username, languageId, resourceId, bookId, manifest) => new Promise((resolve, reject) => {\n  if (!projectByBookId(manifest.projects, bookId)) {\n    const error = `book not found in ${resourceId}`;\n    console.warn(error);\n    reject(error);\n  }\n  const repository = ApplicationHelpers.resourceRepositories(languageId)[resourceId];\n  fetchFileByBookId(username, repository, bookId, manifest)\n  .then(usfm => {\n    const json = usfmjs.toJSON(usfm);\n    resolve(json);\n  }).catch(reject);\n});\n\nexport const whichTestament = (bookId, uhbManifest, ugntManifest) => {\n  let testament;\n  const uhbProject = projectByBookId(uhbManifest.projects, bookId);\n  const ugntProject = projectByBookId(ugntManifest.projects, bookId);\n  if (uhbProject) testament = 'old';\n  if (ugntProject) testament = 'new';\n  return testament;\n}\n\nexport const fetchOriginalBook = (username, languageId, bookId, uhbManifest, ugntManifest) => new Promise((resolve, reject) => {\n  let manifest, repository;\n  const testament = whichTestament(bookId, uhbManifest, ugntManifest);\n  const repositories = ApplicationHelpers.resourceRepositories(languageId);\n  if (testament === 'old') {\n    manifest = uhbManifest;\n    repository = repositories.uhb;\n  };\n  if (testament === 'new') {\n    manifest = ugntManifest;\n    repository = repositories.ugnt;\n  };\n  fetchFileByBookId(username, repository, bookId, manifest)\n  .then(usfm => {\n    const json = usfmjs.toJSON(usfm);\n    resolve(json);\n  }).catch(reject);\n});\n\nexport const fetchUGNTBook = (username, languageId, bookId, manifest) => new Promise((resolve, reject) => {\n  const repository = ApplicationHelpers.resourceRepositories(languageId).ugnt;\n  fetchFileByBookId(username, repository, bookId, manifest)\n  .then(usfm => {\n    const json = usfmjs.toJSON(usfm);\n    resolve(json);\n  }).catch(reject);\n});\n\nexport const fetchUHBBook = (username, languageId, bookId, manifest) => new Promise((resolve, reject) => {\n  const repository = ApplicationHelpers.resourceRepositories(languageId).uhb;\n  fetchFileByBookId(username, repository, bookId, manifest)\n  .then(usfm => {\n    const json = usfmjs.toJSON(usfm);\n    resolve(json);\n  }).catch(reject);\n});\n\nexport const pivotTranslationNotes = (array) => {\n  let translationNotesObject = {};\n  let _array = JSON.parse(JSON.stringify(array));\n  _array.shift();\n  _array.forEach(item => {\n    let [book, chapter, verse, id, support_reference, original_quote, occurrence, gl_quote, occurrence_note] = item;\n    if (book && chapter && verse) {\n      if (!translationNotesObject[chapter]) translationNotesObject[chapter] = {};\n      if (!translationNotesObject[chapter][verse]) translationNotesObject[chapter][verse] = [];\n      occurrence_note = (!!occurrence_note) ? occurrence_note.replace(/<br>/g,'\\n') : occurrence_note;\n      let object = {\n        id,\n        support_reference,\n        original_quote,\n        occurrence,\n        gl_quote,\n        occurrence_note,\n      };\n      translationNotesObject[chapter][verse].push(object);\n    }\n  });\n  return translationNotesObject\n}\n\nexport const translationNotes = (username, languageId, bookId, manifest) => new Promise((resolve, reject) => {\n  fetchNotes(username, languageId, bookId, manifest)\n  .then(resolve).catch(reject);\n});\n\nexport const fetchNotes = (username, languageId, bookId, manifest) => new Promise((resolve, reject) => {\n  const repository = ApplicationHelpers.resourceRepositories(languageId).tn;\n  fetchFileByBookId(username, repository, bookId, manifest)\n  .then(tsv => {\n    const data = tsvParse(tsv);\n    resolve(data);\n  }).catch(reject);\n});\n\nexport const fetchFileByBookId = (username, repository, bookId, manifest) => new Promise((resolve, reject) => {\n  let {path} = projectByBookId(manifest.projects, bookId);\n  path = path.replace(/^\\.\\//, '');\n  ApplicationHelpers.fetchFileFromServer(username, repository, path)\n  .then(resolve).catch(reject);\n});\n\nexport const projectByBookId = (projects, bookId) => {\n  const _projects = projects.filter(item => item.identifier === bookId);\n  let project;\n  if (_projects.length > 0) {\n    project = _projects[0];\n  }\n  return project;\n}\n\nexport const tsvParse = (tsv) =>\n  tsv.split('\\n').map(row => row.trim().split('\\t'));\n","import React from 'react'\nimport { withStyles } from '@material-ui/core/styles';\nimport PropTypes from 'prop-types';\nimport Headroom from 'react-headroom';\nimport {\n  Typography,\n} from '@material-ui/core';\n\nimport * as ScriptureHelpers from '../Workspace/Scripture/helpers';\n\nconst ApplicationBar = ({\n  classes,\n  applicationName,\n  manifests,\n  context: {\n    resourceId,\n    reference\n  },\n}) => {\n\n  let bookName = '';\n\n  if (manifests && manifests[resourceId] && manifests[resourceId].projects && reference && reference.bookId) {\n    const project = ScriptureHelpers.projectByBookId(manifests[resourceId].projects, reference.bookId);\n    bookName = project.title;\n  }\n  const referenceComponent = (bookName ? <span>&nbsp;&nbsp;{bookName} {reference.chapter}</span> : <span />);\n\n  return (\n    <Headroom>\n      <div className={classes.paper}>\n        <div className={classes.toolbar}>\n          <img className={classes.logo} src=\"./logo.png\" alt=\"unfoldingWord Logo\" />\n          <Typography variant=\"h6\" color=\"inherit\" className={classes.coin} noWrap>\n            {referenceComponent}\n          </Typography>\n        </div>\n      </div>\n    </Headroom>\n  );\n}\n\nApplicationBar.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  manifests: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  projectName: PropTypes.string,\n};\n\nconst styles = theme => ({\n  paper: {\n    color: '#fff',\n    backgroundColor: '#31ADE3',\n    textAlign: 'center',\n    boxShadow: '0px 1px 5px 0px rgba(0, 0, 0, 0.2),' +\n               '0px 2px 2px 0px rgba(0, 0, 0, 0.14),' +\n               '0px 3px 1px -2px rgba(0, 0, 0, 0.12)',\n  },\n  toolbar: {\n    margin: 'auto',\n    display: 'inline-flex',\n    padding: '1em 0',\n  },\n  logo: {\n    height: '1.8em',\n    paddingTop: '0.25em',\n  },\n});\n\nexport default withStyles(styles, { withTheme: true })(ApplicationBar);\n","import React from 'react';\nimport ApplicationBar from './ApplicationBar';\n\nclass ApplicationBarContainer extends React.Component {\n  state = {\n  };\n\n  render() {\n    const {props} = this;\n    return (\n      <ApplicationBar\n        {...props}\n      />\n    );\n  };\n}\nexport default ApplicationBarContainer;\n","import ApplicationBarContainer from './ApplicationBarContainer';\nexport default ApplicationBarContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from '@material-ui/core';\nimport {\n  BookmarkBorder,\n} from '@material-ui/icons';\n\nimport * as ScriptureHelpers from '../Scripture/helpers';\n\nconst Context = ({\n  classes,\n  manifest,\n  manifest: {\n    dublin_core: {\n      subject,\n      title,\n      language,\n    }\n  },\n  context,\n  context: {\n    username,\n    languageId,\n    resourceId,\n    reference,\n    reference: {\n      bookId,\n      chapter,\n      verse,\n    },\n  },\n  setContext,\n}) => {\n  let bookName = '';\n  if (manifest && manifest.projects && reference && reference.bookId) {\n    const project = ScriptureHelpers.projectByBookId(manifest.projects, reference.bookId);\n    bookName = project.title;\n  }\n  return (\n    <ListItem\n      button\n      className={classes.bookListItem}\n      style={{\n        paddingLeft: '2em',\n        paddingRight: '0.7em',\n      }}\n      onClick={() => {\n        setContext(context);\n      }}\n    >\n      <ListItemIcon className={classes.listItemIcon}>\n        <BookmarkBorder />\n      </ListItemIcon>\n      <ListItemText\n        className={classes.listItemText}\n        primary={`${bookName} ${chapter}${verse ? `:${verse}` : ''}`}\n        secondary={`${language.title} - ${title}`}\n      />\n    </ListItem>\n  );\n}\n\nContext.propTypes = {\n  classes: PropTypes.object.isRequired,\n  manifest: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nconst styles = theme => ({\n  bookListItem: {\n  },\n  listItemIcon: {\n    marginRight: 0,\n  },\n  listItemText: {\n    paddingLeft: '0.7em',\n  },\n});\n\nexport default withStyles(styles)(Context);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Paper,\n  List,\n} from '@material-ui/core';\n\nimport Context from './Context';\n\nexport const Resources = ({\n  classes,\n  setContext,\n  manifests,\n  contexts,\n}) => {\n  let contextComponents = [];\n  if (contexts) {\n    contextComponents = contexts\n    .map((context, index) => (\n      <Context\n      key={index + JSON.stringify(context)}\n      context={context}\n      setContext={setContext}\n      manifest={manifests[context.resourceId]}\n      />\n    ));\n  }\n  return (\n    <Paper className={classes.root}>\n      <List\n        className={classes.root}\n        component=\"nav\"\n        dense\n      >\n        <div className={classes.list}>\n          {contextComponents}\n        </div>\n      </List>\n    </Paper>\n  );\n};\n\nResources.propTypes = {\n  contexts: PropTypes.array.isRequired,\n  setContext: PropTypes.func.isRequired,\n  manifests: PropTypes.object.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    height: '100%',\n    maxWidth: '40em',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n  },\n  list: {\n    height: '100%',\n    overflowY: 'auto',\n  },\n});\n\nexport default withStyles(styles)(Resources);\n","import Contexts from './Contexts';\nexport default Contexts;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Card,\n  CardActions,\n  CardContent,\n  Button,\n  Typography,\n} from '@material-ui/core';\n\nconst Resource = ({\n  classes,\n  manifest,\n  manifest: {\n    dublin_core: {\n      identifier,\n      subject,\n      title,\n      description,\n      publisher,\n      language,\n      rights,\n      contributors,\n    }\n  },\n  context: {\n    username,\n    languageId,\n  },\n  setContext,\n}) => {\n  return (\n    <Card className={classes.card}>\n      <CardContent>\n        <Typography className={classes.title} color=\"textSecondary\" gutterBottom>\n          {subject}\n        </Typography>\n        <Typography variant=\"h5\" component=\"h2\">\n          {title}\n        </Typography>\n        <Typography className={classes.pos} color=\"textSecondary\">\n          {rights}\n        </Typography>\n        <Typography component=\"p\">\n          {description}\n        </Typography>\n      </CardContent>\n      <CardActions className={classes.actions}>\n        <Button\n          size=\"small\"\n          variant=\"contained\"\n          className={classes.button}\n          color=\"primary\"\n          onClick={() => {\n            const resourceId = identifier;\n            const reference = (resourceId === 'obs') ? {bookId: resourceId} : {};\n            const context = {username, languageId, resourceId: identifier, reference};\n            setContext(context);\n          }}\n        >\n          Open\n        </Button>\n      </CardActions>\n    </Card>\n  );\n}\n\nResource.propTypes = {\n  classes: PropTypes.object.isRequired,\n  manifest: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nconst styles = {\n  card: {\n    minWidth: 275,\n    marginBottom: '1em',\n  },\n  title: {\n    fontSize: 14,\n  },\n  pos: {\n    marginBottom: 12,\n  },\n  actions: {\n    width: '100%',\n    textAlign: 'right',\n  },\n  button: {\n    marginLeft: 'auto',\n  },\n};\n\nexport default withStyles(styles)(Resource);\n","export const styles = theme => ({\n  root: {\n  },\n  paper: {\n    padding: theme.spacing.unit * 2,\n  },\n  column: {\n    maxWidth: '40em',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n  },\n  verse: {\n    margin: 0,\n  },\n  originalVerse: {\n    margin: `${theme.spacing.unit * 2}px ${theme.spacing.unit * 3}px ${theme.spacing.unit * 3}px`,\n  },\n  fullWidth: {\n    width: '100%'\n  },\n  expansionPanelDetails: {\n    padding: 0,\n  },\n  expansionPanelActions: {\n    padding: 0,\n  },\n});\n\nexport default styles;\n","import Resources from './Resources';\nexport default Resources;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Resource from './Resource';\nimport styles from '../styles';\n\nexport const Resources = ({\n  classes,\n  context,\n  setContext,\n  manifests,\n}) => {\n  const resources = Object.keys(manifests)\n  .filter(resourceId => ['ult','obs'].includes(resourceId));\n  \n  return (\n    <div className={classes.column}>\n      {resources.map(resourceId => (\n        <Resource\n          key={resourceId}\n          context={context}\n          setContext={setContext}\n          manifest={manifests[resourceId]}\n        />\n      ))}\n    </div>\n  );\n};\n\nResources.propTypes = {\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  manifests: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(Resources);\n","import data from './chaptersAndVerses.json';\n\nexport const chaptersInBook = bookId => {\ntry {\n  if (!bookId || bookId === 'obs') return [...Array(50).keys()];;\n  const chapters = bookData(bookId).chapters;\n  return chapters;\n} catch {debugger}\n};\n\nexport const versesInChapter = (bookId, chapter) => {\n  const verses = chaptersInBook([chapter - 1]);\n  return verses;\n};\n\nexport const bookData = bookId => {\n  const _bookData = data.filter(row => row.id === bookId)[0];\n  return _bookData;\n};\n\nexport const testament = bookId => {\n  const _testament = bookData(bookId).testament;\n  return _testament;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from '@material-ui/core';\nimport {\n  Book,\n  BookOutlined,\n} from '@material-ui/icons';\n\nimport * as chaptersAndVerses from '../../../chaptersAndVerses';\n\nexport const BookComponent = ({\n  classes,\n  bookMetadata,\n  context,\n  setContext,\n  context: {\n    reference,\n  },\n}) => {\n  const bookId = bookMetadata.identifier;\n  const chapterCount = chaptersAndVerses.chaptersInBook(bookId).length;\n  return (\n    <ListItem\n      button\n      selected={reference.bookId === bookMetadata.identifier}\n      className={classes.bookListItem}\n      style={{\n        paddingLeft: '2.2em',\n        paddingRight: '0.7em',\n      }}\n      onClick={() => {\n        context.reference = {\n          bookId: bookId\n        }\n        setContext(context);\n      }}\n    >\n      <ListItemIcon className={classes.listItemIcon}>\n        {\n          (reference.bookId === bookMetadata.identifier) ?\n          <Book /> :\n          <BookOutlined />\n        }\n      </ListItemIcon>\n      <ListItemText\n        className={classes.listItemText}\n        primary={bookMetadata.title}\n        secondary={chapterCount + ' Chapters' }\n      />\n    </ListItem>\n  );\n}\n\nBookComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  bookMetadata: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n}\n\nconst styles = theme => ({\n  bookListItem: {\n  },\n  listItemIcon: {\n    marginRight: 0,\n  },\n  listItemText: {\n    paddingLeft: '0.7em',\n  },\n});\n\nexport default withStyles(styles, { withTheme: true })(BookComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  List,\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n  Collapse,\n} from '@material-ui/core';\nimport {\n  Bookmarks,\n  BookmarksOutlined,\n} from '@material-ui/icons';\n\nimport BookComponent from './BookComponent';\n\nexport const TestamentComponent = ({\n  classes,\n  testamentId,\n  books,\n  context,\n  setContext,\n  open,\n  toggle\n}) => {\n  const bookComponents = books ?\n    books.map((bookMetadata) =>\n      <BookComponent\n        key={bookMetadata.identifier}\n        bookMetadata={bookMetadata}\n        context={context}\n        setContext={setContext}\n      />\n    ) : [];\n\n  return (\n    <div>\n      <ListItem\n        button\n        selected={open}\n        className={classes.fileList}\n        style={{\n          paddingLeft: '1em',\n          paddingRight: '0.5em',\n        }}\n        onClick={toggle}\n      >\n        <ListItemIcon className={classes.listItemIcon}>\n          {\n            open ?\n            <Bookmarks /> :\n            <BookmarksOutlined />\n          }\n        </ListItemIcon>\n        <ListItemText\n          inset\n          className={classes.listItemText}\n          primary={testamentId}\n          secondary={books.length + ' Books'}\n        />\n      </ListItem>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        <List dense className={classes.list}>\n          {bookComponents}\n        </List>\n      </Collapse>\n    </div>\n  );\n}\n\nTestamentComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  testamentId: PropTypes.string.isRequired,\n  books: PropTypes.array.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n}\nconst styles = theme => ({\n  list: {\n    paddingTop: 0,\n    paddingBottom: 0,\n  },\n  listItemIcon: {\n    marginRight: 0,\n  },\n  listItemText: {\n    paddingLeft: '0.7em',\n  },\n});\n\nexport default withStyles(styles, { withTheme: true })(TestamentComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport TestamentComponent from './TestamentComponent';\n\nclass TestamentContainer extends React.Component {\n  state = {\n    open: false,\n  };\n\n  toggle() {\n    this.setState({\n      open: !this.state.open\n    })\n  };\n\n  render() {\n    const props = this.props;\n    const {open} = this.state;\n    return (\n      <TestamentComponent\n        {...props}\n        open={open}\n        toggle={this.toggle.bind(this)}\n      />\n    );\n  };\n};\n\nTestamentContainer.propTypes = {\n  testamentId: PropTypes.string.isRequired,\n  books: PropTypes.array.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n}\n\nexport default TestamentContainer;\n","import BibleComponent from './BibleComponent'\nexport default BibleComponent\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Paper,\n  List,\n} from '@material-ui/core';\n\nimport TestamentContainer from './TestamentContainer';\n\nexport const BibleComponent = ({classes, manifests, context, setContext}) => {\n  let bible = {};\n  const {ult} = manifests;\n  if (ult) {\n    ult.projects.forEach(project => {\n      const testamentId = project.categories.includes('bible-ot') ? 'Old Testament': 'New Testament';\n      if (!bible[testamentId]) bible[testamentId] = [];\n      bible[testamentId].push(project);\n    });\n  }\n  return (\n    <Paper className={classes.bible}>\n      <List\n        className={classes.bible}\n        component=\"nav\"\n        dense\n      >\n        <div className={classes.bibleList}>\n          {\n            Object.keys(bible).map(testamentId =>\n              <TestamentContainer\n                key={testamentId}\n                testamentId={testamentId}\n                books={bible[testamentId]}\n                context={context}\n                setContext={setContext}\n              />\n            )\n          }\n        </div>\n      </List>\n    </Paper>\n    )\n}\n\nBibleComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  manifests: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nconst styles = theme => ({\n  bible: {\n    height: '100%',\n    maxWidth: '40em',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n  },\n  bibleList: {\n    height: '100%',\n    overflowY: 'auto',\n  },\n});\n\nexport default withStyles(styles)(BibleComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from '@material-ui/core';\nimport {\n  Bookmark,\n  BookmarkBorder,\n} from '@material-ui/icons';\n\nexport const ChapterComponent = ({\n  classes,\n  chapter,\n  verses,\n  context,\n  setContext,\n  context: {\n    reference,\n  },\n}) =>\n  <ListItem\n    button\n    selected={reference.chapter === chapter}\n    className={classes.bookListItem}\n    style={{\n      paddingLeft: '2em',\n      paddingRight: '0.7em',\n    }}\n    onClick={() => {\n      context.reference = {\n        bookId: reference.bookId,\n        chapter,\n      };\n      setContext(context);\n    }}\n  >\n    <ListItemIcon className={classes.listItemIcon}>\n      {\n        (reference.chapter === chapter) ?\n        <Bookmark /> :\n        <BookmarkBorder />\n      }\n    </ListItemIcon>\n    <ListItemText\n      className={classes.listItemText}\n      primary={'Chapter ' + chapter}\n      secondary={verses + ' Verses' }\n    />\n  </ListItem>\n\nChapterComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  chapter: PropTypes.number.isRequired,\n  verses: PropTypes.number.isRequired,\n}\n\nconst styles = theme => ({\n  bookListItem: {\n  },\n  listItemIcon: {\n    marginRight: 0,\n  },\n  listItemText: {\n    paddingLeft: '0.7em',\n  },\n});\n\nexport default withStyles(styles)(ChapterComponent);\n","import ChaptersComponent from './ChaptersComponent'\nexport default ChaptersComponent\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Paper,\n  List,\n} from '@material-ui/core';\n\nimport ChapterComponent from './ChapterComponent';\n\nimport * as chaptersAndVerses from '../../../chaptersAndVerses';\n\nexport const ChaptersComponent = ({\n  classes,\n  bookData,\n  context,\n  setContext,\n  context: {\n    reference,\n  },\n}) => {\n  const chapters = chaptersAndVerses.chaptersInBook(reference.bookId)\n  .map((verses, index) =>\n    <ChapterComponent\n      key={index}\n      chapter={index+1}\n      verses={verses}\n      context={context}\n      setContext={setContext}\n    />\n  );\n\n  return (\n    <Paper className={classes.root}>\n      <List\n        className={classes.root}\n        component=\"nav\"\n        dense\n      >\n        <div className={classes.list}>\n          {chapters}\n        </div>\n      </List>\n    </Paper>\n  );\n};\n\nChaptersComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    height: '100%',\n    maxWidth: '40em',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n  },\n  list: {\n    height: '100%',\n    overflowY: 'auto',\n  },\n});\n\nexport default withStyles(styles)(ChaptersComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  ExpansionPanel,\n  ExpansionPanelSummary,\n  ExpansionPanelDetails,\n  ExpansionPanelActions,\n  IconButton,\n} from '@material-ui/core';\nimport {\n  ExpandMore,\n  ExpandLess,\n} from '@material-ui/icons';\n\nimport styles from '../../styles';\n\nexport const ExpansionPanelComponent = ({\n  classes,\n  summary,\n  details,\n  id,\n  open,\n  handleToggle,\n  handleClose\n}) => {\n  return (\n    <ExpansionPanel expanded={open} className={classes.column} onChange={handleToggle}>\n      <ExpansionPanelSummary expandIcon={<ExpandMore />}>\n        <span id={id} style={{position: 'absolute', top: '-5em'}}></span>\n        {summary}\n      </ExpansionPanelSummary>\n      <ExpansionPanelDetails className={classes.expansionPanelDetails}>\n      {\n        open ?\n          <div className={classes.fullWidth}>\n            {details}\n          </div>\n        : ''\n      }\n      </ExpansionPanelDetails>\n      <ExpansionPanelActions className={classes.expansionPanelActions}>\n        <IconButton\n          className={classes.button}\n          aria-label=\"Close\"\n          onClick={handleClose}\n        >\n          <ExpandLess />\n        </IconButton>\n      </ExpansionPanelActions>\n    </ExpansionPanel>\n  );\n};\n\nExpansionPanelComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  summary: PropTypes.object.isRequired,\n  details: PropTypes.object,\n  open: PropTypes.bool.isRequired,\n  id: PropTypes.number.isRequired,\n  handleToggle: PropTypes.func.isRequired,\n  handleClose: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(ExpansionPanelComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n} from '@material-ui/core';\n\nimport ExpansionPanelComponent from './ExpansionPanelComponent';\n\nclass ExpansionContainer extends React.Component {\n  state = {\n    id: Math.random(),\n    open: false,\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n    this.scrollToId(this.state.id);\n  };\n\n  handleToggle = () => {\n    this.setState({ open: !this.state.open });\n    this.scrollToId(this.state.id);\n  };\n\n  scrollToId = (id) => {\n    const element = document.getElementById(id);\n    if (element) {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  };\n\n  render() {\n    const {props} = this;\n    const {open, id} = this.state;\n    return (\n      <ExpansionPanelComponent\n        {...props}\n        id={id}\n        open={open}\n        handleClose={this.handleClose.bind(this)}\n        handleToggle={this.handleToggle.bind(this)}\n      />\n    )\n  }\n}\n\nExpansionContainer.propTypes = {\n  summary: PropTypes.object.isRequired,\n  details: PropTypes.object,\n};\n\nexport default ExpansionContainer;\n","import * as ApplicationHelpers from '../../../helpers';\n\nconst repository = (languageId) => ApplicationHelpers.resourceRepositories(languageId).ta;\n// https://git.door43.org/[username]/[languageId]_ta/src/branch/master/translate/figs-metaphor\n// title = title.md\n// markdown = 01.md\nexport const fetchTitle = (username, languageId, linkPath) => new Promise((resolve, reject) => {\n  const uriPath = linkPath.split('/').splice(1).join('/') + '/title.md';\n  ApplicationHelpers.fetchFileFromServer(username, repository(languageId), uriPath)\n  .then(resolve).catch(reject);\n});\n\nexport const fetchArticle = (username, languageId, linkPath) => new Promise((resolve, reject) => {\n  const uriPath = linkPath.split('/').splice(1).join('/') + '/01.md';\n  ApplicationHelpers.fetchFileFromServer(username, repository(languageId), uriPath)\n  .then(article => {\n    const prefix = linkPath.split('/').splice(0,2).join('/');\n    article = article.split('../').join(`http://${languageId}/ta/${prefix}/`)\n      .split('/01.md').join('').split('rc://').join('http://');\n    resolve(article);\n  }).catch(reject);\n});\n","import * as ApplicationHelpers from '../../../helpers';\n\nconst repository = (languageId) => ApplicationHelpers.resourceRepositories(languageId).tw;\n// https://git.door43.org/[username]/[languageId]_ta/src/branch/master/bible/kt/abomination.md\n// title = first line of file\n// markdown = the path + .md\n// rc://en/tw/dict/bible/kt/christ\nexport const fetchTitle = (username, languageId, linkPath) => new Promise((resolve, reject) => {\n  const uriPath = linkPath.split('/').splice(1).join('/') + '.md';\n  ApplicationHelpers.fetchFileFromServer(username, repository(languageId), uriPath)\n  .then(markdown => {\n    const title = markdown.split(/\\n/)[0].replace(/#/g, '').trim();\n    resolve(title);\n  }).catch(reject);\n});\n\nexport const fetchArticle = (username, languageId, linkPath) => new Promise((resolve, reject) => {\n  const uriPath = linkPath.split('/').splice(1).join('/') + '.md'; // remove \"/dict/\"\n  ApplicationHelpers.fetchFileFromServer(username, repository(languageId), uriPath)\n  .then(article => {\n    const prefix = linkPath.split('/').splice(0,2).join('/');\n    article = article.split('../').join(`http://${languageId}/tw/${prefix}/`)\n      .split('.md').join('').split('rc://').join('http://');\n    resolve(article);\n  }).catch(reject);\n});\n","import * as TranslationAcademyHelpers from './TranslationAcademy/helpers';\nimport * as TranslationWordsHelpers from './TranslationWords/helpers';\n\nexport const fetchTitle = (username, languageId, resourceId, linkPath) => new Promise((resolve, reject) => {\n  switch (resourceId) {\n    case 'ta':\n      TranslationAcademyHelpers.fetchTitle(username, languageId, linkPath)\n      .then(resolve).catch(error => console.log(error));\n      break;\n    case 'tw':\n      TranslationWordsHelpers.fetchTitle(username, languageId, linkPath)\n      .then(resolve).catch(error => console.log(error));\n      break;\n    case 'tn':\n      break;\n    default:\n      const message = `resourceId not configured: ${languageId} - ${resourceId} - ${linkPath}`;\n      console.log(message);\n      break;\n  };\n});\n\nexport const fetchArticle = (username, languageId, resourceId, linkPath) => new Promise((resolve, reject) => {\n  switch (resourceId) {\n    case 'ta':\n      TranslationAcademyHelpers.fetchArticle(username, languageId, linkPath)\n      .then(resolve).catch(error => console.log(error));\n      break;\n    case 'tw':\n      TranslationWordsHelpers.fetchArticle(username, languageId, linkPath)\n      .then(resolve).catch(error => console.log(error));\n      break;\n    case 'tn':\n      break;\n    default:\n      const message = `resourceId not configured: ${languageId} - ${resourceId} - ${linkPath}`;\n      console.log(message);\n      break;\n  };\n});\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Chip,\n  Typography,\n} from '@material-ui/core';\n\nimport * as helpers from './helpers';\n\nclass RCLinkContainer extends React.Component {\n  state = {\n    context: this.props.context,\n    path: null,\n    title: null,\n    article: null,\n    open: null,\n  };\n\n  parseHref(href) {\n    const {username} = this.props.context;\n    let _match, languageId, resourceId, path, reference, linkedResourceId;\n    if (_match && linkedResourceId) {/* not used, this bypasses linter warning */}\n    const regexpLanguageIdResourcePath = /http:\\/\\/([\\w-_]+)\\/([\\w-_]+)\\/(.+)/;\n    if (regexpLanguageIdResourcePath.test(href)) {\n      const match = regexpLanguageIdResourcePath.exec(href);\n      [_match, languageId, resourceId, path] = match;\n    } else {\n      path = href;\n    }\n    if (resourceId === 'tn') {\n      const regexpReference = /\\/([\\w]+)\\/([\\d]+)\\/([\\d]+)/;\n      if (regexpReference.test(path)) {\n        const match = regexpReference.exec(path);\n        const [_match, bookId, chapter, verse] = match;\n        if (_match) {/* not used, this bypasses linter warning */}\n        if (bookId === 'obs') {\n          resourceId = 'obs';\n          reference = {chapter: parseInt(chapter), verse: parseInt(verse)};\n        } else {\n          resourceId = 'ult';\n          reference = {bookId, chapter: parseInt(chapter), verse: parseInt(verse)};\n        }\n      }\n    }\n    return {\n      context: {\n        username,\n        languageId,\n        resourceId,\n        reference,\n      },\n      path,\n    }\n  };\n\n  componentWillMount() {\n    const {href, children} = this.props;\n    let state = this.parseHref(href);\n    const text = children[0];\n    if (text !== href) {\n      state.title = text;\n    }\n    this.setState(state);\n  };\n\n  componentDidMount() {\n    const {\n      context: {\n        username,\n        languageId,\n        resourceId,\n      },\n      title,\n      path,\n    } = this.state;\n    if (!title && languageId && resourceId && path) {\n      helpers.fetchTitle(username, languageId, resourceId, path)\n      .then(title => {\n        this.setState({\n          title: title,\n        });\n      });\n    }\n  };\n\n  handleOpen = () => {\n    const {\n      context: {\n        username,\n        languageId,\n        resourceId,\n        reference,\n      },\n      path,\n      title,\n    } = this.state;\n    if (reference) {\n      let {context} = this.props;\n      if (['ult','obs'].includes(resourceId)) context.resourceId = resourceId;\n      context.reference = reference;\n      this.props.setContext(context);\n    } else {\n      helpers.fetchArticle(username, languageId, resourceId, path)\n      .then(article => {\n        const tab = {\n          title: title || path,\n          text: article,\n        };\n        this.props.addTab(tab);\n      });\n    }\n  };\n\n  handleClose = () => {\n    this.setState({ open: false });\n  };\n\n  render() {\n    const {title, path} = this.state;\n    const {classes} = this.props;\n\n    return (\n      <Chip\n        label={\n          <Typography noWrap component='span'>\n            {title || path}\n          </Typography>\n        }\n        component='span'\n        className={classes.chip}\n        classes={{label: classes.label}}\n        onClick={this.handleOpen}\n        clickable\n      />\n    );\n  }\n};\n\nRCLinkContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  href: PropTypes.string.isRequired,\n  addTab: PropTypes.func.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\n\nconst styles = theme => ({\n  chip: {\n    height: 'unset',\n    maxWidth: '95%',\n  },\n  label: {\n    maxWidth: '94%',\n  }\n});\n\nexport default withStyles(styles, { withTheme: true })(RCLinkContainer);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport remark from 'remark';\nimport remark2react from 'remark-react';\nimport {\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport RCLinkContainer from './RCLinkContainer';\n\nclass TextComponentWithRCLinks extends React.Component {\n  state = {\n    component: null,\n  };\n\n  componentDidMount() {\n    const {text, addTab, context, setContext} = this.props;\n    const options = {\n      remarkReactComponents: {\n        a: (props) => (\n          <RCLinkContainer\n            {...props}\n            context={context}\n            setContext={setContext}\n            addTab={addTab}\n          />\n        ),\n        div: (props) => <div {...props} style={{width: '100%'}}/>,\n      }\n    };\n    const component = remark()\n    .use(remark2react, options)\n    .processSync(text).contents;\n    this.setState({\n      component,\n    });\n  };\n\n  render() {\n    return this.state.component;\n  };\n};\n\nTextComponentWithRCLinks.propTypes = {\n  text: PropTypes.string.isRequired,\n  addTab: PropTypes.func.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nexport default TextComponentWithRCLinks;\n","import TranslationNoteComponent from './TranslationNoteComponent';\nexport default TranslationNoteComponent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Divider,\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport TextComponentWithRCLinks from '../TextComponentWithRCLinks';\n\nexport const TranslationNoteComponent = ({\n  classes,\n  context,\n  setContext,\n  note,\n  addTab,\n}) => {\n  if (!note) debugger\n  const occurrence_note = note.occurrence_note.replace(/\\[\\[rc:\\/\\//g, 'http://').replace(/\\]\\]?/g, '');\n  const noteComponent = (\n    <TextComponentWithRCLinks\n      context={context}\n      setContext={setContext}\n      text={occurrence_note}\n      addTab={addTab}\n    />\n  );\n  return (\n    <div className={classes.root}>\n      <Divider />\n      <div className={classes.note}>\n        <strong>{note.gl_quote}</strong> {noteComponent}\n      </div>\n    </div>\n  );\n};\n\nTranslationNoteComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  note: PropTypes.object.isRequired,\n  addTab: PropTypes.func.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n  note: {\n    marginTop: '0.5em',\n    marginBottom: '0.5em',\n  },\n});\n\nexport default withStyles(styles)(TranslationNoteComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Typography,\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nexport const Component = ({\n  classes,\n  verseObject,\n  senses\n}) => {\n\n  return (\n    <div>\n      <Typography>\n        <span><strong>{verseObject.text || verseObject.content}</strong> -</span>\n        <span> <em>lemma:</em> {verseObject.lemma}</span>\n        <span> <em>strong:</em> {verseObject.strong}</span>\n        <br/>\n        <span> <em>morph:</em> {verseObject.morph}</span>\n      </Typography>\n      {\n        senses.map((sense, index) =>\n          <Typography key={index}>\n            <sup>{index + 1}</sup>\n            {\n              sense.gloss ?\n              <span> <em>Gloss:</em> {sense.gloss}</span>\n              : ''\n            }\n            {\n              sense.definition ?\n              <span> <em>Definition:</em> {sense.definition}</span>\n              : ''\n            }\n          </Typography>\n        )\n      }\n    </div>\n  );\n};\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  verseObject: PropTypes.object.isRequired,\n  senses: PropTypes.array,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n});\n\nexport default withStyles(styles)(Component);\n","import path from 'path';\nimport * as ApplicationHelpers from '../../../../../../helpers';\n\nconst username = 'unfoldingword';\nconst languageId = 'en'\nconst repositories = ApplicationHelpers.resourceRepositories(languageId);\n\nexport const parseSenses = (lexiconMarkdown) => {\n  let senses = [];\n  const sensesSection = lexiconMarkdown.split(/##\\s*Senses/)[1];\n  const senseSections = sensesSection.split(/###\\s*Sense/).splice(1);\n  senseSections.forEach(senseSection => {\n    const definitionRegexp = /####\\s*Definitions?.*?[\\n\\s]+(.*?)\\n/;\n    const glossRegexp = /####\\s*Glosse?s?.*?[\\n\\s]+(.*?)\\n/;\n    let definition = definitionRegexp.test(senseSection) ? definitionRegexp.exec(senseSection)[1] : null;\n    definition = (!/#/.test(definition)) ? definition : null;\n    let gloss = glossRegexp.test(senseSection) ? glossRegexp.exec(senseSection)[1] : null;\n    gloss = (!/#/.test(gloss)) ? gloss : null;\n    const sense = {\n      definition: definition,\n      gloss: gloss,\n    };\n    senses.push(sense);\n  });\n  const uniqueSenses = unique(senses);\n  return uniqueSenses;\n};\n\nexport const senses = (strong) => new Promise((resolve, reject) => {\n  let repository, filepath;\n  if (/H\\d+/.test(strong)) {\n    repository = repositories.uhal;\n    const _strong = strong.match(/H\\d+/)[0];\n    filepath = path.join('content', _strong + '.md');\n  }\n  if (/G\\d+/.test(strong)) {\n    repository = repositories.ugl;\n    filepath = path.join('content', strong, '01.md');\n  }\n  ApplicationHelpers.fetchFileFromServer(username, repository, filepath)\n  .then(markdown => {\n    const senses = parseSenses(markdown);\n    resolve(senses);\n  }).catch(reject);\n});\n\nexport const unique = (array, response=[]) => {\n  let _array = array;\n  array.forEach(object => {\n    _array = _array.filter(_object =>\n      !(object.gloss === _object.gloss && object.definition === _object.definition)\n    );\n    _array.push(object);\n  });\n  return _array;\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport Component from './Component';\nimport * as helpers from './helpers';\n\nclass Container extends React.Component {\n  state = {\n    senses: [],\n  };\n\n  componentDidMount() {\n    helpers.senses(this.props.verseObject.strong)\n    .then(senses => {\n      if (!this.unmounted) {\n        this.setState({\n          senses: senses,\n        });\n      }\n    }).catch(error => {\n      console.log(error);\n    });\n  };\n\n  componentWillUnmount() {\n    this.unmounted = true;\n  }\n\n  render() {\n    return (\n      <Component\n        verseObject={this.props.verseObject}\n        senses={this.state.senses}\n      />\n    );\n  };\n};\n\nContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  verseObject: PropTypes.object.isRequired,\n};\n\nconst styles = theme => ({\n});\n\nexport default withStyles(styles, { withTheme: true })(Container);\n","import Container from './Container';\nexport default Container;\n","export const styles = theme => ({\n  root: {\n    backgroundColor: theme.palette.background.paper,\n    width: '100%',\n  },\n  width: {\n    width: '100%',\n  },\n  appBar: {\n    width: '95%',\n    zIndex: '10',\n    margin: 'auto',\n  },\n  hidden: {\n    // height: '0px',\n  },\n  padding: {\n    padding: `0 ${theme.spacing.unit * 2}px`,\n  },\n  tabContent: {\n    padding: `0 ${theme.spacing.unit * 3}px`,\n  }\n});\n\nexport default styles;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Divider,\n} from '@material-ui/core';\n\nimport TextComponentWithRCLinks from './TextComponentWithRCLinks';\nimport TranslationNotes from './TranslationNotes';\nimport AlignedWord from '../Scripture/ScriptureView/VerseObject/AlignedWords/AlignedWord';\n\nimport styles from './styles';\n\nexport const Component = ({\n  tab,\n  addTab,\n  open,\n  context,\n  setContext,\n}) => {\n\n  let content = <div/>;\n  if (open) {\n    if (tab.text) {\n      content = <TextComponentWithRCLinks\n        text={tab.text}\n        addTab={addTab}\n        context={context}\n        setContext={setContext}\n      />;\n    } else if (tab.notes) {\n      content = tab.notes.map((note, index) =>\n        <TranslationNotes\n          key={index}\n          note={note}\n          addTab={addTab}\n          context={context}\n          setContext={setContext}\n        />\n      );\n    } else if (tab.original) {\n      const wordObjects = tab.original;\n      content = wordObjects.map((wordObject, index) => {\n        const link = wordObject.link.replace('rc://*/', `http://${context.languageId}/`);\n        const originalWords = wordObject.originalWords.map((verseObject, index) =>\n          <AlignedWord key={index} verseObject={verseObject} />\n        );\n        const text = `${link}`;\n        return (\n          <div key={index}>\n            <Divider />\n            <TextComponentWithRCLinks\n              text={text}\n              addTab={addTab}\n              context={context}\n              setContext={setContext}\n            />\n            {originalWords}\n          </div>\n        );\n      });\n    } else if (tab.words) {\n      content = tab.words.map((word, index) => {\n        return (\n          <div key={index}>\n            <Divider />\n            <TextComponentWithRCLinks\n              text={word}\n              addTab={addTab}\n              context={context}\n              setContext={setContext}\n            />\n          </div>\n        );\n      });\n    } else if (tab.content) {\n      content = tab.content;\n    }\n  }\n  return content;\n}\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  tab: PropTypes.object.isRequired,\n  addTab: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Component);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  AppBar,\n  Tabs,\n  Tab,\n  Badge,\n} from '@material-ui/core';\n\nimport HelpsTab from './HelpsTab';\n\nimport styles from './styles';\n\nexport const Component = ({\n  classes,\n  context,\n  setContext,\n  tabs,\n  addTab,\n  tabIndex,\n  handleChangeIndex,\n  id,\n}) => {\n  let tabLabels = [];\n  let tabContents = [];\n  let badgeCount = 0;\n\n  tabs.forEach((tab, index) => {\n    if (tab.text) {\n      badgeCount = 0;\n    } else if (tab.notes) {\n      badgeCount = tab.notes.length;\n    } else if (tab.original) {\n      const wordObjects = tab.original;\n      badgeCount = wordObjects.length;\n    } else if (tab.words) {\n      badgeCount = tab.words.length;\n    } else if (tab.content) {\n      badgeCount = tab.content.length;\n    }\n    const badge = (\n      <Badge className={classes.padding} color=\"primary\" badgeContent={badgeCount}>\n        {tab.title}\n      </Badge>\n    );\n    tabLabels.push(\n      <Tab key={tabLabels.length} label={ (badgeCount > 0) ? badge : tab.title } />\n    );\n    const open = (index === tabIndex);\n    tabContents.push(\n      <div key={tabContents.length} className={ open ? classes.tabContent : classes.hidden }>\n        <HelpsTab\n          tab={tab}\n          addTab={addTab}\n          open={open}\n          context={context}\n          setContext={setContext}\n        />\n      </div>);\n  });\n\n  const currentTab = tabContents[tabIndex];\n\n  return (\n    <div id={id} className={classes.root}>\n      <AppBar className={classes.appBar} position=\"sticky\" color=\"default\">\n        <Tabs\n          className={classes.width}\n          value={tabIndex}\n          onChange={handleChangeIndex}\n          indicatorColor=\"primary\"\n          textColor=\"primary\"\n          variant=\"scrollable\"\n          scrollButtons=\"auto\"\n        >\n          {tabLabels}\n        </Tabs>\n      </AppBar>\n      <div className={classes.width}>\n        {currentTab}\n      </div>\n    </div>\n  );\n}\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  theme: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  tabs: PropTypes.array.isRequired,\n  addTab: PropTypes.func.isRequired,\n  handleChangeIndex: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles, { withTheme: true })(Component);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {\n} from '@material-ui/core';\n\nimport Component from './Component';\n\nclass Container extends React.Component {\n  state = {\n    id: Math.random(),\n    tabIndex: 0,\n    tabs: this.props.tabs,\n  };\n\n  handleChangeIndex = (_index, __index) => {\n    const index = (__index !== undefined) ? __index : _index;\n    this.setState({ tabIndex: index });\n    this.scrollToId(this.state.id);\n  };\n\n  addTab = (tab) => {\n    let {tabs} = this.state;\n    tabs.push(tab);\n    this.setState({\n      tabs,\n      tabIndex: tabs.length - 1,\n    });\n    this.scrollToId(this.state.id);\n  };\n\n  scrollToId = (id) => {\n    const element = document.getElementById(id);\n    if (element) {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  };\n\n  render() {\n    const {props} = this;\n    const {tabs, tabIndex, id} = this.state;\n    return (\n      <Component\n        {...props}\n        id={id}\n        tabs={tabs}\n        tabIndex={tabIndex}\n        addTab={this.addTab.bind(this)}\n        handleChangeIndex={this.handleChangeIndex.bind(this)}\n      />\n    )\n  }\n}\n\nContainer.propTypes = {\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  tabs: PropTypes.array.isRequired,\n};\n\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nexport const Word = ({\n  classes,\n  verseObject,\n}) => {\n\n  return (\n    <span>\n      {' '}{verseObject.text || verseObject.content}\n    </span>\n  );\n};\n\nWord.propTypes = {\n  classes: PropTypes.object.isRequired,\n  verseObject: PropTypes.object.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n});\n\nexport default withStyles(styles)(Word);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Popover,\n} from '@material-ui/core';\n\nimport Word from '../Word';\nimport AlignedWord from './AlignedWord';\n\nclass AlignedWords extends React.Component {\n  state = {\n    anchorEl: null,\n  };\n\n  handlePopoverOpen = event => {\n    this.setState({ anchorEl: event.currentTarget });\n  };\n\n  handlePopoverClose = () => {\n    this.setState({ anchorEl: null });\n  };\n\n  render() {\n    const { classes, children, originalWords } = this.props;\n    const { anchorEl } = this.state;\n    const open = Boolean(anchorEl);\n    return (\n      <span>\n        <span\n          aria-owns={open ? 'mouse-over-popover' : undefined}\n          aria-haspopup=\"true\"\n          onMouseEnter={this.handlePopoverOpen}\n          onMouseLeave={this.handlePopoverClose}\n          className={(open ? classes.open : classes.closed)}\n        >\n          {\n            children.map((verseObject, index) =>\n              <Word key={index} verseObject={verseObject} />\n            )\n          }\n        </span>\n        <Popover\n          id=\"mouse-over-popover\"\n          className={classes.popover}\n          classes={{\n            paper: classes.paper,\n          }}\n          open={open}\n          anchorEl={anchorEl}\n          anchorOrigin={{\n            vertical: 'bottom',\n            horizontal: 'left',\n          }}\n          transformOrigin={{\n            vertical: 'top',\n            horizontal: 'left',\n          }}\n          onClose={this.handlePopoverClose}\n          disableRestoreFocus\n        >\n        {\n          originalWords.map((verseObject, index) =>\n            <AlignedWord key={index} verseObject={verseObject} />\n          )\n        }\n        </Popover>\n      </span>\n    );\n  }\n}\n\nAlignedWords.propTypes = {\n  classes: PropTypes.object.isRequired,\n  children: PropTypes.array.isRequired,\n  originalWords: PropTypes.array,\n};\n\nconst styles = theme => ({\n  open: {\n    backgroundColor: 'lightgoldenrodyellow',\n  },\n  closed: {\n  },\n  popover: {\n    pointerEvents: 'none',\n  },\n  paper: {\n    padding: theme.spacing.unit,\n  },\n});\n\nexport default withStyles(styles, { withTheme: true })(AlignedWords);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport VerseObject from '../VerseObject';\nimport AlignedWords from './AlignedWords';\n\nexport const Milestone = ({\n  classes,\n  originalWords,\n  verseObject: {\n    tag,\n    children,\n    tw,\n    strong,\n    lemma,\n    morph,\n    occurrence,\n    occurrences,\n    content,\n  },\n}) => {\n  let component;\n  switch (tag) {\n    case 'k':\n      component = children.map((child, index) =>\n        <VerseObject\n          key={index}\n          verseObject={child}\n        />\n      );\n      break;\n    case 'zaln':\n      const originalWord = {\n        strong,\n        lemma,\n        morph,\n        occurrence,\n        occurrences,\n        content,\n      };\n      let _originalWords = JSON.parse(JSON.stringify(originalWords));\n      _originalWords.push(originalWord);\n      if (children.length === 1 && children[0].type === 'milestone') {\n        component = (\n          <VerseObject\n            verseObject={children[0]}\n            originalWords={_originalWords}\n          />\n        );\n      } else {\n        component = (\n          <AlignedWords\n            originalWords={_originalWords}\n            children={children}\n          />\n        );\n      }\n      break;\n    default:\n      component = (<div/>);\n      break;\n  }\n\n  return component;\n};\n\nMilestone.propTypes = {\n  verseObject: PropTypes.object.isRequired,\n  originalWords: PropTypes.array,\n};\n\nexport default Milestone;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nexport const Text = ({classes, verseObject}) => {\n  return (\n    <span>\n      {verseObject.text}\n    </span>\n  );\n};\n\nText.propTypes = {\n  classes: PropTypes.object.isRequired,\n  verseObject: PropTypes.object.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n});\n\nexport default withStyles(styles)(Text);\n","import Component from './Component';\nexport default Component;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Milestone from './Milestone';\nimport Text from './Text';\nimport Word from './Word';\nimport AlignedWords from './AlignedWords';\n\nexport const Component = ({\n  classes,\n  verseObject,\n  originalWords=[],\n}) => {\n  const {type} = verseObject;\n  let component;\n\n  switch (type) {\n    case 'text':\n      component = <Text verseObject={verseObject} />;\n      break;\n    case 'quote':\n      component = <blockquote><Text verseObject={verseObject} /></blockquote>;\n      break;\n    case 'milestone':\n      component = (\n        <Milestone\n          verseObject={verseObject}\n          originalWords={originalWords}\n        />\n      );\n      break;\n    case 'word':\n      if (verseObject.strong) {\n        component = (\n          <AlignedWords\n            children={[verseObject]}\n            originalWords={[verseObject]}\n          />\n        );\n      } else {\n        component = <Word verseObject={verseObject} />;\n      }\n      break;\n    case 'section':\n      component = <span/>;\n      break;\n    case 'paragraph':\n      component = <span/>;\n      break;\n    case 'footnote':\n      component = <sup>*</sup>;\n      break;\n    default:\n      debugger\n      component = <span>...</span>;\n      break;\n  };\n\n  return (\n    <span data-verseObject={JSON.stringify(verseObject)}>\n      {component}\n      {verseObject.nextChar}\n    </span>\n  );\n};\n\nComponent.propTypes = {\n  verseObject: PropTypes.object.isRequired,\n  originalWords: PropTypes.array,\n};\n\nexport default Component;\n","import Component from './Component';\nexport default Component;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Divider,\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport styles from '../../../styles';\n\nimport ExpansionPanelContainer from '../ExpansionPanelContainer';\nimport VerseObject from '../VerseObject';\nimport TranslationHelps from '../../../TranslationHelps';\n\nimport * as originalHelpers from '../../../TranslationHelps/Original/helpers';\nimport * as chaptersAndVerses from '../../../../chaptersAndVerses';\n\nexport const VerseComponent = ({\n  classes,\n  languageId,\n  verseKey,\n  lemmaIndex,\n  ultVerseData,\n  ustVerseData,\n  originalVerseData,\n  translationNotesVerseData,\n  context,\n  setContext,\n  context: {\n    resourceId,\n    reference,\n  },\n}) => {\n  let tabs = [];\n\n  const ultVerse =\n  ultVerseData.verseObjects ?\n  ultVerseData.verseObjects.map((verseObject, index) => {\n    return (\n      <VerseObject\n        key={index}\n        verseObject={verseObject}\n      />\n    );\n  }) : <span />;\n\n  let ustVerseComponent = <span />;\n  if (ustVerseData && ustVerseData.verseObjects) {\n    const ustVerse = ustVerseData.verseObjects.map((verseObject, index) => {\n      return (\n        <VerseObject\n          key={index}\n          verseObject={verseObject}\n        />\n      );\n    });\n    ustVerseComponent = (\n      <div className={classes.originalVerse}>\n        <sup>{verseKey} </sup>\n        {ustVerse}\n      </div>\n    );\n  }\n\n  let originalVerseComponent = <span />;\n  if (originalVerseData && originalVerseData.verseObjects) {\n    const originalVerse = originalVerseData.verseObjects.map((verseObject, index) => {\n      return (\n        <VerseObject\n          key={index}\n          verseObject={verseObject}\n        />\n      );\n    });\n    const testament = chaptersAndVerses.testament(reference.bookId);\n    originalVerseComponent = (\n      <div className={classes.originalVerse} style={{direction: (testament === 'old') ? 'rtl' : 'ltr'}}>\n        <sup>{verseKey} </sup>\n        {originalVerse}\n      </div>\n    );\n\n    const wordObjects = originalHelpers.taggedWords(originalVerseData.verseObjects);\n    if (wordObjects.length > 0) {\n      const wordsTab = {\n        title: 'Words',\n        original: wordObjects,\n      };\n      tabs.push(wordsTab);\n    }\n  }\n  if (translationNotesVerseData) {\n    const notesTab = {\n      title: 'Notes',\n      notes: translationNotesVerseData,\n    };\n    tabs.push(notesTab)\n  };\n\n  const details = (\n    <div>\n      <Divider variant=\"middle\" />\n      {originalVerseComponent}\n      <Divider variant=\"middle\" />\n      {ustVerseComponent}\n      {\n        (tabs.length > 0) ?\n        <TranslationHelps\n          context={context}\n          setContext={setContext}\n          tabs={tabs}\n        /> : null\n      }\n    </div>\n  )\n  const {bookId, chapter} = reference;\n  const id = `${bookId}_${chapter}_${verseKey}`;\n\n  return (\n    <ExpansionPanelContainer\n      summary={\n        <div>\n          <div className={classes.verse}>\n            <span id={id} style={{position: 'absolute', top: '-5em'}}></span>\n            <sup>{verseKey} </sup>\n            {ultVerse}\n          </div>\n        </div>\n      }\n      details={details}\n    />\n  );\n};\n\nVerseComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  verseKey: PropTypes.string.isRequired,\n  lemmaIndex: PropTypes.object,\n  ultVerseData: PropTypes.object.isRequired,\n  ustVerseData: PropTypes.object,\n  translationNotesVerseData: PropTypes.array,\n  originalVerseData: PropTypes.object,\n};\n\nexport default withStyles(styles, { withTheme: true })(VerseComponent);\n","\nexport const taggedWords = (verseObjects) => {\n  const wordLinks = verseObjects\n  .filter(verseObject => verseObject.tw)\n  .map(verseObject => {\n    let originalWords = [];\n    if (verseObject.type === 'word') originalWords.push(verseObject);\n    if (verseObject.children) originalWords = originalWords.concat(verseObject.children);\n    let wordObject = {\n      link: verseObject.tw,\n      originalWords,\n    };\n    return wordObject;\n  });\n  return wordLinks;\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport styles from '../../styles';\n\nimport TranslationHelps from '../../TranslationHelps';\nimport ExpansionPanelContainer from './ExpansionPanelContainer';\nimport Verse from './Verse';\n\nexport const ChapterComponent = ({\n  classes,\n  context,\n  context: {\n    reference,\n  },\n  setContext,\n  lemmaIndex,\n  ultChapterData,\n  ustChapterData,\n  originalChapterData,\n  translationNotesChapterData,\n}) => {\n  const verses = Object.keys(ultChapterData)\n  .filter(verseKey => {\n    const text = ultChapterData[verseKey].verseObjects.map(o => o.text).join('');\n    return /\\S+/g.test(text);\n  })\n  .map(verseKey =>\n    <Verse\n      key={`${reference.chapter}-${verseKey}`}\n      context={context}\n      setContext={setContext}\n      lemmaIndex={lemmaIndex}\n      verseKey={verseKey}\n      ultVerseData={ultChapterData[verseKey]}\n      ustVerseData={ustChapterData[verseKey]}\n      originalVerseData={originalChapterData ? originalChapterData[verseKey] : null}\n      translationNotesVerseData={translationNotesChapterData[verseKey]}\n    />\n  );\n  const intro = (translationNotesChapterData['intro'] && translationNotesChapterData['intro'][0]) ?\n    translationNotesChapterData['intro'][0]['occurrence_note']\n    .replace(/\\[\\[rc:\\/\\//g, 'http://').replace(/\\]\\]?/g, '')\n    : '';\n  const tabs = [{\n    title: 'Chapter Notes',\n    text: intro,\n  }];\n  const introPanel = (\n    <ExpansionPanelContainer\n      key={'chapter'+reference.chapter}\n      summary={<h2>Chapter {reference.chapter}</h2>}\n      details={\n        <TranslationHelps\n          context={context}\n          setContext={setContext}\n          tabs={tabs}\n        />\n      }\n    />\n  );\n  const panels = [introPanel].concat(verses);\n\n  return panels;\n};\n\nChapterComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  lemmaIndex: PropTypes.object,\n  ultChapterData: PropTypes.object.isRequired,\n  ustChapterData: PropTypes.object.isRequired,\n  translationNotesChapterData: PropTypes.object,\n  originalChapterData: PropTypes.object,\n};\n\nexport default withStyles(styles)(ChapterComponent);\n","import Component from './Component';\nexport default Component;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MUIDataTable from \"mui-datatables\";\nimport { createMuiTheme, MuiThemeProvider } from '@material-ui/core/styles';\n\nimport * as helpers from './helpers';\n\nconst getMuiTheme = () => createMuiTheme({\n  overrides: {\n    MuiPaper: {\n      elevation4: {\n        boxShadow: 'none',\n      },\n      rounded: {\n        borderRadius: 'unset',\n      },\n      root: {\n        backgroundColor: 'unset',\n      }\n    },\n    MuiTableCell: {\n      root: {\n        padding: \"0 8px 0 8px\",\n      }\n    },\n    MuiTableRow: {\n      root: {\n        height: 'unset',\n      }\n    },\n  }\n});\n\nexport const AlignmentsTable = ({\n  lemmaIndex,\n}) => {\n  const columns = [\n    {\n      name: \"Strong's: Lemma\",\n      options: {\n        filter: false,\n        sort: true,\n      }\n    },\n    {\n      name: \"UGNT\",\n      options: {\n       filter: false,\n       sort: true,\n      }\n    },\n    {\n      name: \"ULT\",\n      options: {\n       filter: false,\n       sort: true,\n      }\n    },\n    {\n      name: \"C:V\",\n      options: {\n       filter: false,\n       sort: true,\n      }\n    },\n  ];\n\n  let data = [];\n  Object.keys(lemmaIndex).forEach(lemma => {\n    const lemmaRows = lemmaIndex[lemma].map(entry => {\n      const {\n        strong,\n        alignment,\n        reference: {\n          chapter,\n          verse,\n        },\n      } = entry;\n      const {originalTexts, targetTexts} = helpers.textFromVerseObject(alignment);\n      const original = originalTexts.join(' ');\n      const target = targetTexts.join(' ');\n      const reference = `${chapter}:${verse}`;\n      return [\n        `${strong}: ${lemma}`,\n        original,\n        target,\n        reference\n      ];\n    });\n    data = data.concat(lemmaRows);\n  });\n\n  const options = {\n    filterType: 'checkbox',\n    selectableRows: false,\n    responsive: 'scroll',\n    download: false,\n    print: false,\n    filter: false,\n    viewColumns: false,\n  };\n\n  return (\n    <MuiThemeProvider theme={getMuiTheme()}>\n      <MUIDataTable\n        title={\"Search UGNT and ULT for this book\"}\n        data={data}\n        columns={columns}\n        options={options}\n      />\n    </MuiThemeProvider>\n  );\n};\n\nAlignmentsTable.propTypes = {\n  lemmaIndex: PropTypes.object.isRequired,\n};\n\nexport default AlignmentsTable;\n","\nexport const textFromVerseObject = (verseObject, originalTexts=[], targetTexts=[]) => {\n  const {content, text, children} = verseObject;\n  if (content) originalTexts.push(content);\n  if (text) targetTexts.push(text);\n  if (children) {\n    children.forEach(_verseObject => {\n      const {_originalTexts, _targetTexts} = textFromVerseObject(_verseObject, originalTexts, targetTexts)\n      originalTexts.concat(_originalTexts);\n      targetTexts.concat(_targetTexts);\n    });\n  }\n  return {\n    originalTexts,\n    targetTexts,\n  };\n};\n\nexport const flattenVerseObjects = (verseObjects) => {\n  let flattenedVerseObjects = [];\n  verseObjects.forEach(verseObject => {\n    const _flattenedVerseObject = flattenVerseObject(verseObject);\n    flattenedVerseObjects = flattenedVerseObjects.concat(_flattenedVerseObject);\n  });\n  return flattenedVerseObjects;\n};\n\nexport const flattenVerseObject = (verseObject, verseObjects=[]) => {\n  const {type, children} = verseObject;\n  if (type === 'word') verseObjects.push(verseObject);\n  if (children) {\n    children.forEach(_verseObject => {\n      const _verseObjects = flattenVerseObject(_verseObject, verseObjects)\n      verseObjects = verseObjects.concat(_verseObjects);\n    });\n  }\n  return verseObjects;\n};\n","import { createMuiTheme } from '@material-ui/core/styles';\n\nconst getMuiTheme = () => createMuiTheme({\n  overrides: {\n    MuiPaper: {\n      elevation4: {\n        boxShadow: 'none',\n      },\n      rounded: {\n        borderRadius: 'unset',\n      },\n      root: {\n        backgroundColor: '#FFF',\n      }\n    },\n    MuiTableCell: {\n      root: {\n        padding: '0 8px 0 8px',\n      }\n    },\n    MUIDataTableHeadCell: {\n      fixedHeader: {\n        zIndex: 'unset',\n      }\n    },\n    MUIDataTable: {\n      responsiveScroll: {\n        maxHeight: 'unset',\n      }\n    },\n    MuiTableRow: {\n      root: {\n        height: 'unset',\n      }\n    },\n  }\n});\n\nexport default getMuiTheme;\n","import Component from './Component';\nexport default Component;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport MUIDataTable from \"mui-datatables\";\nimport { MuiThemeProvider } from '@material-ui/core/styles';\nimport {\n} from '@material-ui/core';\n\nimport getMuiTheme from './theme';\n\nexport const AlignmentsTable = ({\n  tn,\n}) => {\n  const columns = [\n    {\n      name: \"C:V\",\n      options: {\n        filter: false,\n        sort: true,\n      }\n    },\n    {\n      name: \"ID\",\n      options: {\n       filter: false,\n       sort: true,\n       display: 'false',\n      }\n    },\n    {\n      name: \"Type\",\n      options: {\n       filter: true,\n       sort: true,\n      }\n    },\n    {\n      name: \"Original\",\n      options: {\n       filter: false,\n       sort: true,\n      }\n    },\n    {\n      name: \"Occurrence\",\n      options: {\n       filter: false,\n       sort: true,\n       display: 'false',\n      }\n    },\n    {\n      name: \"Gateway\",\n      options: {\n       filter: false,\n       sort: true,\n      }\n    },\n    {\n      name: \"Note\",\n      options: {\n       filter: false,\n       sort: true,\n       display: 'false',\n       customBodyRender: (value, tableMeta, updateValue) => {\n         const maxNoteLength = 100;\n         const note = (value.length <= (maxNoteLength - 3)) ? value :\n           value.substring(0,maxNoteLength) + '...';\n         return (\n           <div>\n            {note}\n           </div>\n         );\n        },\n      }\n    },\n  ];\n  tn.shift();\n  tn.pop();\n  let data = tn.map(row => {\n    const [book, chapter, verse, id, supportReference, origQuote, occurrence, glQuote, note] = row;\n    if (book) {/* book not used, this bypasses linter warning */}\n    const type = (!supportReference) ? 'general' : supportReference;\n    return [\n      `${chapter}:${verse}`,\n      id,\n      type,\n      origQuote,\n      occurrence,\n      glQuote,\n      note,\n    ];\n  });\n\n  const options = {\n    filterType: 'checkbox',\n    selectableRows: false,\n    responsive: 'scroll',\n    download: false,\n    print: false,\n    filter: true,\n    viewColumns: true,\n  };\n\n  return (\n    <MuiThemeProvider theme={getMuiTheme()}>\n      <MUIDataTable\n        title={\"Search translationNotes\"}\n        data={data}\n        columns={columns}\n        options={options}\n      />\n    </MuiThemeProvider>\n  );\n};\n\nAlignmentsTable.propTypes = {\n  tn: PropTypes.array.isRequired,\n};\n\nexport default AlignmentsTable;\n","import BookComponent from './BookComponent';\nexport default BookComponent;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactMarkdown from 'react-markdown';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport styles from '../../styles';\n\nimport ExpansionPanelContainer from './ExpansionPanelContainer';\nimport ChapterComponent from './ChapterComponent';\nimport TranslationHelps from '../../TranslationHelps';\nimport AlignmentsTable from './AlignmentsTable';\nimport TranslationNotesTable from './TranslationNotesTable';\n\nimport * as helpers from '../helpers';\n\nexport const BookComponent = ({\n  classes,\n  context,\n  setContext,\n  context: {\n    reference: {\n      chapter,\n    },\n  },\n  resources: {\n    ult,\n    ust,\n    original,\n    tn,\n  },\n  lemmaIndex,\n}) => {\n  let tnObject = helpers.pivotTranslationNotes(tn);\n  let tabs = [];\n\n  const intro = tnObject['front']['intro'][0]['occurrence_note'];\n  const introDetails = intro.split('\\n').splice(1).join('\\n')\n    .replace(/\\[\\[rc:\\/\\//g, 'http://').replace(/\\]\\]?/g, '');\n  tabs.push({ title: 'Book Notes', text: introDetails});\n\n  if (tn) {\n    const content = (\n      <TranslationNotesTable\n        tn={tn}\n      />\n    );\n    tabs.push({ title: 'Search Notes', content });\n  }\n\n  if (lemmaIndex && Object.keys(lemmaIndex).length > 0) {\n    const content = (\n      <AlignmentsTable\n        lemmaIndex={lemmaIndex}\n      />\n    );\n    tabs.push({ title: \"Search Words\", content });\n  }\n\n  const chapterComponent = (\n    <ChapterComponent\n      context={context}\n      setContext={setContext}\n      lemmaIndex={lemmaIndex}\n      ultChapterData={ult[chapter]}\n      ustChapterData={ust[chapter]}\n      originalChapterData={original[chapter]}\n      translationNotesChapterData={tnObject[chapter]}\n    />\n  );\n  return (\n    <div className={classes.root}>\n      <ExpansionPanelContainer\n        key={''+context.reference.bookId+'intro'}\n        summary={\n          <ReactMarkdown\n            source={intro.split('\\n')[0]}\n            escapeHtml={false}\n          />\n        }\n        details={\n          <TranslationHelps\n            context={context}\n            setContext={setContext}\n            tabs={tabs}\n          />\n        }\n      />\n      {chapterComponent}\n    </div>\n  );\n};\n\nBookComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  resources: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  context: PropTypes.object.isRequired,\n  lemmaIndex: PropTypes.object,\n};\n\nexport default withStyles(styles)(BookComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  CircularProgress,\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport BookSelection from './BookSelection';\nimport ChapterSelection from './ChapterSelection';\nimport ScriptureView from './ScriptureView';\n\nexport const Scripture = ({\n  classes,\n  resources,\n  manifests,\n  context,\n  setContext,\n  context: {\n    reference\n  },\n  referenceLoaded,\n  lemmaIndex,\n}) => {\n  const bookSelection = (\n    <BookSelection\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n    />\n  );\n  const chapterSelection = (\n    <ChapterSelection\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n    />\n  );\n  const scriptureView = (\n    <ScriptureView\n      context={context}\n      setContext={setContext}\n      resources={resources}\n      lemmaIndex={lemmaIndex}\n    />\n  );\n  const loadingComponent = (\n    <CircularProgress className={classes.progress} color=\"secondary\" disableShrink />\n  );\n\n  let component = loadingComponent;\n  const shouldShowBookSelection = (!reference.bookId);\n  const shouldShowChapterSelection = (reference.bookId && !reference.chapter);\n  const shouldShowScriptureView = (referenceLoaded && reference.bookId === referenceLoaded.bookId);\n\n  if (shouldShowBookSelection) component = bookSelection;\n  else if (shouldShowChapterSelection) component = chapterSelection;\n  else if (shouldShowScriptureView) component = scriptureView;\n\n  return (\n    <div className={classes.root}>\n      {component}\n    </div>\n  );\n}\n\nScripture.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  lemmaIndex: PropTypes.object,\n  manifests: PropTypes.object,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n  progress: {\n    margin: 'auto',\n    display: 'block',\n  },\n});\n\nexport default withStyles(styles)(Scripture);\n","\nexport const index = (chapters) => {\n  console.time('indexing');\n  let lemmaIndex = {};\n  const chapterKeys = Object.keys(chapters);\n  chapterKeys.forEach(chapterKey => {\n    const chapter = chapters[chapterKey];\n    const verseKeys = Object.keys(chapter);\n    verseKeys.forEach(verseKey => {\n      const verse = chapter[verseKey];\n      const {verseObjects} = verse;\n      verseObjects.forEach(verseObject => {\n        const originalWords = getWords(verseObject);\n        originalWords.forEach(originalWord => {\n          const {lemma, strong} = originalWord;\n          const entry = {\n            reference: {chapter: chapterKey, verse: verseKey},\n            alignment: verseObject,\n            strong,\n          };\n          if (!lemmaIndex[lemma]) lemmaIndex[lemma] = [];\n          lemmaIndex[lemma].push(entry);\n        })\n      });\n    });\n  });\n  console.timeEnd('indexing');\n  return lemmaIndex;\n};\n\nexport const getWords = (verseObject, originalWords=[]) => {\n  if (verseObject.type === 'milestone') {\n    let originalWord = JSON.parse(JSON.stringify(verseObject));\n    delete originalWord.children;\n    originalWords.push(originalWord);\n    const {children} = verseObject;\n    children.forEach(_verseObject => {\n      getWords(_verseObject, originalWords);\n    });\n  }\n  return originalWords;\n};\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Scripture from './Scripture';\n\nimport * as helpers from './helpers';\nimport * as AlignmentHelpers from './Alignment/helpers';\n\nclass ScriptureContainer extends React.Component {\n  state = {\n    lemmaIndex: null,\n    referenceLoaded: null,\n    resources: {\n      ult: null,\n      ust: null,\n      tn: null,\n      original: null,\n    },\n  };\n\n  fetchResourcesConditionally(nextProps) {\n    const {manifests, context: {reference}} = nextProps;\n    const {ult, ust, obs} = this.state;\n    const referenceChanged = (reference.bookId !== this.props.context.reference.bookId);\n    const emptyBookData = (!(ult || ust || obs));\n    const needToFetch = (emptyBookData || referenceChanged)\n    const canFetch = (reference.bookId && Object.keys(manifests).length > 0);\n    if (canFetch && needToFetch) {\n      helpers.fetchResources(nextProps)\n      .then(resources => {\n        const lemmaIndex = AlignmentHelpers.index(resources.ult);\n        this.setState({\n          lemmaIndex,\n          resources,\n          referenceLoaded: reference,\n        });\n      });\n    }\n  };\n\n  componentWillReceiveProps(nextProps) {\n    this.fetchResourcesConditionally(nextProps);\n  };\n\n  componentDidMount() {\n    this.fetchResourcesConditionally(this.props);\n  };\n\n  componentDidUpdate() {\n    const {reference: {bookId, chapter, verse}} = this.props.context;\n    const id = `${bookId}_${chapter}_${verse}`;\n    const element = document.getElementById(id);\n    if (element) {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  };\n\n  render() {\n    const props = this.props;\n    const {lemmaIndex, resources, referenceLoaded} = this.state;\n    return (\n      <Scripture\n        {...props}\n        lemmaIndex={lemmaIndex}\n        referenceLoaded={referenceLoaded}\n        resources={resources}\n      />\n    );\n  };\n};\n\nScriptureContainer.propTypes = {\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  manifests: PropTypes.object.isRequired,\n};\n\nexport default ScriptureContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  ListItem,\n  ListItemIcon,\n  ListItemText,\n} from '@material-ui/core';\nimport {\n  Bookmark,\n  BookmarkBorder,\n} from '@material-ui/icons';\n\nexport const StoryComponent = ({\n  classes,\n  storyKey,\n  frames,\n  context,\n  setContext,\n  context: {\n    reference,\n  },\n}) =>\n  <ListItem\n    button\n    selected={reference.chapter === storyKey}\n    className={classes.bookListItem}\n    style={{\n      paddingLeft: '2em',\n      paddingRight: '0.7em',\n    }}\n    onClick={() => {\n      context.reference = {\n        bookId: reference.bookId,\n        chapter: storyKey,\n      };\n      setContext(context);\n    }}\n  >\n    <ListItemIcon className={classes.listItemIcon}>\n      {\n        (reference.chapter === storyKey) ?\n        <Bookmark /> :\n        <BookmarkBorder />\n      }\n    </ListItemIcon>\n    <ListItemText\n      className={classes.listItemText}\n      primary={`Story ${frames[0].text.replace('#','').trim()}`}\n      secondary={Object.keys(frames).length + ' Frames' }\n    />\n  </ListItem>\n\nStoryComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  storyKey: PropTypes.number.isRequired,\n  frames: PropTypes.object.isRequired,\n}\n\nconst styles = theme => ({\n  bookListItem: {\n  },\n  listItemIcon: {\n    marginRight: 0,\n  },\n  listItemText: {\n    paddingLeft: '0.7em',\n  },\n});\n\nexport default withStyles(styles)(StoryComponent);\n","import StoriesComponent from './StoriesComponent'\nexport default StoriesComponent\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Paper,\n  List,\n} from '@material-ui/core';\n\nimport StoryComponent from './StoryComponent';\n\nexport const StoriesComponent = ({\n  classes,\n  stories,\n  context,\n  setContext,\n  context: {\n    reference,\n  },\n}) => {\n  const components = Object.keys(stories).map(_storyKey => {\n    const storyKey = parseInt(_storyKey);\n    const frames = stories[storyKey];\n    return (<StoryComponent\n      key={storyKey}\n      context={context}\n      setContext={setContext}\n      storyKey={storyKey}\n      frames={frames}\n    />);\n  });\n\n  return (\n    <Paper className={classes.root}>\n      <List\n        className={classes.root}\n        component=\"nav\"\n        dense\n      >\n        <div className={classes.list}>\n          {components}\n        </div>\n      </List>\n    </Paper>\n  );\n};\n\nStoriesComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  stories: PropTypes.object.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    height: '100%',\n    maxWidth: '40em',\n    marginLeft: 'auto',\n    marginRight: 'auto',\n  },\n  list: {\n    height: '100%',\n    overflowY: 'auto',\n  },\n});\n\nexport default withStyles(styles)(StoriesComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport ReactPlayer from 'react-player';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  Card,\n  CardActions,\n  CardContent,\n  CardMedia,\n  IconButton,\n  Collapse,\n} from '@material-ui/core';\nimport {\n  ExpandMore,\n  ExpandLess,\n} from '@material-ui/icons';\n\nexport const Component = ({\n  classes,\n  open,\n  handleToggleOpen,\n  content,\n  details,\n  image,\n  youtubeId,\n}) => {\n  let videoFrame;\n  if (youtubeId) {\n    const videoUrl = `https://www.youtube.com/watch?v=${youtubeId}`;\n    const config = {\n      youtube: {\n        playerVars: {\n          rel: 0,\n          modestbranding: 1,\n        },\n      },\n    };\n    videoFrame = (\n      <div className={classes.media}>\n        <ReactPlayer\n          className={classes.player}\n          url={videoUrl}\n          controls={true}\n          config={config}\n          height=\"100%\"\n          width=\"100%\"\n        />\n      </div>\n    );\n  }\n\n  return (\n    <Card className={classes.card}>\n      {\n        image ?\n        <CardMedia\n          className={classes.media}\n          image={image}\n          title=\"Open Bible Stories Image\"\n        />\n        : videoFrame\n      }\n      <CardContent className={classes.content}>\n        {content}\n      </CardContent>\n      <CardActions className={classes.actions} disableActionSpacing>\n        <IconButton\n          className={classes.button}\n          onClick={handleToggleOpen}\n          aria-expanded={open}\n          aria-label=\"Show more\"\n        >\n          {open ? <ExpandLess /> : <ExpandMore />}\n        </IconButton>\n      </CardActions>\n      <Collapse in={open} timeout=\"auto\" unmountOnExit>\n        <CardContent className={classes.details}>\n          {details}\n        </CardContent>\n        <CardActions className={classes.actions} disableActionSpacing>\n          <IconButton\n            className={classes.button}\n            onClick={handleToggleOpen}\n            aria-expanded={open}\n            aria-label=\"collapse\"\n          >\n            {open ? <ExpandLess /> : <ExpandMore />}\n          </IconButton>\n        </CardActions>\n      </Collapse>\n    </Card>\n  );\n}\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  open: PropTypes.bool.isRequired,\n  handleToggleOpen: PropTypes.func.isRequired,\n  content: PropTypes.element.isRequired,\n  details: PropTypes.element.isRequired,\n  image: PropTypes.string,\n  youtubeId: PropTypes.string,\n};\n\nconst styles = {\n  card: {\n    marginBottom: '1em',\n  },\n  media: {\n    width: 'calc(100vw - 1.9em)',\n    height: 'calc((100vw - 1.9em) * 9/16)',\n    maxWidth: '40em',\n    maxHeight: 'calc(40em * 9/16)',\n  },\n  content: {\n    paddingBottom: 0,\n  },\n  details: {\n    padding: 0,\n  },\n  actions: {\n    padding: 0,\n  },\n  button: {\n    marginLeft: 'auto',\n  },\n  player: {\n    width: '100%',\n    height: '100%',\n  },\n};\n\nexport default withStyles(styles)(Component);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Component from './Component';\n\nclass Container extends React.Component {\n  state = {\n    open: false,\n    id: Math.random(),\n    helps: {},\n  };\n\n  handleToggleOpen = () => {\n    this.setState({open: !this.state.open});\n    this.scrollToId();\n  };\n\n  scrollToId = () => {\n    const element = document.getElementById(this.state.id);\n    if (element) {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  };\n\n  componentWillMount() {\n    const {\n      frameKey,\n      context: {\n        reference,\n      },\n    } = this.props;\n    if (parseInt(reference.verse) === parseInt(frameKey)) {\n      this.scrollToId();\n    }\n  };\n\n  render() {\n    const {open, id} = this.state;\n    const {props} = this;\n    return (\n      <div id={id}>\n        <Component\n          {...props}\n          open={open}\n          handleToggleOpen={this.handleToggleOpen.bind(this)}\n        />\n      </div>\n    );\n  }\n};\n\nContainer.propTypes = {\n  context: PropTypes.object.isRequired,\n  content: PropTypes.element.isRequired,\n  details: PropTypes.element.isRequired,\n  image: PropTypes.string,\n  youtubeId: PropTypes.string,\n};\n\nexport default Container;\n","const youtubeIds = [\n  \"UHEzSQE6TOs\",\n  \"OkJWjWFVvV4\",\n  \"2ycsRNjhYjU\",\n  \"aBPANcV67nk\",\n  \"I84GIPjHW0Q\",\n  \"lNzawXS8iKk\",\n  \"hDPJKRZa7U4\",\n  \"l0G3AQOYPR0\",\n  \"lfwMHrfoki0\",\n  \"SPSRlFyq_CQ\",\n  \"RpidswdLDWs\",\n  \"ZJKdHg9yVRs\",\n  \"MIk6i62zQ9A\",\n  \"Xg5dWR59sR8\",\n  \"vM4EzYDNSSM\",\n  \"IHwCxln7EbA\",\n  \"UL2pNVepgY8\",\n  \"DZxkuz2NEe8\",\n  \"KMoK1oITeBQ\",\n  \"jBCf1YY5pzM\",\n  \"sgABmFUZKx0\",\n  \"78PNW7qpufE\",\n  \"DxqwSFPTp3A\",\n  \"O0c_U3rPW0Q\",\n  \"im9mN_i_Y44\",\n  \"y3y27a90cBs\",\n  \"ie03EnZJ8kE\",\n  \"g6L2xbnpgCg\",\n  \"p7F8u3ymfn8\",\n  \"uFvINl8a7Ow\",\n  \"y0RYWZZw9Nc\",\n  \"MzdAo6p3J48\",\n  \"Htgd5jnKzPc\",\n  \"jCy9BJhwg6w\",\n  \"deYD2wxIQlA\",\n  \"gC6jkPn9sks\",\n  \"4srXPVgYU0w\",\n  \"F-CEE6hc1aE\",\n  \"4gFX7PnhfdI\",\n  \"RlOsDbJ9hEc\",\n  \"MAhIbNxMlPI\",\n  \"vCaywUPxzy4\",\n  \"kDMNXa4Z_M0\",\n  \"wb5owhurDXc\",\n  \"WUcXHSmjvgw\",\n  \"Ij34FKUaUJM\",\n  \"ioqNQiAUz0E\",\n  \"ep6RD36iDFw\",\n  \"ZWl5kehifDU\",\n  \"CnSJk-p087Y\"\n];\n\nexport default youtubeIds;\n","import {each} from 'async';\n\nimport * as ApplicationHelpers from '../../helpers';\nimport youtubeIds from './youtubeIds';\n\nexport const framesFromStory = (storyMarkdown) => {\n  let frames = {};\n  storyMarkdown.split(/\\s*?\\n\\s*?\\n\\s*?[!]/)\n  .forEach((frameMarkdown, index) => {\n    frames[index] = frameData(frameMarkdown);\n  });\n  return frames;\n}\n\nexport const frameData = (frameMarkdown) => {\n  let data = {};\n  const imageRegexp = /\\((http.*?\\.jpg).*?\\)/;\n  if (imageRegexp.test(frameMarkdown)) {\n    const [match, image] = imageRegexp.exec(frameMarkdown);\n    if (match) {/* not used, this bypasses linter warning */}\n    data.image = image;\n  }\n  data.text = frameMarkdown.replace(/\\s*\\[.*?\\]\\(.*?\\)\\s*/,'').trim();\n  return data;\n}\n\nexport const fetchStory = (username, languageId, storyId) => new Promise((resolve, reject) => {\n  const repository = ApplicationHelpers.resourceRepositories(languageId).obs;\n  const numberPadded = (storyId < 10) ? `0${storyId}` : `${storyId}`;\n  let path = `content/${numberPadded}.md`;\n  ApplicationHelpers.fetchFileFromServer(username, repository, path)\n  .then(data => {\n    const frames = framesFromStory(data);\n    resolve(frames);\n  }).catch(reject);\n});\n\nexport const fetchOpenBibleStories = (username, languageId) => new Promise((resolve, reject) => {\n  const storyIds = [...Array(51).keys()].splice(1);\n  let stories = {};\n  each(storyIds,\n    (storyId, done) => {\n      fetchStory(username, languageId, storyId)\n      .then(frames => {\n        stories[storyId] = frames;\n        done();\n      })\n    },\n    (error) => {\n      resolve(stories);\n    }\n  );\n});\n\nexport const youtubeId = (storyId) => {\n  return youtubeIds[storyId - 1];\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport remark from 'remark';\nimport remark2react from 'remark-react';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport Card from '../Card';\nimport TranslationHelps from '../../../TranslationHelps';\nimport * as helpers from '../../helpers';\n\nexport const Frame = ({\n  classes,\n  context,\n  setContext,\n  open,\n  handleToggleOpen,\n  storyKey,\n  frameKey,\n  image,\n  text,\n  helps,\n}) => {\n  let tabs = [];\n  if (helps) {\n    const {\n      notes,\n      words,\n      questions,\n      studyNotes,\n      studyQuestions,\n    } = helps;\n    if (studyQuestions) tabs.push({ title: 'Study Questions', text: helps.studyQuestions });\n    if (notes) tabs.push({ title: 'Notes', notes });\n    if (words) tabs.push({ title: 'Words', words });\n    if (questions) tabs.push({ title: 'Questions', notes: questions });\n    if (studyNotes) tabs.push({ title: 'Study Notes', notes: helps.studyNotes });\n  }\n\n  const details = (tabs.length > 0) ?\n    <TranslationHelps\n      context={context}\n      setContext={setContext}\n      tabs={tabs}\n    /> : null;\n\n  const options = {\n    remarkReactComponents: {\n      strong: 'sup',\n    }\n  };\n  const _text = (frameKey > 0) ? `**${frameKey}** ${text}` : text;\n  const content = remark().use(remark2react, options).processSync(_text).contents;\n\n  let youtubeId;\n  if (parseInt(frameKey) === 0) {\n    youtubeId = helpers.youtubeId(storyKey);\n  }\n\n  return (\n    <Card\n      context={context}\n      content={content}\n      details={details}\n      image={image}\n      youtubeId={youtubeId}\n    />\n  );\n}\n\nFrame.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  open: PropTypes.bool.isRequired,\n  handleToggleOpen: PropTypes.func.isRequired,\n  frameKey: PropTypes.number.isRequired,\n  text: PropTypes.string.isRequired,\n  image: PropTypes.string,\n  helps: PropTypes.object.isRequired,\n};\n\nconst styles = {\n};\n\nexport default withStyles(styles)(Frame);\n","import {each} from 'async';\n\nimport * as ApplicationHelpers from '../../../helpers';\n\nexport const fetchHelps = (username, languageId, storyKey, frameKey) => new Promise((resolve, reject) => {\n  let helps = {};\n  each(\n    ['obs-tn', 'obs-tq', 'obs-sn'],\n    (resourceId, done) => {\n      switch (resourceId) {\n        case 'obs-tn':\n          fetchNotesAndWords(username, languageId, storyKey, frameKey)\n          .then(data => {\n            helps.notes = data.notes;\n            helps.words = data.words;\n            done();\n          }).catch(done);\n          break;\n        case 'obs-tq':\n          fetchQuestions(username, languageId, storyKey, frameKey)\n          .then(data => {\n            helps.questions = data;\n            done();\n          }).catch(done);\n          break;\n        case 'obs-sn':\n          fetchStudyNotes(username, languageId, storyKey, frameKey)\n          .then(data => {\n            helps.studyNotes = data;\n            done();\n          }).catch(done);\n          break;\n        default:\n          done();\n          break;\n      };\n    },\n    (error) => {\n      resolve(helps);\n    }\n  );\n});\n\nexport const fetchStudyQuestions = (username, languageId, storyKey) => new Promise((resolve, reject) => {\n  const repository = ApplicationHelpers.resourceRepositories(languageId)['obs-sq'];\n  const file = pad(storyKey) + '.md';\n  const filepath = ['content', file].join('/');\n  ApplicationHelpers.fetchFileFromServer(username, repository, filepath)\n  .then(markdown => {\n    resolve(markdown);\n  }).catch(reject);\n});\n\nexport const fetchStudyNotes = (username, languageId, storyKey, frameKey) => new Promise((resolve, reject) => {\n  const repository = ApplicationHelpers.resourceRepositories(languageId)['obs-sn'];\n  const file = pad(frameKey) + '.md';\n  const filepath = ['content', pad(storyKey), file].join('/');\n  ApplicationHelpers.fetchFileFromServer(username, repository, filepath)\n  .then(markdown => {\n    const data = parseStudyNotes(markdown);\n    resolve(data);\n  }).catch(reject);\n});\n\nexport const fetchQuestions = (username, languageId, storyKey, frameKey) => new Promise((resolve, reject) => {\n  const repository = ApplicationHelpers.resourceRepositories(languageId)['obs-tq'];\n  const file = pad(frameKey) + '.md';\n  const filepath = ['content', pad(storyKey), file].join('/');\n  ApplicationHelpers.fetchFileFromServer(username, repository, filepath)\n  .then(markdown => {\n    const questions = parseQuestions(markdown);\n    resolve(questions);\n  }).catch(reject);\n});\n\nexport const fetchNotesAndWords = (username, languageId, storyKey, frameKey) => new Promise((resolve, reject) => {\n  const repository = ApplicationHelpers.resourceRepositories(languageId)['obs-tn'];\n  const file = pad(frameKey) + '.md';\n  const filepath = ['content', pad(storyKey), file].join('/');\n  ApplicationHelpers.fetchFileFromServer(username, repository, filepath)\n  .then(markdown => {\n    const helps = parseNotes(markdown);\n    resolve(helps);\n  }).catch(reject);\n});\n\nexport const pad = (number) => `${(number < 10) ? 0 : ''}${number}`;\n\nexport const parseQuestions = (markdown) => {\n  const questions = markdown.split(/\\n\\s*#\\s*/m)\n  .map(questionItem => {\n    const [questionText, ...answerLines] = questionItem.split(/\\n\\s*/m);\n    const question = questionText.replace(/\\s*#\\s*/,'');\n    const answer = answerLines.join('\\n\\n');\n    return {\n      gl_quote: question,\n      occurrence_note: answer,\n    };\n  });\n  return questions;\n}\n\nexport const parseNotes = (markdown) => {\n  const [notesMarkdown, wordsMarkdown] = markdown.split(/#+\\s*translationWords\\s*/m);\n  const notes = notesMarkdown.split(/\\n\\s*#\\s*/m)\n  .map(noteText => {\n    const [quote, ...noteLines] = noteText.split(/\\n\\s*\\n/m);\n    const gl_quote = quote.replace(/\\s*#\\s*/,'');\n    const occurrence_note = noteLines.join('\\n\\n');\n    return {\n      gl_quote,\n      occurrence_note,\n    };\n  });\n  let words;\n  if (/\\w+/.test(wordsMarkdown)) {\n    words = wordsMarkdown.split(/\\n?\\s*\\*\\s*/m)\n    .map(word => word.replace(/\\[\\[rc/,'http').replace(/\\]\\]/,''));\n  }\n  const helps = {\n    notes,\n    words,\n  };\n  return helps;\n}\n\nexport const parseStudyNotes = (markdown) => {\n  const data = markdown.split(/\\n\\s*#+\\s*/m)\n  .map(noteText => {\n    const [quote, ...noteLines] = noteText.split(/\\n\\s*\\n/m);\n    const gl_quote = quote.replace(/\\s*#\\s*/,'');\n    const occurrence_note = noteLines.join('\\n\\n');\n    return {\n      gl_quote,\n      occurrence_note,\n    };\n  }).filter(note => !/^;/.test(note.occurrence_note));\n  return data;\n}\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Component from './Component';\n\nimport * as translationHelps from '../../translationHelps/helpers';\n\nclass FrameContainer extends React.Component {\n  state = {\n    open: false,\n    helps: {},\n  };\n\n  handleToggleOpen = () => {\n    this.setState({open: !this.state.open});\n    this.scrollToId();\n  };\n\n  scrollToId = () => {\n    const element = document.getElementById(this.props.frameKey);\n    if (element) {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  };\n\n  componentDidMount() {\n    const {\n      storyKey,\n      frameKey,\n      context: {\n        username,\n        languageId,\n        reference,\n      },\n    } = this.props;\n    translationHelps.fetchHelps(username, languageId, storyKey, frameKey)\n    .then(helps => {\n      this.setState({helps});\n    });\n    if (parseInt(reference.verse) === parseInt(frameKey)) {\n      this.scrollToId();\n    }\n  };\n\n  render() {\n    const {open} = this.state;\n    const {props} = this;\n    const helps = {...this.state.helps, ...this.props.helps};\n    return (\n      <div id={props.frameKey}>\n        <Component\n          {...props}\n          helps={helps}\n          open={open}\n          handleToggleOpen={this.handleToggleOpen.bind(this)}\n        />\n      </div>\n    );\n  }\n};\n\nFrameContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  storyKey: PropTypes.number.isRequired,\n  frameKey: PropTypes.number.isRequired,\n  helps: PropTypes.object.isRequired,\n  text: PropTypes.string.isRequired,\n  image: PropTypes.string,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nexport default FrameContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport remark from 'remark';\nimport remark2react from 'remark-react';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport styles from '../../../styles';\nimport Card from '../Card';\nimport Frame from '../Frame/';\nimport TranslationHelps from '../../../TranslationHelps';\n\n\nexport const Story = ({\n  classes,\n  storyKey,\n  story,\n  context,\n  setContext,\n  helps,\n  guide,\n}) => {\n  let intro;\n  if (guide) {\n    const header = \"# Open Bible Stories\";\n    const content = remark().use(remark2react).processSync(header).contents;\n    const title = \"Guide\"\n    const text = guide;\n    const tabs = [{ title, text }];\n    const details = (\n      <TranslationHelps\n        context={context}\n        setContext={setContext}\n        tabs={tabs}\n      />\n    );\n    intro = (\n      <Card\n        context={context}\n        content={content}\n        details={details}\n      />\n    );\n  }\n  const frames = Object.keys(story).map((frameKey, index) => {\n    const {image, text} = story[frameKey];\n    return (\n      <Frame\n        key={`${storyKey}-${frameKey}`}\n        storyKey={storyKey}\n        helps={index === 0 ? helps : {}}\n        frameKey={frameKey}\n        image={image}\n        text={text}\n        context={context}\n        setContext={setContext}\n      />\n    );\n  });\n  return (\n    <div className={classes.column}>\n      {intro}\n      {frames}\n    </div>\n  );\n};\n\nStory.propTypes = {\n  classes: PropTypes.object.isRequired,\n  storyKey: PropTypes.number.isRequired,\n  story: PropTypes.object.isRequired,\n  helps: PropTypes.object,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(Story);\n","import Story from './Story/';\nexport default Story;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Component from './Component';\n\nimport * as translationHelps from '../../translationHelps/helpers';\n\nclass FrameContainer extends React.Component {\n  state = {\n    open: false,\n    id: Math.random(),\n    helps: null,\n  };\n\n  handleToggleOpen = () => {\n    this.setState({open: !this.state.open});\n    this.scrollToId();\n  };\n\n  scrollToId = () => {\n    const element = document.getElementById(this.state.id);\n    if (element) {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  };\n\n  fetchStudyQuestions(props) {\n    const {\n      storyKey,\n      context: {\n        username,\n        languageId,\n      },\n    } = props;\n    translationHelps.fetchStudyQuestions(username, languageId, 0)\n    .then(guide => {\n      translationHelps.fetchStudyQuestions(username, languageId, storyKey)\n      .then(studyQuestions => {\n        const helps = { studyQuestions: studyQuestions };\n        this.setState({\n          helps,\n          guide,\n        });\n      });\n    });\n  }\n\n  componentWillReceiveProps(newProps) {\n    this.fetchStudyQuestions(newProps);\n  }\n\n  componentDidMount() {\n    this.fetchStudyQuestions(this.props);\n  };\n\n  render() {\n    const {helps, guide, open, id} = this.state;\n    const {props} = this;\n    return (\n      <div id={id}>\n        <Component\n          {...props}\n          helps={helps}\n          guide={guide}\n          open={open}\n          handleToggleOpen={this.handleToggleOpen.bind(this)}\n        />\n      </div>\n    );\n  }\n};\n\nFrameContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  storyKey: PropTypes.number.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nexport default FrameContainer;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  CircularProgress,\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport StorySelection from './StorySelection';\nimport OpenBibleStoriesView from './OpenBibleStoriesView';\n\nexport const OpenBibleStoriesComponent = ({\n  classes,\n  context,\n  context: {\n    reference\n  },\n  setContext,\n  stories,\n}) => {\n\n  const loadingComponent = (\n    <CircularProgress className={classes.progress} color=\"secondary\" disableShrink />\n  );\n\n  let component = loadingComponent;\n  const shouldShowStorySelection = (stories && !reference.chapter);\n  const shouldShowOpenBibleStoriesView = (stories && reference.chapter);\n\n  if (shouldShowStorySelection) {\n    const storySelection = (\n      <StorySelection\n        context={context}\n        setContext={setContext}\n        stories={stories}\n      />\n    );\n    component = storySelection;\n  }\n  else if (shouldShowOpenBibleStoriesView) {\n    const openBibleStoriesView = (\n      <OpenBibleStoriesView\n        context={context}\n        setContext={setContext}\n        storyKey={reference.chapter}\n        story={stories[reference.chapter]}\n      />\n    );\n    component = openBibleStoriesView;\n  }\n\n  return (\n    <div className={classes.root}>\n      {component}\n    </div>\n  );\n}\n\nOpenBibleStoriesComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  stories: PropTypes.object,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n  progress: {\n    margin: 'auto',\n    display: 'block',\n  },\n});\n\nexport default withStyles(styles)(OpenBibleStoriesComponent);\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport styles from './styles';\n\nimport Component from './Component';\n\nimport * as helpers from './helpers';\n\nclass OpenBibleStoriesContainer extends React.Component {\n  state = {\n    stories: null,\n  };\n\n  componentDidMount() {\n    const {username, languageId} = this.props.context;\n    helpers.fetchOpenBibleStories(username, languageId)\n    .then(stories => {\n      this.setState({ stories });\n    });\n  };\n\n  componentDidUpdate() {\n    const {reference: {bookId, chapter, verse}} = this.props.context;\n    const id = `${bookId}_${chapter}_${verse}`;\n    const element = document.getElementById(id);\n    if (element) {\n      element.scrollIntoView({\n        behavior: 'smooth',\n        block: 'start',\n      });\n    }\n  }\n\n  render() {\n    const {stories} = this.state;\n    const {props} = this;\n    return (\n      <Component\n        {...props}\n        stories={stories}\n      />\n    );\n  }\n};\n\nOpenBibleStoriesContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nexport default withStyles(styles)(OpenBibleStoriesContainer);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport {\n  CircularProgress,\n} from '@material-ui/core';\nimport {\n} from '@material-ui/icons';\n\nimport History from './History';\nimport Resources from './Resources';\nimport Scripture from './Scripture';\nimport OpenBibleStories from './OpenBibleStories';\n\nexport const Component = ({\n  classes,\n  manifests,\n  history,\n  context,\n  setContext,\n}) => {\n  const historyComponent = (\n    <History\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n      contexts={history}\n    />\n  );\n  const resources = (\n    <Resources\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n    />\n  );\n  const scripture = (\n    <Scripture\n      context={context}\n      setContext={setContext}\n      manifests={manifests}\n    />\n  );\n  const openBibleStories = (\n    <OpenBibleStories\n      context={context}\n      setContext={setContext}\n    />\n  );\n  const loadingComponent = (\n    <CircularProgress className={classes.progress} color=\"secondary\" disableShrink />\n  );\n\n  let component = loadingComponent;\n  const shouldShowHistory = (context.view === 'history');\n  if (Object.keys(manifests).length > 0) {\n    const shouldShowResources = (!context.resourceId);\n    const shouldShowScripture = (['ult','ust','uhb','ugnt'].includes(context.resourceId));\n    const shouldShowOpenBibleStories = (context.resourceId === 'obs');\n\n    if (shouldShowHistory) component = historyComponent;\n    else if (shouldShowResources) component = resources;\n    else if (shouldShowScripture) component = scripture;\n    else if (shouldShowOpenBibleStories) component = openBibleStories;\n  }\n\n  return (\n    <div className={classes.root}>\n      {component}\n    </div>\n  );\n}\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  history: PropTypes.array.isRequired,\n  manifests: PropTypes.object,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n  progress: {\n    margin: 'auto',\n    display: 'block',\n  },\n});\n\nexport default withStyles(styles)(Component);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport Component from './Component';\n\nclass Container extends React.Component {\n  state = {\n  };\n\n  componentDidUpdate() {\n    const {reference} = this.props.context;\n    if (reference) {\n      const {bookId, chapter, verse} = reference;\n      const id = `${bookId}_${chapter}_${verse}`;\n      const element = document.getElementById(id);\n      if (element) {\n        element.scrollIntoView({\n          behavior: 'smooth',\n          block: 'start',\n        });\n      }\n    }\n  }\n\n  render() {\n    const props = this.props;\n    return (\n      <Component\n        {...props}\n      />\n    );\n  };\n};\n\nContainer.propTypes = {\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n  history: PropTypes.array.isRequired,\n  manifests: PropTypes.object.isRequired,\n};\n\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\n\nimport {\n  Paper,\n  BottomNavigation,\n  BottomNavigationAction,\n} from '@material-ui/core';\nimport {\n  LibraryBooks,\n  Book,\n  Bookmark,\n  History,\n  KeyboardArrowLeft,\n  KeyboardArrowRight,\n} from '@material-ui/icons';\n\nimport {chaptersInBook} from '../chaptersAndVerses';\n\nclass BottomNavContainer extends React.Component {\n  handleChange = (event, value) => {\n    let {\n      context,\n      context: {\n        username,\n        languageId,\n        reference,\n      }\n    } = this.props;\n    switch (value) {\n      case 0:\n        this.previousChapter();\n        break;\n      case 1:\n        context = {username, languageId, view: 'history'};\n        break;\n      case 2:\n        context = {username, languageId, reference: {}};\n        break;\n      case 3:\n        context.reference = {};\n        break;\n      case 4:\n        if (reference) context.reference = {bookId: reference.bookId};\n        break;\n      case 5:\n        this.nextChapter();\n        break;\n      default:\n        break;\n    };\n    this.props.setContext(context);\n  };\n\n  previousChapter = () => {\n    let {context} = this.props;\n    let {chapter} = context.reference;\n    if (chapter > 1) {\n      context.reference.chapter = context.reference.chapter - 1;\n      context.reference.verse = undefined;\n    }\n    this.props.setContext(context);\n  };\n\n  nextChapter = () => {\n    let {context} = this.props;\n    let {bookId, chapter} = context.reference;\n    if (chapter < chaptersInBook(bookId).length) {\n      context.reference.chapter = context.reference.chapter + 1\n      context.reference.verse = undefined;\n    }\n    this.props.setContext(context);\n  };\n\n  render() {\n    const { classes, context } = this.props;\n\n    const shouldShowHistory = (context.view === 'history');\n    const couldShowReference = (!context.resourceId);\n    const couldShowBook = (!(context.resourceId === 'obs') && !(context.reference && context.reference.bookId));\n    const couldShowChapter = (!(context.reference && context.reference.chapter));\n\n    let value;\n    if (shouldShowHistory) { value = 1; }\n    else if (couldShowReference) { value = 2; }\n    else if (couldShowBook) { value = 3; }\n    else if (couldShowChapter) { value = 4; }\n\n    return (\n      <Paper className={classes.root}>\n        <BottomNavigation\n          value={value}\n          onChange={this.handleChange}\n          showLabels={true}\n          className={classes.bottomNavigation}\n        >\n          <BottomNavigationAction\n            className={classes.button}\n            icon={<KeyboardArrowLeft />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            label=\"History\"\n            icon={<History />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            label=\"Resources\"\n            icon={<LibraryBooks />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            label=\"Books\"\n            icon={<Book />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            label=\"Chapters\"\n            icon={<Bookmark />}\n          />\n          <BottomNavigationAction\n            className={classes.button}\n            icon={<KeyboardArrowRight />}\n          />\n        </BottomNavigation>\n      </Paper>\n    );\n  }\n}\n\nBottomNavContainer.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  setContext: PropTypes.func.isRequired,\n};\n\nconst styles = theme => ({\n  root: {\n    width: '100%',\n  },\n  bottomNavigation: {\n    margin: '0 auto',\n    maxWidth: '40em',\n  },\n  button: {\n    paddingLeft: '0',\n    paddingRight: '0',\n    minWidth: '60px',\n  },\n});\n\nexport default withStyles(styles, { withTheme: true })(BottomNavContainer);\n","import Container from './Container';\nexport default Container;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport { withStyles } from '@material-ui/core/styles';\nimport { MuiThemeProvider, createMuiTheme } from '@material-ui/core/styles';\n\nimport ApplicationBar from './ApplicationBar';\nimport Workspace from './Workspace';\nimport BottomNav from './BottomNav';\n\nconst theme = createMuiTheme({\n  typography: {\n    useNextVariants: true,\n  },\n  palette: {\n    primary: {\n      light: '#59B7E7',\n      main: '#31ADE3',\n      dark: '#014263',\n      contrastText: '#FFF'\n    },\n  },\n});\n\nexport const Component = ({\n  classes,\n  context,\n  setContext,\n  history,\n  manifests,\n}) =>\n<MuiThemeProvider theme={theme}>\n  <div className={classes.root}>\n    <div className={classes.appFrame}>\n      <main className={classes.main}>\n        <ApplicationBar\n          applicationName=\"unfoldingWord\"\n          context={context}\n          setContext={setContext}\n          manifests={manifests}\n        />\n        <div className={classes.workspace}>\n          <Workspace\n            context={context}\n            setContext={setContext}\n            history={history}\n            manifests={manifests}\n          />\n        </div>\n      </main>\n      <nav className={classes.bottomNav}>\n        <BottomNav\n          context={context}\n          setContext={setContext}\n        />\n      </nav>\n    </div>\n  </div>\n</MuiThemeProvider>;\n\nComponent.propTypes = {\n  classes: PropTypes.object.isRequired,\n  context: PropTypes.object.isRequired,\n  history: PropTypes.array.isRequired,\n  setContext: PropTypes.func.isRequired,\n  manifests: PropTypes.object,\n};\n\nconst styles = theme => ({\n  root: {\n    flexGrow: 1,\n  },\n  appFrame: {\n    zIndex: 1,\n    position: 'relative',\n    display: 'flex',\n    width: '100%',\n  },\n  main: {\n    width: '100%',\n    minWidth: '20em',\n  },\n  workspace: {\n    padding: '1em 1em 5.5em 1em',\n  },\n  bottomNav: {\n    width: '100%',\n    position: 'fixed',\n    bottom: 0,\n    zIndex: 10,\n  }\n});\n\nexport default withStyles(styles)(Component);\n","import React from 'react';\nimport localstorage from 'local-storage'\n\nimport Component from './Component';\n\nimport * as helpers from './helpers';\n\nconst keyPrefix = 'ApplicationContainer.state.';\n\nclass Container extends React.Component {\n  state = {\n    manifests: {},\n    context: this.defaultContext(),\n    history: [],\n  };\n\n  defaultContext() {\n    return {\n      username: 'unfoldingWord',\n      languageId: 'en',\n      resourceId: null,\n      reference: {},\n    }\n  }\n\n  addToHistory(_context, _history) {\n    let history = [];\n    if (_history) history = JSON.parse(JSON.stringify(_history));\n    const newContext = JSON.stringify(_context);\n    const oldContext = JSON.stringify(history[0]);\n    const isNew = !( newContext === oldContext );\n    if (isNew) {\n      const context = JSON.parse(newContext);\n      history.unshift(context);\n    }\n    if (!history) debugger\n    return history;\n  }\n\n  componentWillMount() {\n    let context, history;\n    context = localstorage.get(keyPrefix + 'context');\n    context = context || this.defaultContext();\n    try {\n      history = localstorage.get(keyPrefix + 'history');\n    } catch {\n      history = [];\n    }\n    this.setState({\n      context,\n      history,\n    });\n  };\n\n  setContext(_context) {\n    window.scrollTo(0,0);\n    const context = JSON.parse(JSON.stringify(_context));\n    const {history: _history} = this.state;\n    let history;\n    if (_history) {\n      history = JSON.parse(JSON.stringify(_history));\n    } else {\n      try {\n        history = localstorage.get(keyPrefix + 'history');\n      } catch {\n        history = [];\n        debugger\n      }\n    }\n    if (context.resourceId === 'obs') context.reference.bookId = 'obs';\n    let newState = {\n      context,\n      history,\n    };\n    const {reference} = context;\n    if (reference && reference.chapter) {\n      history = this.addToHistory(context, history);\n      localstorage.set(keyPrefix + 'history', _history);\n      newState.history = history;\n    }\n    this.setState(newState);\n    localstorage.set(keyPrefix + 'context', context);\n  };\n\n  componentDidMount() {\n    const {\n      context: {\n        username,\n        languageId\n      },\n    } = this.state;\n    helpers.fetchResourceManifests(username, languageId)\n    .then(manifests => {\n      this.setState({\n        manifests,\n      });\n    });\n  };\n\n  render() {\n    const {context, history, manifests} = this.state;\n    return (\n      <Component\n        context={context}\n        history={history}\n        setContext={this.setContext.bind(this)}\n        manifests={manifests}\n      />\n    );\n  };\n};\n\nexport default Container;\n","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read http://bit.ly/CRA-PWA.\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.1/8 is considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit http://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              if (window) window.alert(\n                'Update is available, close the App and/or all tabs and restart the App to get the latest.'\n              );\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              if (window) window.alert(\n                'The first load of a Book and Chapter may take longer to download the resources.'\n              );\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl)\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      if (\n        response.status === 404 ||\n        response.headers.get('content-type').indexOf('javascript') === -1\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready.then(registration => {\n      registration.unregister();\n    });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Container from './Container';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(<Container />, document.getElementById('root'));\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: http://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}