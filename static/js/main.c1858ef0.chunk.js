(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{102:function(e,t,n){},5475:function(e,t,n){e.exports=n(5725)},5480:function(e,t,n){},5725:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(51),o=n.n(c),s=(n(5480),n(30)),i=n(31),l=n(33),u=n(32),m=n(34),f=n(3),h=(n(102),n(52)),p=n(10),d=n.n(p),b=n(2),v=n(169),g=function(e){return{appBar:{transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.sharp,duration:e.transitions.duration.leavingScreen})},appBarShift:{width:"calc(100% - ".concat(260,"px)"),transition:e.transitions.create(["margin","width"],{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.enteringScreen})},drawerPaper:{width:260,overflowY:"unset"},menuButton:{marginLeft:12,marginRight:20},hide:{display:"none"},drawerHeader:Object(v.a)({display:"flex",alignItems:"center",justifyContent:"space-between",padding:"0 8px 0 1em"},e.mixins.toolbar),toolbar:{margin:"auto"}}},E=n(174),w=n(72),j=n.n(w),O=n(170),y=n.n(O),k=n(171),N=n(172),D=n.n(N),S=function(e,t,n){return new Promise(function(a,r){I(e,t+"-tn",n).then(function(e){var t=x(e);a(t)}).catch(r)})},I=function(e,t,n){return new Promise(function(a,r){C(e,t,n).then(function(c){var o=R(c.projects,n).path;o=o.replace(/^\.\//,""),L(e,t,o).then(a).catch(r)})})},R=function(e,t){return e.filter(function(e){return e.identifier===t})[0]},x=function(e){return e.split("\n").map(function(e){return e.trim().split("\t")})},C=function(e,t){return new Promise(function(n,a){L(e,t,"manifest.yaml").then(function(e){var t=y.a.parseDocument(e).toJSON();n(t)}).catch(a)})},L=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"master";return new Promise(function(r,c){var o=j.a.join(e,t,"raw/branch",a,n);B(o).then(r).catch(c)})},B=function(e){return new Promise(function(t,n){fetch("https://git.door43.org/"+e,{mode:"cors"}).then(function(e){t(e.text())}).catch(n)})},P=Object(f.withStyles)(g,{withTheme:!0})(function(e){var t,n=e.classes,a=e.projectName,c=e.manifests,o=e.reference,s=(e.setReference,e.open),i=(e.handleDrawerOpen,e.handleDrawerClose,"");c.ult&&c.ult.projects&&o.book&&(i=R(c.ult.projects,o.book).title);var l=i?r.a.createElement("span",null,"\xa0-\xa0",i):r.a.createElement("span",null);return r.a.createElement("div",null,r.a.createElement(b.a,{className:d()(n.appBar,(t={},Object(h.a)(t,n.appBarShift,s),Object(h.a)(t,n["appBarShift-left"],s),t))},r.a.createElement(b.m,{className:n.toolbar,disableGutters:!s},r.a.createElement(b.n,{variant:"title",color:"inherit",noWrap:!0},a),r.a.createElement(b.n,{variant:"subheading",color:"inherit",className:n.coin,noWrap:!0},l))))}),W=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={open:!1},n.handleDrawerOpen=function(){n.setState({open:!0})},n.handleDrawerClose=function(){n.setState({open:!1})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=this.state;return r.a.createElement(P,Object.assign({},e,{open:t.open,projectName:"translationHelps",handleDrawerOpen:this.handleDrawerOpen.bind(this),handleDrawerClose:this.handleDrawerClose.bind(this)}))}}]),t}(r.a.Component),_=n(53),T=n.n(_),z=n(11),H=function(e){return{root:{},paper:{padding:2*e.spacing.unit},column:{maxWidth:"40em",marginLeft:"auto",marginRight:"auto"},verse:{}}},M=Object(f.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){e.classes;return e.verseObject.children.map(function(e,t){return r.a.createElement(J,{key:t,verseObject:e})})}),A=Object(f.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){e.classes;var t=e.verseObject,n="word"===t.type;return r.a.createElement("span",null,n?" ":"",t.text)}),J=Object(f.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){e.classes;var t=e.verseObject;return"milestone"===t.type?r.a.createElement(M,{verseObject:t}):r.a.createElement(A,{verseObject:t})}),K=Object(f.withStyles)(H)(function(e){var t=e.classes,n=e.verseKey,a=e.verseData,c=e.translationNotesVerseData,o=a.verseObjects?a.verseObjects.map(function(e,t){return r.a.createElement(J,{key:t,verseObject:e})}):r.a.createElement("span",null),s=c?c.map(function(e,t){return r.a.createElement("p",{key:t},r.a.createElement("strong",null,e.gl_quote),": ",e.occurrence_note)}):"";return r.a.createElement(b.e,{className:t.column},r.a.createElement(b.g,{expandIcon:r.a.createElement(z.f,null)},r.a.createElement("span",{className:t.verse},r.a.createElement("sup",null,n),o)),r.a.createElement(b.f,null,r.a.createElement("div",null,s)))}),q=Object(f.withStyles)(H)(function(e){var t=e.classes,n=e.chapterKey,a=e.chapterData,c=e.translationNotesChapterData,o=Object.keys(a).filter(function(e){var t=a[e].verseObjects.map(function(e){return e.text}).join("");return/\S+/g.test(t)}).map(function(e){return r.a.createElement(K,{key:e,verseKey:e,verseData:a[e],translationNotesVerseData:c[e]})}),s=c.intro&&c.intro[0]?c.intro[0].occurrence_note:"";return[r.a.createElement(b.e,{className:t.column,key:Math.random()},r.a.createElement(b.g,{expandIcon:r.a.createElement(z.f,null)},r.a.createElement("h2",null,"Chapter ",n)),r.a.createElement(b.f,null,r.a.createElement("div",null,r.a.createElement(T.a,{source:s,escapeHtml:!1}))))].concat(o)}),F=Object(f.withStyles)(H)(function(e){var t=e.classes,n=e.bookData,a=e.translationNotesData,c=Object.keys(n.chapters).map(function(e){return r.a.createElement(q,{key:e,chapterKey:e,chapterData:n.chapters[e],translationNotesChapterData:a[e]})}),o=a.front.intro[0].occurrence_note;return r.a.createElement("div",{className:t.root},r.a.createElement(b.e,{className:t.column,key:Math.random()},r.a.createElement(b.g,{expandIcon:r.a.createElement(z.f,null)},r.a.createElement(T.a,{source:o.split("\n")[0],escapeHtml:!1})),r.a.createElement(b.f,null,r.a.createElement("div",null,r.a.createElement(T.a,{source:o.split("\n").splice(1).join("\n"),escapeHtml:!1})))),c)}),G=Object(f.withStyles)(function(e){return{bookListItem:{},listItemIcon:{marginRight:0},listItemText:{paddingLeft:"0.7em"}}})(function(e){var t=e.classes,n=e.bookMetadata,a=e.reference,c=e.setReference;return r.a.createElement(b.i,{button:!0,selected:a.book===n.identifier,className:t.bookListItem,style:{paddingLeft:"2em",paddingRight:"0.7em"},onClick:function(){c({book:n.identifier,chapter:1,verse:1})}},r.a.createElement(b.j,{className:t.listItemIcon},a.book===n.identifier?r.a.createElement(z.a,{fontSize:"small"}):r.a.createElement(z.b,{fontSize:"small"})),r.a.createElement(b.k,{className:t.listItemText,primary:n.title}))}),V=Object(f.withStyles)(function(e){return{list:{paddingTop:0,paddingBottom:0},listItemIcon:{marginRight:0},listItemText:{paddingLeft:"0.7em"}}})(function(e){var t=e.classes,n=e.testamentId,a=e.books,c=e.reference,o=e.setReference,s="New Testament"===n,i=a?a.map(function(e){return r.a.createElement(G,{key:e.identifier,bookMetadata:e,reference:c,setReference:o})}):[];return r.a.createElement("div",null,r.a.createElement(b.i,{button:!0,selected:s,className:t.fileList,style:{paddingLeft:"1em",paddingRight:"0.5em"}},r.a.createElement(b.j,{className:t.listItemIcon},s?r.a.createElement(z.d,{fontSize:"small"}):r.a.createElement(z.e,{fontSize:"small"})),r.a.createElement(b.k,{inset:!0,className:t.listItemText,primary:n})),r.a.createElement(b.d,{in:s,timeout:"auto",unmountOnExit:!0},r.a.createElement(b.h,{dense:!0,className:t.list},i)))}),Y=Object(f.withStyles)(function(e){return{bible:{height:"100%",maxWidth:"40em",marginLeft:"auto",marginRight:"auto"},bibleList:{height:"100%",overflowY:"auto"}}})(function(e){var t=e.classes,n=e.manifests,a=e.reference,c=e.setReference,o={},s=n.ult;return s&&s.projects.forEach(function(e){var t=e.categories.includes("bible-ot")?"Old Testament":"New Testament";o[t]||(o[t]=[]),o[t].push(e)}),r.a.createElement(b.l,{className:t.bible},r.a.createElement(b.h,{className:t.bible,component:"nav",dense:!0},r.a.createElement("div",{className:t.bibleList},Object.keys(o).map(function(e){return r.a.createElement(V,{key:e,testamentId:e,books:o[e],reference:a,setReference:c})}))))}),$=Object(f.withStyles)(function(e){return{root:{width:"100%"}}})(function(e){var t=e.classes,n=e.bookData,a=e.translationNotesData,c=e.username,o=e.languageId,s=e.manifests,i=e.reference,l=e.setReference,u=n&&a?r.a.createElement(F,{bookData:n,translationNotesData:a}):r.a.createElement(Y,{username:c,languageId:o,manifests:s,reference:i,setReference:l});return r.a.createElement("div",{className:t.root},u)}),Q=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={bookData:null,translationNotesData:null},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"fetchResources",value:function(e){var t=this,n=e.username,a=e.languageId,r=e.reference;r.book?function(e,t,n){return new Promise(function(a,r){I(e,t+"_ult",n).then(function(e){var t=D.a.toJSON(e);a(t)}).catch(r)})}(n,a,r.book).then(function(e){(function(e,t,n){return new Promise(function(a,r){S(e,t,n).then(function(e){var t={};e.shift(),e.forEach(function(e){var n=Object(E.a)(e,9),a=n[0],r=n[1],c=n[2],o=n[3],s=n[4],i=n[5],l=n[6],u=n[7],m=n[8];if(a&&r&&c){t[r]||(t[r]={}),t[r][c]||(t[r][c]=[]);var f={id:o,support_reference:s,original_quote:i,occurrence:l,gl_quote:u,occurrence_note:m.replace(/<br>/g,"\n")};t[r][c].push(f)}}),a(t)}).catch(r)})})(n,a,r.book).then(function(n){t.setState({bookData:e,translationNotesData:n})})}):this.setState({bookData:null,translationNotesData:null})}},{key:"componentWillReceiveProps",value:function(e){e.reference.book!==this.props.reference.book&&this.fetchResources(e)}},{key:"componentDidMount",value:function(){this.fetchResources(this.props)}},{key:"render",value:function(){var e=this.props,t=this.state,n=t.bookData,a=t.translationNotesData;return r.a.createElement($,Object.assign({},e,{bookData:n,translationNotesData:a}))}}]),t}(r.a.Component),U=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={value:null},n.handleChange=function(e,t){n.props.setReference({}),n.setState({value:t})},n.handleClose=function(){n.setState({value:null})},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"componentWillReceiveProps",value:function(e){var t=e.reference.book?null:1;this.setState({value:t})}},{key:"render",value:function(){var e=this.props,t=e.classes,n=(e.username,e.languageId,e.manifests,e.reference,e.setReference,this.state.value);return r.a.createElement(b.l,{className:t.root},r.a.createElement(b.b,{value:n,onChange:this.handleChange,showLabels:!0,className:t.root},r.a.createElement(b.c,{label:"Bookmarks",icon:r.a.createElement(z.d,null)}),r.a.createElement(b.c,{label:"Books",icon:r.a.createElement(z.a,null)}),r.a.createElement(b.c,{label:"Chapters",icon:r.a.createElement(z.c,null)})))}}]),t}(r.a.Component),X=Object(f.withStyles)({root:{width:"100%"}})(U),Z=Object(f.withStyles)(function(e){return{root:{flexGrow:1},appFrame:{zIndex:1,overflow:"hidden",position:"relative",display:"flex",width:"100%"},main:{width:"100%",padding:"5.5em 1em 5.5em 1em",minWidth:"20em",fontSize:"0.9em",lineHeight:"1.75em"},bottomNav:{width:"100%",position:"fixed",bottom:0,zIndex:10}}})(function(e){var t=e.classes,n=e.username,a=e.languageId,c=e.reference,o=e.manifests,s=e.setReference;return r.a.createElement("div",{className:t.root},r.a.createElement("div",{className:t.appFrame},r.a.createElement(W,{username:n,languageId:a,manifests:o,reference:c,setReference:s}),r.a.createElement("main",{className:t.main},r.a.createElement(Q,{username:n,languageId:a,manifests:o,reference:c,setReference:s})),r.a.createElement("nav",{className:t.bottomNav},r.a.createElement(X,{reference:c,setReference:s}))))}),ee=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,r=new Array(a),c=0;c<a;c++)r[c]=arguments[c];return(n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={username:"unfoldingWord",languageId:"en",manifests:{},reference:{}},n}return Object(m.a)(t,e),Object(i.a)(t,[{key:"setReference",value:function(e){this.setState({reference:e})}},{key:"componentDidMount",value:function(){var e=this,t=this.state;(function(e,t){return new Promise(function(n,a){var r={},c=function(e){return{ult:e+"_ult",tn:e+"-tn"}}(t),o=Object.keys(c);Object(k.each)(o,function(t,n){var o=c[t];C(e,o).then(function(e){r[t]=e,n()}).catch(a)},function(e){e&&a(e),n(r)})})})(t.username,t.languageId).then(function(t){e.setState({manifests:t})})}},{key:"render",value:function(){var e=this.state,t=e.username,n=e.languageId,a=e.reference,c=e.manifests;return r.a.createElement(Z,{username:t,languageId:n,reference:a,setReference:this.setReference.bind(this),manifests:c})}}]),t}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(ee,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[5475,2,1]]]);
//# sourceMappingURL=main.c1858ef0.chunk.js.map